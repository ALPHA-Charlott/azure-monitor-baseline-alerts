- name: Deploy SA Availability Alert
  description: Metric Alert for Storage Account Availability
  type: Metric
  properties:
    metricName: Availability
    metricNamespace: Microsoft.Storage/storageAccounts
    severity: 1
    windowSize: PT5M
    evaluationFrequency: PT5M
    timeAggregation: Average
    operator: LessThan
    threshold: 90
    criterionType: StaticThresholdCriterion
  references:
    - name: Monitoring Availability
      url: https://learn.microsoft.com/en-us/troubleshoot/azure/azure-storage/storage-monitoring-diagnosing-troubleshooting?toc=%2Fazure%2Fstorage%2Fblobs%2Ftoc.json&tabs=dotnet#monitoring-availability
    - name: Supported metrics for Microsoft.Storage/storageAccounts
      url: https://learn.microsoft.com/en-us/azure/azure-monitor/reference/supported-metrics/microsoft-storage-storageaccounts-metrics
  deployments:
  - description: Policy to audit/deploy SA Availability Alert
    template: Deploy-SA-Availability-Alert.json
