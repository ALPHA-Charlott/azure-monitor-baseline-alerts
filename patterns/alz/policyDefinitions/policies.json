{
  "$schema": "https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "bicep",
      "version": "0.19.5.34762",
      "templateHash": "2535145244200568049"
    }
  },
  "parameters": {
    "topLevelManagementGroupPrefix": {
      "type": "string",
      "defaultValue": "alz",
      "metadata": {
        "description": "Provide a prefix (unique at tenant-scope) for the Management Group hierarchy and other resources created as part of an Azure landing zone. DEFAULT VALUE = \"alz\"",
        "message": "The JSON version of this file is programatically generated from Bicep. PLEASE DO NOT UPDATE MANUALLY!!"
      }
    },
    "location": {
      "type": "string",
      "defaultValue": "[deployment().location]",
      "metadata": {
        "description": "Optionally set the deployment location for policies with Deploy If Not Exists effect. DEFAULT VALUE = \"deployment().location\""
      }
    },
    "scope": {
      "type": "string",
      "defaultValue": "[tenantResourceId('Microsoft.Management/managementGroups', parameters('topLevelManagementGroupPrefix'))]",
      "metadata": {
        "description": "Optionally set the scope for custom Policy Definitions used in Policy Set Definitions (Initiatives). Must be one of '/', '/subscriptions/id' or '/providers/Microsoft.Management/managementGroups/id'. DEFAULT VALUE = '/providers/Microsoft.Management/managementGroups/${topLevelManagementGroupPrefix}'"
      }
    }
  },
  "variables": {
    "copy": [
      {
        "name": "processPolicyDefinitionsAll",
        "count": "[length(variables('loadPolicyDefinitions').All)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').All[copyIndex('processPolicyDefinitionsAll')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicyDefinitionsAzureCloud",
        "count": "[length(variables('loadPolicyDefinitions').AzureCloud)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').AzureCloud[copyIndex('processPolicyDefinitionsAzureCloud')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicyDefinitionsAzureChinaCloud",
        "count": "[length(variables('loadPolicyDefinitions').AzureChinaCloud)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').AzureChinaCloud[copyIndex('processPolicyDefinitionsAzureChinaCloud')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicyDefinitionsAzureUSGovernment",
        "count": "[length(variables('loadPolicyDefinitions').AzureUSGovernment)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').AzureUSGovernment[copyIndex('processPolicyDefinitionsAzureUSGovernment')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicySetDefinitionsAll",
        "count": "[length(variables('loadPolicySetDefinitions').All)]",
        "input": "[replace(variables('loadPolicySetDefinitions').All[copyIndex('processPolicySetDefinitionsAll')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "processPolicySetDefinitionsAzureCloud",
        "count": "[length(variables('loadPolicySetDefinitions').AzureCloud)]",
        "input": "[replace(variables('loadPolicySetDefinitions').AzureCloud[copyIndex('processPolicySetDefinitionsAzureCloud')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "processPolicySetDefinitionsAzureChinaCloud",
        "count": "[length(variables('loadPolicySetDefinitions').AzureChinaCloud)]",
        "input": "[replace(variables('loadPolicySetDefinitions').AzureChinaCloud[copyIndex('processPolicySetDefinitionsAzureChinaCloud')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "processPolicySetDefinitionsAzureUSGovernment",
        "count": "[length(variables('loadPolicySetDefinitions').AzureUSGovernment)]",
        "input": "[replace(variables('loadPolicySetDefinitions').AzureUSGovernment[copyIndex('processPolicySetDefinitionsAzureUSGovernment')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "policyDefinitionsAll",
        "count": "[length(variables('processPolicyDefinitionsAll'))]",
        "input": "[json(variables('processPolicyDefinitionsAll')[copyIndex('policyDefinitionsAll')])]"
      },
      {
        "name": "policyDefinitionsAzureCloud",
        "count": "[length(variables('processPolicyDefinitionsAzureCloud'))]",
        "input": "[json(variables('processPolicyDefinitionsAzureCloud')[copyIndex('policyDefinitionsAzureCloud')])]"
      },
      {
        "name": "policyDefinitionsAzureChinaCloud",
        "count": "[length(variables('processPolicyDefinitionsAzureChinaCloud'))]",
        "input": "[json(variables('processPolicyDefinitionsAzureChinaCloud')[copyIndex('policyDefinitionsAzureChinaCloud')])]"
      },
      {
        "name": "policyDefinitionsAzureUSGovernment",
        "count": "[length(variables('processPolicyDefinitionsAzureUSGovernment'))]",
        "input": "[json(variables('processPolicyDefinitionsAzureUSGovernment')[copyIndex('policyDefinitionsAzureUSGovernment')])]"
      },
      {
        "name": "policySetDefinitionsAll",
        "count": "[length(variables('processPolicySetDefinitionsAll'))]",
        "input": "[json(variables('processPolicySetDefinitionsAll')[copyIndex('policySetDefinitionsAll')])]"
      },
      {
        "name": "policySetDefinitionsAzureCloud",
        "count": "[length(variables('processPolicySetDefinitionsAzureCloud'))]",
        "input": "[json(variables('processPolicySetDefinitionsAzureCloud')[copyIndex('policySetDefinitionsAzureCloud')])]"
      },
      {
        "name": "policySetDefinitionsAzureChinaCloud",
        "count": "[length(variables('processPolicySetDefinitionsAzureChinaCloud'))]",
        "input": "[json(variables('processPolicySetDefinitionsAzureChinaCloud')[copyIndex('policySetDefinitionsAzureChinaCloud')])]"
      },
      {
        "name": "policySetDefinitionsAzureUSGovernment",
        "count": "[length(variables('processPolicySetDefinitionsAzureUSGovernment'))]",
        "input": "[json(variables('processPolicySetDefinitionsAzureUSGovernment')[copyIndex('policySetDefinitionsAzureUSGovernment')])]"
      }
    ],
    "$fxv#0": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_Firewall_Delete\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log Azure FireWall Delete Alert\",\n    \"description\": \"Policy to Deploy Activity Log Azure Firewall Delete Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/azureFirewalls\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"ActivityAzureFirewallDelete\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.Network/azureFirewalls/delete\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2020-10-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityAzureFirewallDelete\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityAzureFirewallDelete\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log Firewall Delete\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.Network/azurefirewalls/delete\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#1": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_NSG_Delete\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log NSG Delete Alert\",\n    \"description\": \"Policy to Deploy Activity Log NSG Delete Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/networkSecurityGroups\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"ActivityNSGDelete\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.Network/networkSecurityGroups/delete\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityNSGDelete\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityNSGDelete\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log NSG Delete\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.Network/networkSecurityGroups/delete\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#10": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERGw_ExpressRouteBitsIn_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ERG ExpressRoute Bits In Alert\",\n    \"description\": \"Policy to audit/deploy ER Gateway Connection BitsInPerSecond Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressroutegateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressroutegateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ERGatewayConnectionBitsInPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressroutegateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-GatewayERBitsInAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Gateway Connection BitsInPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ERGatewayConnectionBitsInPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/expressroutegateways\",\n                            \"metricName\": \"ERGatewayConnectionBitsInPerSecond\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#100": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Alerting-Identity",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts for Identity",
        "description": "Initiative to deploy AMBA alerts relevant to the ALZ Identity management group",
        "metadata": {
          "version": "1.1.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorResourceGroupName": {
            "type": "String",
            "defaultValue": "ALZ-Monitoring-RG",
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Name",
              "description": "Name of the resource group where the alerting resources will be deployed"
            }
          },
          "ALZMonitorResourceGroupTags": {
            "type": "Object",
            "defaultValue": {
              "_deployed_by_alz_monitor": true
            },
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Tags",
              "description": "Tags for the resource group where the alerting resources will be deployed"
            }
          },
          "ALZMonitorResourceGroupLocation": {
            "type": "String",
            "defaultValue": "centralus",
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Location",
              "description": "Location of the resource group where the alerting resources will be deployed"
            }
          },
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisable"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "KVRequestAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "KeyVault Request Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "KVRequestWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "KeyVault Request Alert Window Size",
              "description": "Window size for the alert"
            }
          },
          "KVRequestEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "KeyVault Request Alert Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KVRequestPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "KeyVault Request Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "KVRequestAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "KeyVault Request Alert State",
              "description": "State of the alert, true will enable the alert, false will disable the alert"
            }
          },
          "KvAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "KeyVault Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "KvAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "KeyVault Availability Alert Window Size",
              "description": "Window size for the alert"
            }
          },
          "KvAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "KeyVault Availability Alert Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KvAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "KeyVault Availability Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "KvAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "KeyVault Availability Alert State",
              "description": "State of the alert, true will enable the alert, false will disable the alert"
            }
          },
          "KVAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "20",
            "metadata": {
              "displayName": "KeyVault Availability Alert Threshold",
              "description": "Threshold for the alert"
            }
          },
          "KvLatencyAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "KeyVault Latency Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "KvLatencyAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "KeyVault Latency Alert Window Size",
              "description": "Window size for the alert"
            }
          },
          "KvLatencyAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "KeyVault Latency Alert Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KvLatencyAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "KeyVault Latency Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "KvLatencyAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "KeyVault Latency Alert State",
              "description": "State of the alert, true will enable the alert, false will disable the alert"
            }
          },
          "KvLatencyAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "1000",
            "metadata": {
              "displayName": "KeyVault Latency Alert Threshold",
              "description": "Threshold for the alert"
            }
          },
          "KVCapacityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "KeyVault Capacity Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "KVCapacityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "KeyVault Capacity Alert Window Size",
              "description": "Window size for the alert"
            }
          },
          "KVCapacityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "KeyVault Capacity Alert Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KVCapacityPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "KeyVault Capacity Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "KVCapacityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "KeyVault Capacity Alert State",
              "description": "State of the alert, true will enable the alert, false will disable the alert"
            }
          },
          "KVCapacityThreshold": {
            "type": "string",
            "defaultValue": "75",
            "metadata": {
              "displayName": "KeyVault Capacity Alert Threshold",
              "description": "Threshold for the alert"
            }
          },
          "activityKVDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity Log KeyVault Delete Alert State",
              "description": "State of the alert, true will enable the alert, false will disable the alert"
            }
          },
          "activityKVDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Key Vault Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_KVRequest",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Requests_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KVRequestAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KVRequestWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KVRequestEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KVRequestPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KVRequestAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_KvAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Availability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KvAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KvAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KvAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KvAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KvAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('KVAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_KvLatencyAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Latency_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KvLatencyAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KvLatencyAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KvLatencyAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KvLatencyAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KvLatencyAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('KvLatencyAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_KVCapacity",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Capacity_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KVCapacityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KVCapacityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KVCapacityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KVCapacityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KVCapacityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('KVCapacityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityKVDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_KeyVault_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityKVDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityKVDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "$fxv#101": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Alerting-LandingZone",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts for Landing Zone",
        "description": "Initiative to deploy AMBA alerts relevant to the ALZ LandingZone management group",
        "metadata": {
          "version": "1.1.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorResourceGroupName": {
            "type": "String",
            "defaultValue": "ALZ-Monitoring-RG",
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Name",
              "description": "Name of the resource group where the ALZ Monitor resources will be deployed"
            }
          },
          "ALZMonitorResourceGroupTags": {
            "type": "Object",
            "defaultValue": {
              "_deployed_by_alz_monitor": true
            },
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Tags",
              "description": "Tags for the resource group where the ALZ Monitor resources will be deployed"
            }
          },
          "ALZMonitorResourceGroupLocation": {
            "type": "String",
            "defaultValue": "centralus",
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Location",
              "description": "Location of the resource group where the ALZ Monitor resources will be deployed"
            }
          },
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisable"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "ALZUserAssignedManagedIdentityName": {
            "type": "string",
            "defaultValue": "id-AMBA-ARG-Reader-001",
            "metadata": {
              "description": "The name of the user assigned managed identity to be created for monitoring purpose.",
              "displayName": "Name of the user assigned managed identity to be created."
            }
          },
          "ALZManagementSubscriptionId": {
            "type": "string",
            "defaultValue": "",
            "metadata": {
              "description": "The subscription ID of the management subscription where the user assigned managed identity will be created."
            }
          },
          "BYOUserAssignedManagedIdentityResourceId": {
            "type": "string",
            "defaultValue": "",
            "metadata": {
              "description": "The resource Id of the user assigned managed identity provided by the customer.",
              "displayName": "Customer defined User Assigned managed Identity resource Id."
            }
          },
          "KVRequestAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Key Vault Request Alert Severity",
              "description": "Severity of the alert for Key Vault Request"
            }
          },
          "KVRequestWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Key Vault Request Window Size",
              "description": "Window size for the alert"
            }
          },
          "KVRequestEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Key Vault Request Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KVRequestPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Key Vault Request Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "KVRequestAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Key Vault Request Alert State",
              "description": "Alert state for the alert"
            }
          },
          "KvAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Key Vault Availability Alert Severity",
              "description": "Severity of the alert for Key Vault Availability"
            }
          },
          "KvAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Key Vault Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "KvAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Key Vault Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KvAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Key Vault Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "KvAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Key Vault Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "KVAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "20",
            "metadata": {
              "displayName": "Key Vault Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "KvLatencyAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Key Vault Latency Availability Alert Severity",
              "description": "Severity of the alert for Key Vault Latency Availability"
            }
          },
          "KvLatencyAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Key Vault Latency Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "KvLatencyAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Key Vault Latency Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KvLatencyAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Key Vault Latency Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "KvLatencyAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Key Vault Latency Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "KvLatencyAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "1000",
            "metadata": {
              "displayName": "Key Vault Latency Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "KVCapacityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Key Vault Capacity Alert Severity",
              "description": "Severity of the alert for Key Vault Capacity"
            }
          },
          "KVCapacityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Key Vault Capacity Window Size",
              "description": "Window size for the alert"
            }
          },
          "KVCapacityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Key Vault Capacity Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "KVCapacityPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Key Vault Capacity Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "KVCapacityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Key Vault Capacity Alert State",
              "description": "Alert state for the alert"
            }
          },
          "KVCapacityThreshold": {
            "type": "string",
            "defaultValue": "75",
            "metadata": {
              "displayName": "Key Vault Capacity Threshold",
              "description": "Threshold for the alert"
            }
          },
          "activityKVDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity Key Vault Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityKVDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Key Vault Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "StorageAccountAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Alert Severity",
              "description": "Severity of the alert for Storage Account Availability"
            }
          },
          "StorageAccountAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "StorageAccountAvailabilityFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "StorageAccountAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "StorageAccountAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Storage Account Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "StorageAccountAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "90",
            "metadata": {
              "displayName": "Storage Account Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "StorageAccountDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Storage Account Delete Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will create the alert if it does not exist, disabled will not create the alert"
            }
          },
          "StorageAccountDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Storage Account Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPDDoSAttackAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Alert Severity",
              "description": "Severity of the alert for PIP DDoS Attack"
            }
          },
          "PIPDDoSAttackWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPDDoSAttackEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPDDoSAttackPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "PIPDDoSAttackAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP DDoS Attack Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPDDoSAttackThreshold": {
            "type": "string",
            "defaultValue": "0",
            "metadata": {
              "displayName": "PIP DDoS Attack Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPPacketsInDDoSAlertSeverity": {
            "type": "String",
            "defaultValue": "4",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Alert Severity",
              "description": "Severity of the alert for PIP Packets In DDoS"
            }
          },
          "PIPPacketsInDDoSWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPPacketsInDDoSEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPPacketsInDDoSPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "PIPPacketsInDDoSAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP Packets In DDoS Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPPacketsInDDoSThreshold": {
            "type": "string",
            "defaultValue": "40000",
            "metadata": {
              "displayName": "PIP Packets In DDoS Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPVIPAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Alert Severity",
              "description": "Severity of the alert for PIP VIP Availability"
            }
          },
          "PIPVIPAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPVIPAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPVIPAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "PIPVIPAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP VIP Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPVIPAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "PIP VIP Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPBytesInDDoSAlertSeverity": {
            "type": "String",
            "defaultValue": "4",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Alert Severity",
              "description": "Severity of the alert for PIP Bytes In DDoS"
            }
          },
          "PIPBytesInDDoSWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPBytesInDDoSEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPBytesInDDoSPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "PIPBytesInDDoSAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP Bytes In DDoS Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPBytesInDDoSThreshold": {
            "type": "string",
            "defaultValue": "8000000",
            "metadata": {
              "displayName": "PIP Bytes In DDoS Threshold",
              "description": "Threshold for the alert"
            }
          },
          "RVBackupHealthMonitorPolicyEffect": {
            "type": "string",
            "defaultValue": "modify",
            "allowedValues": [
              "modify",
              "audit",
              "disabled"
            ],
            "metadata": {
              "displayName": "Recovery Vault Backup Health Monitor Policy Effect",
              "description": "Policy effect for the alert, modify will modify the alert if it exists, or audit if it does not exist"
            }
          },
          "VNETDDOSAttackAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Alert Severity",
              "description": "Severity of the alert for VNET DDoS Attack"
            }
          },
          "VNETDDOSAttackWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Window Size",
              "description": "Window size for the alert"
            }
          },
          "VNETDDOSAttackEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VNETDDOSAttackPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VNETDDOSAttackAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VNET DDoS Attack Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VNETDDOSAttackThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VNET DDoS Attack Threshold",
              "description": "Threshold for the alert"
            }
          },
          "activityNSGDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity NSG Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "activityNSGDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity NSG Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityUDRUpdatePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity UDR Update Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "activityUDRUpdateAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity UDR Update Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VMHeartBeatRGAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Alert Severity",
              "description": "Severity of the alert for VM Heart Beat RG"
            }
          },
          "VMHeartBeatRGWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMHeartBeatRGEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMHeartBeatRGAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Heart Beat RG Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMHeartBeatRGAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Heart Beat RG Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMHeartBeatRGAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Heart Beat RG Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMHeartBeatRGPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMHeartBeatRGAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Heart Beat RG Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VMHeartBeatRGThreshold": {
            "type": "string",
            "defaultValue": "10",
            "metadata": {
              "displayName": "VM Heart Beat RG Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMHeartBeatRGOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Operator",
              "description": "Operator for the alert"
            }
          },
          "VMHeartBeatRGTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMHeartBeatRGComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM Heart Beat RG Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMNetworkInAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Network In Alert Severity",
              "description": "Severity of the alert for VM Network In"
            }
          },
          "VMNetworkInWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Network In Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMNetworkInEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Network In Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMNetworkInAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Network In Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMNetworkInAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Network In Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMNetworkInAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Network In Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMNetworkInPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Network In Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMNetworkInAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Network In Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VMNetworkInThreshold": {
            "type": "string",
            "defaultValue": "10000000",
            "metadata": {
              "displayName": "VM Network In Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMNetworkInOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Network In Operator",
              "description": "Operator for the alert"
            }
          },
          "VMNetworkInTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Network In Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMNetworkInEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Network In Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMNetworkInFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Network In Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMNetworkInComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM Network In Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMNetworkOutAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Network Out Alert Severity",
              "description": "Severity of the alert for VM Network Out"
            }
          },
          "VMNetworkOutWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Network Out Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMNetworkOutEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Network Out Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMNetworkOutAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Network Out Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMNetworkOutAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Network Out Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMNetworkOutAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Network Out Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMNetworkOutPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Network Out Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMNetworkOutAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Network Out Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMNetworkOutThreshold": {
            "type": "string",
            "defaultValue": "10000000",
            "metadata": {
              "displayName": "VM Network Out Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMNetworkOutOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Network Out Operator",
              "description": "Operator for the alert"
            }
          },
          "VMNetworkOutTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Network Out Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMNetworkOutEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Network Out Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMNetworkOutFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Network Out Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMNetworkOutComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM Network Out Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMOSDiskReadLatencyAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Alert Severity",
              "description": "Severity of the alert for VM OS Disk Read Latency"
            }
          },
          "VMOSDiskReadLatencyWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMOSDiskReadLatencyEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMOSDiskReadLatencyAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMOSDiskReadLatencyAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMOSDiskReadLatencyAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMOSDiskReadLatencyPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMOSDiskReadLatencyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMOSDiskReadLatencyThreshold": {
            "type": "string",
            "defaultValue": "30",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMOSDiskReadLatencyOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Operator",
              "description": "Operator for the alert"
            }
          },
          "VMOSDiskReadLatencyTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMOSDiskReadLatencyEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMOSDiskReadLatencyFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM OS Disk Read Latency Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMOSDiskReadLatencyComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM OS Disk Read Latency Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMOSDiskWriteLatencyAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Alert Severity",
              "description": "Severity of the alert for VM OS Disk Write Latency"
            }
          },
          "VMOSDiskWriteLatencyWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMOSDiskWriteLatencyEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMOSDiskWriteLatencyAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMOSDiskWriteLatencyAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMOSDiskWriteLatencyAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMOSDiskWriteLatencyPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMOSDiskWriteLatencyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMOSDiskWriteLatencyThreshold": {
            "type": "string",
            "defaultValue": "50",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMOSDiskWriteLatencyOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Operator",
              "description": "Operator for the alert"
            }
          },
          "VMOSDiskWriteLatencyTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMOSDiskWriteLatencyEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMOSDiskWriteLatencyFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM OS Disk Write Latency Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMOSDiskWriteLatencyComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM OS Disk Write Latency Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMOSDiskSpaceAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Alert Severity",
              "description": "Severity of the alert for VM OS Disk Space"
            }
          },
          "VMOSDiskSpaceWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMOSDiskSpaceEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMOSDiskSpaceAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Space Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMOSDiskSpaceAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Space Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMOSDiskSpaceAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM OS Disk Space Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMOSDiskSpacePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMOSDiskSpaceAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM OS Disk Space Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMOSDiskSpaceThreshold": {
            "type": "string",
            "defaultValue": "10",
            "metadata": {
              "displayName": "VM OS Disk Space Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMOSDiskSpaceOperator": {
            "type": "string",
            "defaultValue": "LessThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Operator",
              "description": "Operator for the alert"
            }
          },
          "VMOSDiskSpaceTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMOSDiskSpaceEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM OS Disk Space Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMOSDiskSpaceFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM OS Disk Space Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMOSDiskSpaceComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM OS Disk Space Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMPercentCPUAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Percent CPU Alert Severity",
              "description": "Severity of the alert for VM Percent CPU"
            }
          },
          "VMPercentCPUWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Percent CPU Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMPercentCPUEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Percent CPU Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMPercentCPUAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Percent CPU Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMPercentCPUAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Percent CPU Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMPercentCPUAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Percent CPU Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMPercentCPUPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Percent CPU Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMPercentCPUAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Percent CPU Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMPercentCPUThreshold": {
            "type": "string",
            "defaultValue": "85",
            "metadata": {
              "displayName": "VM Percent CPU Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMPercentCPUOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Percent CPU Operator",
              "description": "Operator for the alert"
            }
          },
          "VMPercentCPUTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Percent CPU Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMPercentMemoryAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Percent Memory Alert Severity",
              "description": "Severity of the alert for VM Percent Memory"
            }
          },
          "VMPercentMemoryWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Percent Memory Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMPercentMemoryEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Percent Memory Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMPercentMemoryAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Percent Memory Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMPercentMemoryAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Percent Memory Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMPercentMemoryAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Percent Memory Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMPercentMemoryPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Percent Memory Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMPercentMemoryAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Percent Memory Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMPercentMemoryThreshold": {
            "type": "string",
            "defaultValue": "10",
            "metadata": {
              "displayName": "VM Percent Memory Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMPercentMemoryOperator": {
            "type": "string",
            "defaultValue": "LessThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Percent Memory Operator",
              "description": "Operator for the alert"
            }
          },
          "VMPercentMemoryTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Percent Memory Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMDataDiskSpaceAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Alert Severity",
              "description": "Severity of the alert for VM Data Disk Space"
            }
          },
          "VMDataDiskSpaceWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMDataDiskSpaceEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMDataDiskSpaceAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Space Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMDataDiskSpaceAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Space Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMDataDiskSpaceAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Data Disk Space Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMDataDiskSpacePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMDataDiskSpaceAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Space Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMDataDiskSpaceThreshold": {
            "type": "string",
            "defaultValue": "10",
            "metadata": {
              "displayName": "VM Data Disk Space Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMDataDiskSpaceOperator": {
            "type": "string",
            "defaultValue": "LessThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Operator",
              "description": "Operator for the alert"
            }
          },
          "VMDataDiskSpaceTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMDataDiskSpaceEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Data Disk Space Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMDataDiskSpaceFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Data Disk Space Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMDataDiskSpaceComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM Data Disk Space Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMDataDiskReadLatencyAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Alert Severity",
              "description": "Severity of the alert for VM Data Disk Read Latency"
            }
          },
          "VMDataDiskReadLatencyWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMDataDiskReadLatencyEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMDataDiskReadLatencyAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMDataDiskReadLatencyAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMDataDiskReadLatencyAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMDataDiskReadLatencyPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMDataDiskReadLatencyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMDataDiskReadLatencyThreshold": {
            "type": "string",
            "defaultValue": "30",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMDataDiskReadLatencyOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Operator",
              "description": "Operator for the alert"
            }
          },
          "VMDataDiskReadLatencyTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMDataDiskReadLatencyEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMDataDiskReadLatencyFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Data Disk Read Latency Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMDataDiskReadLatencyComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM Data Disk Read Latency Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "VMDataDiskWriteLatencyAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Alert Severity",
              "description": "Severity of the alert for VM Data Disk Write Latency"
            }
          },
          "VMDataDiskWriteLatencyWindowSize": {
            "type": "string",
            "defaultValue": "PT15M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Window Size",
              "description": "Window size for the alert"
            }
          },
          "VMDataDiskWriteLatencyEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VMDataDiskWriteLatencyAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VMDataDiskWriteLatencyAutoResolve": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Auto Resolve",
              "description": "Auto Resolve for the alert"
            }
          },
          "VMDataDiskWriteLatencyAutoResolveTime": {
            "type": "string",
            "defaultValue": "00:10:00",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Auto Resolve Time",
              "description": "Auto Resolve Time for the alert"
            }
          },
          "VMDataDiskWriteLatencyPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "VMDataDiskWriteLatencyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Alert State",
              "description": "Alert state for the alert, true will enable the alert, false will disable the alert"
            }
          },
          "VMDataDiskWriteLatencyThreshold": {
            "type": "string",
            "defaultValue": "30",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VMDataDiskWriteLatencyOperator": {
            "type": "string",
            "defaultValue": "GreaterThan",
            "allowedValues": [
              "Equals",
              "GreaterThan",
              "GreaterThanOrEqual",
              "LessThan",
              "LessThanOrEqual"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Operator",
              "description": "Operator for the alert"
            }
          },
          "VMDataDiskWriteLatencyTimeAggregation": {
            "type": "string",
            "defaultValue": "Average",
            "allowedValues": [
              "Average",
              "Count",
              "Maximum",
              "Minimum",
              "Total"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Time Aggregation",
              "description": "Time Aggregation for the alert"
            }
          },
          "VMDataDiskWriteLatencyEvaluationPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Evaluation Periods",
              "description": "Evaluation Periods for the alert"
            }
          },
          "VMDataDiskWriteLatencyFailingPeriods": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VM Data Disk Write Latency Failing Periods",
              "description": "Failing Periods for the alert"
            }
          },
          "VMDataDiskWriteLatencyComputersToInclude": {
            "type": "array",
            "defaultValue": [
              "*"
            ],
            "metadata": {
              "displayName": "VM Data Disk Write Latency Computers To Include",
              "description": "Computers To Include for the alert"
            }
          },
          "AGWApplicationGatewayTotalTimeAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Total Time Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWApplicationGatewayTotalTimeWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Total Time Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWApplicationGatewayTotalTimeEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Total Time Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWApplicationGatewayTotalTimePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Total Time Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWApplicationGatewayTotalTimeAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Total Time Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWBackendLastByteResponseTimeAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Backend Last Byte Response Time Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWBackendLastByteResponseTimeWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Backend Last Byte Response Time Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWBackendLastByteResponseTimeEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Backend Last Byte Response Time Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWBackendLastByteResponseTimePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Backend Last Byte Response Time Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWBackendLastByteResponseTimeAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Backend Last Byte Response Time Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWCapacityUnitsAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Capacity Units Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWCapacityUnitsWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Capacity Units Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWCapacityUnitsEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Capacity Units Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWCapacityUnitsPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Capacity Units Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWCapacityUnitsAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Capacity Units Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWComputeUnitsAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Compute Units Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWComputeUnitsWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Compute Units Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWComputeUnitsEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Compute Units Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWComputeUnitsPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Compute Units Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWComputeUnitsAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Compute Units Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWCPUUtilAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW CPU Util Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWCPUUtilWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW CPU Util Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWCPUUtilEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW CPU Util Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWCPUUtilPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW CPU Util Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWCPUUtilAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW CPU Util Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWFailedRequestsAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Failed Requests Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWFailedRequestsWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Failed Requests Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWFailedRequestsEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Failed Requests Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWFailedRequestsPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Failed Requests Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWFailedRequestsAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Failed Requests Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWResponseStatusAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Response Status Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWResponseStatusWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Response Status Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWResponseStatusEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Response Status Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWResponseStatusPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Response Status Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWResponseStatusAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Response Status Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AGWUnhealthyHostCountAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AGW Unhealthy Host Count Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AGWUnhealthyHostCountWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AGW Unhealthy Host Count Window Size",
              "description": "Window size for the alert"
            }
          },
          "AGWUnhealthyHostCountEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AGW Unhealthy Host Count Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AGWUnhealthyHostCountPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AGW Unhealthy Host Count Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AGWUnhealthyHostCountAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AGW Unhealthy Host Count Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBDatapathAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBDatapathAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBDatapathAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBDatapathAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBDatapathAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Data path Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBGlobalBackendAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBGlobalBackendAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBGlobalBackendAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBGlobalBackendAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBGlobalBackendAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Global Backend Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBHealthProbeStatusAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBHealthProbeStatusWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBHealthProbeStatusEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBHealthProbeStatusPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBHealthProbeStatusAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Health Probe Status Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBUsedSNATPortsAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBUsedSNATPortsWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBUsedSNATPortsEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBUsedSNATPortsPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBUsedSNATPortsAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Used SNAT Ports Alert State",
              "description": "Alert state for the alert"
            }
          },
          "CDNPOriginHealthPercentageAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "CDN Origin Health Percentage Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "CDNPOriginHealthPercentageWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "CDN Origin Health Percentage Window Size",
              "description": "Window size for the alert"
            }
          },
          "CDNPOriginHealthPercentageEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "CDN Origin Health Percentage Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "CDNPOriginHealthPercentagePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "CDN Origin Health Percentage Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "CDNPOriginHealthPercentageAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "CDN Origin Health Percentage Alert State",
              "description": "Alert state for the alert"
            }
          },
          "CDNPOriginLatencyAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "CDN Origin Latancy Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "CDNPOriginLatencyWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "CDN Origin Latency Window Size",
              "description": "Window size for the alert"
            }
          },
          "CDNPOriginLatencyEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "CDN Origin Latency Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "CDNPOriginLatencyPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "CDN Origin Latency Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "CDNPOriginLatencyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "CDN Origin Latency Alert State",
              "description": "Alert state for the alert"
            }
          },
          "CDNPPercentage4XXAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "CDN Percentage 4XX Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "CDNPPercentage4XXWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "CDN Percentage 4XX Window Size",
              "description": "Window size for the alert"
            }
          },
          "CDNPPercentage4XXEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "CDN Percentage 4XX Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "CDNPPercentage4XXPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "CDN Percentage 4XX Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "CDNPPercentage4XXAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "CDN Percentage 4XX Alert State",
              "description": "Alert state for the alert"
            }
          },
          "CDNPPercentage5XXAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "CDN Percentage 5XX Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "CDNPPercentage5XXWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "CDN Percentage 5XX Window Size",
              "description": "Window size for the alert"
            }
          },
          "CDNPPercentage5XXEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "CDN Percentage 5XX Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "CDNPPercentage5XXPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "CDN Percentage 5XX Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "CDNPPercentage5XXAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "CDN Percentage 5XX Alert State",
              "description": "Alert state for the alert"
            }
          },
          "TMEndpointHealthAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "TM Enpoint Health Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "TMEndpointHealthWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "TM Enpoint Health Window Size",
              "description": "Window size for the alert"
            }
          },
          "TMEndpointHealthEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "TM Enpoint Health Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "TMEndpointHealthPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "TM Enpoint Health Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "TMEndpointHealthAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "TM Enpoint Health Alert State",
              "description": "Alert state for the alert"
            }
          },
          "WSFCPUPercentageAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "WSF CPU Percentage Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "WSFCPUPercentageWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "WSF CPU Percentage Window Size",
              "description": "Window size for the alert"
            }
          },
          "WSFCPUPercentageEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "WSF CPU Percentage Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "WSFCPUPercentagePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "WSF CPU Percentage Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "WSFCPUPercentageAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "WSF CPU Percentage Alert State",
              "description": "Alert state for the alert"
            }
          },
          "WSFMemoryPercentageAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "WSF Memory Percentage Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "WSFMemoryPercentageWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "WSF Memory Percentage  Window Size",
              "description": "Window size for the alert"
            }
          },
          "WSFMemoryPercentageEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "WSF Memory Percentage Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "WSFMemoryPercentagePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "WSF Memory Percentage Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "WSFMemoryPercentageAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "WSF Memory Percentage Alert State",
              "description": "Alert state for the alert"
            }
          },
          "WSFDiskQueueLengthAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "WSF Disk Queue Lenght Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "WSFDiskQueueLengthWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "WSF Disk Queue Lenght Window Size",
              "description": "Window size for the alert"
            }
          },
          "WSFDiskQueueLengthEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "WSF Disk Queue Lenght Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "WSFDiskQueueLengthPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "WSF Disk Queue Lenght Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "WSFDiskQueueLengthAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "WSF Disk Queue Lenght Alert State",
              "description": "Alert state for the alert"
            }
          },
          "WSFHttpQueueLengthAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "WSF HTTP Queue Lenght Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "WSFHttpQueueLengthWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "WSF HTTP Queue Lenght Window Size",
              "description": "Window size for the alert"
            }
          },
          "WSFHttpQueueLengthEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "WSF HTTP Queue Lenght Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "WSFHttpQueueLengthPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "WSF HTTP Queue Lenght Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "WSFHttpQueueLengthAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "WSF HTTP Queue Lenght Alert State",
              "description": "Alert state for the alert"
            }
          },
          "FDBackendHealthAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "FD Backend Health Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "FDBackendHealthWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "FD Backend Health Window Size",
              "description": "Window size for the alert"
            }
          },
          "FDBackendHealthEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "FD Backend Health Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "FDBackendHealthPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "FD Backend Health Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "FDBackendHealthAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "FD Backend Health Alert State",
              "description": "Alert state for the alert"
            }
          },
          "FDBackendRequestLatencyAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "FD Backend Request Latency Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "FDBackendRequestLatencyWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "FD Backend Request Latency Window Size",
              "description": "Window size for the alert"
            }
          },
          "FDBackendRequestLatencyEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "FD Backend Request Latency Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "FDBackendRequestLatencyPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "FD Backend Request Latency Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "FDBackendRequestLatencyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "FD Backend Request Latency Alert State",
              "description": "Alert state for the alert"
            }
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_KVRequest",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Requests_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KVRequestAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KVRequestWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KVRequestEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KVRequestPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KVRequestAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_KvAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Availability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KvAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KvAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KvAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KvAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KvAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('KVAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_KvLatencyAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Latency_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KvLatencyAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KvLatencyAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KvLatencyAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KvLatencyAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KvLatencyAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('KvLatencyAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_KVCapacity",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_KeyVault_Capacity_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('KVCapacityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('KVCapacityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('KVCapacityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('KVCapacityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('KVCapacityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('KVCapacityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityKVDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_KeyVault_Delete",
            "parameters": {
              "enabled": {
                "value": "[[[parameters('activityKVDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "effect": {
                "value": "[[[parameters('activityKVDeletePolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_StorageAccountAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_StorageAccount_Availability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('StorageAccountAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('StorageAccountAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('StorageAccountAvailabilityFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('StorageAccountAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('StorageAccountAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('StorageAccountAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activitySADelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_StorageAccount_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('StorageAccountDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('StorageAccountDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPBytesInDDoS",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_BytesInDDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPBytesInDDoSAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPBytesInDDoSWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPBytesInDDoSEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPBytesInDDoSPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPBytesInDDoSAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPBytesInDDoSThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPDDoSAttack",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_DDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPDDoSAttackAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPDDoSAttackWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPDDoSAttackEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPDDoSAttackPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPDDoSAttackAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPDDoSAttackThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPPacketsInDDoS",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_PacketsInDDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPPacketsInDDoSAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPPacketsInDDoSWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPPacketsInDDoSEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPPacketsInDDoSPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPPacketsInDDoSAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPPacketsInDDoSThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPVIPAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_VIPAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPVIPAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPVIPAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPVIPAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPVIPAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPVIPAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPVIPAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityNSGDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_NSG_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityNSGDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityNSGDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityUDRUpdate",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_RouteTable_Update",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityUDRUpdatePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityUDRUpdateAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_RVBackupHealthMonitor",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_RecoveryVault_BackupHealthMonitor_Alert",
            "parameters": {
              "effect": {
                "value": "[[[parameters('RVBackupHealthMonitorPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VNETDDOSAttack",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VNET_DDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VNETDDOSAttackAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VNETDDOSAttackWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VNETDDOSAttackEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VNETDDOSAttackPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VNETDDOSAttackAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VNETDDOSAttackThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMHeartBeatRG",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_HeartBeat_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "severity": {
                "value": "[[[parameters('VMHeartBeatRGAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMHeartBeatRGWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMHeartBeatRGEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMHeartBeatRGAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMHeartBeatRGAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMHeartBeatRGAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMHeartBeatRGPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMHeartBeatRGAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMHeartBeatRGThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMHeartBeatRGOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMHeartBeatRGTimeAggregation')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMHeartBeatRGComputersToInclude')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMNetworkIn",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_NetworkIn_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMNetworkInAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMNetworkInWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMNetworkInEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMNetworkInAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMNetworkInAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMNetworkInAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMNetworkInPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMNetworkInAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMNetworkInThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMNetworkInOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMNetworkInTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMNetworkInFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMNetworkInEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMNetworkInComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMNetworkOut",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_NetworkOut_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMNetworkOutAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMNetworkOutWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMNetworkOutEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMNetworkOutAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMNetworkOutAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMNetworkOutAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMNetworkOutPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMNetworkOutAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMNetworkOutThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMNetworkOutOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMNetworkOutTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMNetworkOutFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMNetworkOutEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMNetworkOutComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMOSDiskReadLatency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_OSDiskreadLatency_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMOSDiskReadLatencyAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMOSDiskReadLatencyWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMOSDiskReadLatencyEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMOSDiskReadLatencyAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMOSDiskReadLatencyAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMOSDiskReadLatencyAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMOSDiskReadLatencyPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMOSDiskReadLatencyAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMOSDiskReadLatencyThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMOSDiskReadLatencyOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMOSDiskReadLatencyTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMOSDiskReadLatencyFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMOSDiskReadLatencyEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMOSDiskReadLatencyComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMOSDiskWriteLatency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_OSDiskwriteLatency_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMOSDiskWriteLatencyAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMOSDiskWriteLatencyWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMOSDiskWriteLatencyEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMOSDiskWriteLatencyAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMOSDiskWriteLatencyAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMOSDiskWriteLatencyAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMOSDiskWriteLatencyPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMOSDiskWriteLatencyAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMOSDiskWriteLatencyThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMOSDiskWriteLatencyOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMOSDiskWriteLatencyTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMOSDiskWriteLatencyFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMOSDiskWriteLatencyEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMOSDiskWriteLatencyComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMOSDiskSpace",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_OSDiskSpace_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMOSDiskSpaceAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMOSDiskSpaceWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMOSDiskSpaceEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMOSDiskSpaceAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMOSDiskSpaceAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMOSDiskSpaceAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMOSDiskSpacePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMOSDiskSpaceAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMOSDiskSpaceThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMOSDiskSpaceOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMOSDiskSpaceTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMOSDiskSpaceFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMOSDiskSpaceEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMOSDiskSpaceComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMPercentCPU",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_CPU_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMPercentCPUAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMPercentCPUWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMPercentCPUEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMPercentCPUAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMPercentCPUAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMPercentCPUAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMPercentCPUPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMPercentCPUAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMPercentCPUThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMPercentCPUOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMPercentCPUTimeAggregation')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMPercentMemory",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_Memory_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMPercentMemoryAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMPercentMemoryWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMPercentMemoryEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMPercentMemoryAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMPercentMemoryAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMPercentMemoryAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMPercentMemoryPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMPercentMemoryAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMPercentMemoryThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMPercentMemoryOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMPercentMemoryTimeAggregation')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMDataDiskSpace",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_dataDiskSpace_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMDataDiskSpaceAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMDataDiskSpaceWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMDataDiskSpaceEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMDataDiskSpaceAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMDataDiskSpaceAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMDataDiskSpaceAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMDataDiskSpacePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMDataDiskSpaceAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMDataDiskSpaceThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMDataDiskSpaceOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMDataDiskSpaceTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMDataDiskSpaceFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMDataDiskSpaceEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMDataDiskSpaceComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMDataDiskReadLatency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_dataDiskReadLatency_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMDataDiskReadLatencyAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMDataDiskReadLatencyWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMDataDiskReadLatencyEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMDataDiskReadLatencyAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMDataDiskReadLatencyAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMDataDiskReadLatencyAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMDataDiskReadLatencyPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMDataDiskReadLatencyAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMDataDiskReadLatencyThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMDataDiskReadLatencyOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMDataDiskReadLatencyTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMDataDiskReadLatencyFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMDataDiskReadLatencyEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMDataDiskReadLatencyComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VMDataDiskWriteLatency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VM_dataDiskWriteLatency_Alert",
            "parameters": {
              "UAMIResourceId": {
                "value": "[[[if(empty(parameters('BYOUserAssignedManagedIdentityResourceId')), concat('/subscriptions/', parameters('ALZManagementSubscriptionId'), '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/Microsoft.ManagedIdentity/userAssignedIdentities/', parameters('ALZUserAssignedManagedIdentityName')),parameters('BYOUserAssignedManagedIdentityResourceId'))]"
              },
              "severity": {
                "value": "[[[parameters('VMDataDiskWriteLatencyAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VMDataDiskWriteLatencyWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VMDataDiskWriteLatencyEvaluationFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VMDataDiskWriteLatencyAutoMitigate')]"
              },
              "autoResolve": {
                "value": "[[[parameters('VMDataDiskWriteLatencyAutoResolve')]"
              },
              "autoResolveTime": {
                "value": "[[[parameters('VMDataDiskWriteLatencyAutoResolveTime')]"
              },
              "effect": {
                "value": "[[[parameters('VMDataDiskWriteLatencyPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VMDataDiskWriteLatencyAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VMDataDiskWriteLatencyThreshold')]"
              },
              "operator": {
                "value": "[[[parameters('VMDataDiskWriteLatencyOperator')]"
              },
              "timeAggregation": {
                "value": "[[[parameters('VMDataDiskWriteLatencyTimeAggregation')]"
              },
              "failingPeriods": {
                "value": "[[[parameters('VMDataDiskWriteLatencyFailingPeriods')]"
              },
              "evaluationPeriods": {
                "value": "[[[parameters('VMDataDiskWriteLatencyEvaluationPeriods')]"
              },
              "computersToInclude": {
                "value": "[[[parameters('VMDataDiskWriteLatencyComputersToInclude')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWTotalTime",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_ApplicationGatewayTotalTime_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWApplicationGatewayTotalTimeAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWApplicationGatewayTotalTimeWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWApplicationGatewayTotalTimeEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWApplicationGatewayTotalTimePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWApplicationGatewayTotalTimeAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWBackendLastByteResponseTime",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_BackendLastByteResponseTime_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWBackendLastByteResponseTimeAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWBackendLastByteResponseTimeWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWBackendLastByteResponseTimeEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWBackendLastByteResponseTimePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWBackendLastByteResponseTimeAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWCapacityUnits",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_CapacityUnits_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWCapacityUnitsAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWCapacityUnitsWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWCapacityUnitsEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWCapacityUnitsPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWCapacityUnitsAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWComputeUnits",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_ComputeUnits_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWComputeUnitsAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWComputeUnitsWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWComputeUnitsEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWComputeUnitsPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWComputeUnitsAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWCPUUtilization",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_CPUUtilization_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWCPUUtilAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWCPUUtilWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWCPUUtilEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWCPUUtilPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWCPUUtilAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWFailedRequests",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_FailedRequests_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWFailedRequestsAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWFailedRequestsWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWFailedRequestsEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWFailedRequestsPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWFailedRequestsAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWResponseStatus",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_ResponseStatus_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWResponseStatusAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWResponseStatusWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWResponseStatusEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWResponseStatusPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWResponseStatusAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AGWUnhealthyHostCount",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AG_UnhealthyHostCount_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AGWUnhealthyHostCountAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AGWUnhealthyHostCountWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AGWUnhealthyHostCountEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AGWUnhealthyHostCountPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AGWUnhealthyHostCountAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBDataPathAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_DataPathAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBDataPathAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBDataPathAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBDataPathAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBDataPathAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBDataPathAvailabilityAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBGlobalBackendAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_GlobalBackendAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBHealthProbeStatus",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_HealthProbeStatus_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBHealthProbeStatusAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBHealthProbeStatusWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBHealthProbeStatusEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBHealthProbeStatusPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBHealthProbeStatusAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBUsedSNATPorts",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_UsedSNATPorts_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBUsedSNATPortsAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBUsedSNATPortsWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBUsedSNATPortsEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBUsedSNATPortsPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBUsedSNATPortsAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_CDNPOriginHealthPercentage",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_FrontDoorCDN_OriginHealthPercentage_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('CDNPOriginHealthPercentageAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('CDNPOriginHealthPercentageWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('CDNPOriginHealthPercentageEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('CDNPOriginHealthPercentagePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('CDNPOriginHealthPercentageAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_CDNPOriginLatency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_FrontDoorCDN_OriginLatency_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('CDNPOriginLatencyAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('CDNPOriginLatencyWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('CDNPOriginLatencyEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('CDNPOriginLatencyPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('CDNPOriginLatencyAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_CDNPPercentage4XX",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_FrontDoorCDN_Percentage4XX_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('CDNPPercentage4XXAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('CDNPPercentage4XXWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('CDNPPercentage4XXEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('CDNPPercentage4XXPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('CDNPPercentage4XXAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_CDNPPercentage5XX",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_FrontDoorCDN_Percentage5XX_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('CDNPPercentage5XXAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('CDNPPercentage5XXWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('CDNPPercentage5XXEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('CDNPPercentage5XXPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('CDNPPercentage5XXAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_TMEndpointHealth",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_TM_EndpointHealth_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('TMEndpointHealthAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('TMEndpointHealthWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('TMEndpointHealthEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('TMEndpointHealthPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('TMEndpointHealthAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_WSFCPUPercentage",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_WSF_CPUPercentage_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('WSFCPUPercentageAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('WSFCPUPercentageWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('WSFCPUPercentageEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('WSFCPUPercentagePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('WSFCPUPercentageAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_WSFMemoryPercentage",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_WSF_MemoryPercentage_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('WSFMemoryPercentageAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('WSFMemoryPercentageWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('WSFMemoryPercentageEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('WSFMemoryPercentagePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('WSFMemoryPercentageAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_WSFDiskQueueLength",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_WSF_DiskQueueLength_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('WSFDiskQueueLengthAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('WSFDiskQueueLengthWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('WSFDiskQueueLengthEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('WSFDiskQueueLengthPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('WSFDiskQueueLengthAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_WSFHttpQueueLength",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_WSF_HttpQueueLength_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('WSFHttpQueueLengthAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('WSFHttpQueueLengthWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('WSFHttpQueueLengthEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('WSFHttpQueueLengthPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('WSFHttpQueueLengthAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_FDBackendHealth",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_FD_BackendHealth_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('FDBackendHealthAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('FDBackendHealthWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('FDBackendHealthEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('FDBackendHealthPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('FDBackendHealthAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_FDBackendRequestLatency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_FD_BackendRequestLatency_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('FDBackendRequestLatencyAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('FDBackendRequestLatencyWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('FDBackendRequestLatencyEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('FDBackendRequestLatencyPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('FDBackendRequestLatencyAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "$fxv#102": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Alerting-Management",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts for Management",
        "description": "Initiative to deploy AMBA alerts relevant to the ALZ Management management group",
        "metadata": {
          "version": "1.1.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorResourceGroupName": {
            "type": "String",
            "defaultValue": "ALZ-Monitoring-RG",
            "metadata": {
              "displayName": "ALZ Monitoring Resource Group Name",
              "description": "Name of the resource group to deploy the ALZ monitoring resources to"
            }
          },
          "ALZMonitorResourceGroupTags": {
            "type": "Object",
            "defaultValue": {
              "_deployed_by_alz_monitor": true
            },
            "metadata": {
              "displayName": "ALZ Monitoring Resource Group Tags",
              "description": "Tags to apply to the resource group"
            }
          },
          "ALZMonitorResourceGroupLocation": {
            "type": "String",
            "defaultValue": "centralus",
            "metadata": {
              "displayName": "ALZ Monitoring Resource Group Location",
              "description": "Location of the resource group"
            }
          },
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisable"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "AATotalJobAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AA Total Job Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AATotalJobAlertWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AA Total Job Alert Window Size",
              "description": "Window size for the alert"
            }
          },
          "AATotalJobAlertEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AA Total Job Alert Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AATotalJobAlertPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AA Total Job Alert Policy Effect",
              "description": "Policy effect for the alert"
            }
          },
          "AATotalJobAlertAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AA Total Job Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AATotalJobAlertThreshold": {
            "type": "string",
            "defaultValue": "20",
            "metadata": {
              "displayName": "AA Total Job Alert Threshold",
              "description": "Threshold for the alert"
            }
          },
          "RVBackupHealthMonitorPolicyEffect": {
            "type": "string",
            "defaultValue": "modify",
            "allowedValues": [
              "modify",
              "audit",
              "disabled"
            ],
            "metadata": {
              "displayName": "RV Backup Health Monitor Policy Effect",
              "description": "Policy effect for the alert, modify will create the alert if it does not exist and enable it on your Recovery Vaults, audit will only audit if alerting is enabled on Recovery Vaults, disabled will not create the alert on Recovery Vaults"
            }
          },
          "StorageAccountAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "StorageAccountAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Alert Window Size",
              "description": "Window size for the alert"
            }
          },
          "StorageAccountAvailabilityFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Alert Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "StorageAccountAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Storage Account Availability Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will create the alert if it does not exist, disabled will not create the alert"
            }
          },
          "StorageAccountAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Storage Account Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "StorageAccountAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "90",
            "metadata": {
              "displayName": "Storage Account Availability Alert Threshold",
              "description": "Threshold for the alert"
            }
          },
          "StorageAccountDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Storage Account Delete Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will create the alert if it does not exist, disabled will not create the alert"
            }
          },
          "StorageAccountDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Storage Account Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityLAWDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity Log Alert Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will create the alert if it does not exist, disabled will not create the alert"
            }
          },
          "activityLAWDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity Log Alert Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityLAWKeyRegenPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LAW Key Regen Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will create the alert if it does not exist, disabled will not create the alert"
            }
          },
          "activityLAWKeyRegenAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity Log Alert Key Regen Alert State",
              "description": "Alert state for the alert"
            }
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_activityLAWDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_LAWorkspace_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityLAWDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityLAWDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityLAWKeyRegen",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_LAWorkspace_KeyRegen",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityLAWKeyRegenPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityLAWKeyRegenAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AATotalJob",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AA_TotalJob_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AATotalJobAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AATotalJobAlertWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AATotalJobAlertEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AATotalJobAlertPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AATotalJobAlertAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('AATotalJobAlertThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_RVBackupHealth",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_RecoveryVault_BackupHealthMonitor_Alert",
            "parameters": {
              "effect": {
                "value": "[[[parameters('RVBackupHealthMonitorPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_StorageAccountAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_StorageAccount_Availability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('StorageAccountAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('StorageAccountAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('StorageAccountAvailabilityFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('StorageAccountAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('StorageAccountAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('StorageAccountAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activitySADelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_StorageAccount_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('StorageAccountDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('StorageAccountDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "$fxv#103": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Alerting-ServiceHealth",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts for Service Health",
        "description": "Initiative to deploy AMBA Service Health alerts to Azure services",
        "metadata": {
          "version": "1.5.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorResourceGroupName": {
            "type": "String",
            "defaultValue": "ALZ-Monitoring-RG",
            "metadata": {
              "displayName": "Resource Group Name",
              "description": "Name of the resource group to deploy the alerts to"
            }
          },
          "ALZMonitorResourceGroupTags": {
            "type": "Object",
            "defaultValue": {
              "_deployed_by_alz_monitor": true
            },
            "metadata": {
              "displayName": "Resource Group Tags",
              "description": "Tags to apply to the resource group"
            }
          },
          "ALZMonitorResourceGroupLocation": {
            "type": "String",
            "defaultValue": "centralus",
            "metadata": {
              "displayName": "Resource Group Location",
              "description": "Location of the resource group"
            }
          },
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisable"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "ResHlthUnhealthyAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Resource Health Unhealthy Alert State",
              "description": "State of the Resource Health Unhealthy alert"
            }
          },
          "ResHlthUnhealthyPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Resource Health Unhealthy Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "SvcHlthAdvisoryAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Service Health Advisory Alert State",
              "description": "State of the Service Health Advisory alert"
            }
          },
          "serviceHealthAdvisoryPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Service Health Advisory Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "SvcHlthIncidentAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Service Health Incident Alert State",
              "description": "State of the Service Health Incident alert"
            }
          },
          "serviceHealthIncidentPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Service Health Incident Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "SvcHlthMaintenanceAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Service Health Maintenance Alert State",
              "description": "State of the Service Health Maintenance alert"
            }
          },
          "serviceHealthMaintenancePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Service Health Maintenance Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "svcHlthSecAdvisoryAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Service Health Security Advisory Alert State",
              "description": "State of the Service Health Security Advisory alert"
            }
          },
          "serviceHealthSecurityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Service Health Security Advisory Alert Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist"
            }
          },
          "ALZMonitorActionGroupEmail": {
            "type": "string",
            "defaultValue": "",
            "metadata": {
              "displayName": "Action Group Email Addresses",
              "description": "Email addresses to send alerts to"
            }
          },
          "ALZLogicappResourceId": {
            "type": "String",
            "defaultValue": "",
            "metadata": {
              "displayName": "Logic App Resource Id",
              "description": "Logic App Resource Id for Action Group to send alerts to"
            }
          },
          "ALZLogicappCallbackUrl": {
            "type": "String",
            "metadata": {
              "displayName": "Logic App Callback URL",
              "description": "Callback URL that triggers the Logic App"
            },
            "defaultValue": ""
          },
          "ALZArmRoleId": {
            "type": "String",
            "defaultValue": "",
            "metadata": {
              "displayName": "Arm Role Id",
              "description": "Arm Built-in Role Id for action group to send alerts to a subscription level, will only send to individual members of role"
            }
          },
          "ALZEventHubResourceId": {
            "type": "String",
            "defaultValue": "",
            "metadata": {
              "displayName": "Event Hub resource id",
              "description": "Event Hub resource id for action group to send alerts to"
            }
          },
          "ALZWebhookServiceUri": {
            "type": "String",
            "metadata": {
              "displayName": "Webhook Service Uri",
              "description": "Indicates the service uri of the webhook to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZFunctionResourceId": {
            "type": "String",
            "metadata": {
              "displayName": "Function Resource Id",
              "description": "Function Resource Id for Action Group to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZFunctionTriggerUrl": {
            "type": "String",
            "metadata": {
              "displayName": "Function Trigger URL",
              "description": "URL that triggers the Function App"
            },
            "defaultValue": ""
          },
          "BYOActionGroup": {
            "type": "String",
            "metadata": {
              "displayName": "Customer defined Action Group Resource ID",
              "description": "The Resource ID of an existing Action Group already deployed by the customer in his environment"
            },
            "defaultValue": ""
          },
          "BYOAlertProcessingRule": {
            "type": "String",
            "metadata": {
              "displayName": "Customer defined Alert Processing Rule Resource ID",
              "description": "The Resource ID of an existing Alert Processing Rule already deployed by the customer in his environment"
            },
            "defaultValue": ""
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_ServiceHealth_ActionGroups",
            "policyDefinitionId": "[[concat('/providers/Microsoft.Management/managementGroups/contoso', '/providers/Microsoft.Authorization/policyDefinitions/Deploy_ServiceHealth_ActionGroups')]",
            "parameters": {
              "ALZMonitorResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "ALZMonitorResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "ALZMonitorResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "ALZMonitorActionGroupEmail": {
                "value": "[[[parameters('ALZMonitorActionGroupEmail')]"
              },
              "ALZLogicappResourceId": {
                "value": "[[[parameters('ALZLogicappResourceId')]"
              },
              "ALZLogicappCallbackUrl": {
                "value": "[[[parameters('ALZLogicappCallbackUrl')]"
              },
              "ALZArmRoleId": {
                "value": "[[[parameters('ALZArmRoleId')]"
              },
              "ALZEventHubResourceId": {
                "value": "[[[parameters('ALZEventHubResourceId')]"
              },
              "ALZWebhookServiceUri": {
                "value": "[[[parameters('ALZWebhookServiceUri')]"
              },
              "ALZFunctionResourceId": {
                "value": "[[[parameters('ALZFunctionResourceId')]"
              },
              "ALZFunctionTriggerUrl": {
                "value": "[[[parameters('ALZFunctionTriggerUrl')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "BYOAlertProcessingRule": {
                "value": "[[[parameters('BYOAlertProcessingRule')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ResHlthUnhealthy",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_ResourceHealth_Unhealthy_Alert",
            "parameters": {
              "enabled": {
                "value": "[[[parameters('ResHlthUnhealthyAlertState')]"
              },
              "effect": {
                "value": "[[[parameters('ResHlthUnhealthyPolicyEffect')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_SvcHlthAdvisory",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_ServiceHealth_HealthAdvisory",
            "parameters": {
              "enabled": {
                "value": "[[[parameters('SvcHlthAdvisoryAlertState')]"
              },
              "effect": {
                "value": "[[[parameters('serviceHealthAdvisoryPolicyEffect')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "ALZMonitorActionGroupEmail": {
                "value": "[[[parameters('ALZMonitorActionGroupEmail')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_SvcHlthIncident",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_ServiceHealth_Incident",
            "parameters": {
              "enabled": {
                "value": "[[[parameters('SvcHlthIncidentAlertState')]"
              },
              "effect": {
                "value": "[[[parameters('serviceHealthIncidentPolicyEffect')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "ALZMonitorActionGroupEmail": {
                "value": "[[[parameters('ALZMonitorActionGroupEmail')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_SvcHlthMaintenance",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_ServiceHealth_Maintenance",
            "parameters": {
              "enabled": {
                "value": "[[[parameters('SvcHlthMaintenanceAlertState')]"
              },
              "effect": {
                "value": "[[[parameters('serviceHealthMaintenancePolicyEffect')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "ALZMonitorActionGroupEmail": {
                "value": "[[[parameters('ALZMonitorActionGroupEmail')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_svcHlthSecAdvisory",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_ServiceHealth_SecurityAdvisory",
            "parameters": {
              "enabled": {
                "value": "[[[parameters('svcHlthSecAdvisoryAlertState')]"
              },
              "effect": {
                "value": "[[[parameters('serviceHealthSecurityPolicyEffect')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "ALZMonitorActionGroupEmail": {
                "value": "[[[parameters('ALZMonitorActionGroupEmail')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "$fxv#104": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Notification-Assets",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts - Notification Assets",
        "description": "Initiative to deploy AMBA Notification Assets",
        "metadata": {
          "version": "1.3.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorResourceGroupName": {
            "type": "String",
            "defaultValue": "ALZ-Monitoring-RG",
            "metadata": {
              "displayName": "Resource Group Name",
              "description": "Name of the resource group to deploy the alerts to"
            }
          },
          "ALZMonitorResourceGroupTags": {
            "type": "Object",
            "defaultValue": {
              "_deployed_by_alz_monitor": true
            },
            "metadata": {
              "displayName": "Resource Group Tags",
              "description": "Tags to apply to the resource group"
            }
          },
          "ALZMonitorResourceGroupLocation": {
            "type": "String",
            "defaultValue": "centralus",
            "metadata": {
              "displayName": "Resource Group Location",
              "description": "Location of the resource group"
            }
          },
          "ALZMonitorActionGroupEmail": {
            "type": "String",
            "metadata": {
              "displayName": "Action Group Email Addresses",
              "description": "Email addresses to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisable"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "ALZLogicappResourceId": {
            "type": "String",
            "metadata": {
              "displayName": "Logic App Resource Id",
              "description": "Logic App Resource Id for Action Group to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZLogicappCallbackUrl": {
            "type": "String",
            "metadata": {
              "displayName": "Logic App Callback URL",
              "description": "Callback URL that triggers the Logic App"
            },
            "defaultValue": ""
          },
          "ALZArmRoleId": {
            "type": "String",
            "metadata": {
              "displayName": "Arm Role Id",
              "description": "Arm Built-in Role Id for action group to send alerts to a subscription level, will only send to individual members of role"
            },
            "defaultValue": ""
          },
          "ALZEventHubResourceId": {
            "type": "String",
            "metadata": {
              "displayName": "Event Hub resource id",
              "description": "Event Hub resource id for action group to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZWebhookServiceUri": {
            "type": "String",
            "metadata": {
              "displayName": "Webhook Service Uri",
              "description": "Indicates the service uri of the webhook to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZFunctionResourceId": {
            "type": "String",
            "metadata": {
              "displayName": "Function Resource Id",
              "description": "Function Resource Id for Action Group to send alerts to"
            },
            "defaultValue": ""
          },
          "ALZFunctionTriggerUrl": {
            "type": "String",
            "metadata": {
              "displayName": "Function Trigger URL",
              "description": "URL that triggers the Function"
            },
            "defaultValue": ""
          },
          "BYOActionGroup": {
            "type": "String",
            "metadata": {
              "displayName": "Customer defined Action Group Resource ID",
              "description": "The Resource ID of an existing Action Group already deployed by the customer in his environment"
            },
            "defaultValue": ""
          },
          "BYOAlertProcessingRule": {
            "type": "String",
            "metadata": {
              "displayName": "Customer defined Alert Processing Rule Resource ID",
              "description": "The Resource ID of an existing Alert Processing Rule already deployed by the customer in his environment"
            },
            "defaultValue": ""
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_AlertProcessing_Rule",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AlertProcessing_Rule",
            "parameters": {
              "ALZMonitorResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "ALZMonitorResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "ALZMonitorResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "ALZMonitorActionGroupEmail": {
                "value": "[[[parameters('ALZMonitorActionGroupEmail')]"
              },
              "ALZLogicappResourceId": {
                "value": "[[[parameters('ALZLogicappResourceId')]"
              },
              "ALZLogicappCallbackUrl": {
                "value": "[[[parameters('ALZLogicappCallbackUrl')]"
              },
              "ALZArmRoleId": {
                "value": "[[[parameters('ALZArmRoleId')]"
              },
              "ALZEventHubResourceId": {
                "value": "[[[parameters('ALZEventHubResourceId')]"
              },
              "ALZWebhookServiceUri": {
                "value": "[[[parameters('ALZWebhookServiceUri')]"
              },
              "ALZFunctionResourceId": {
                "value": "[[[parameters('ALZFunctionResourceId')]"
              },
              "ALZFunctionTriggerUrl": {
                "value": "[[[parameters('ALZFunctionTriggerUrl')]"
              },
              "BYOActionGroup": {
                "value": "[[[parameters('BYOActionGroup')]"
              },
              "BYOAlertProcessingRule": {
                "value": "[[[parameters('BYOAlertProcessingRule')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_Suppression_AlertProcessing_Rule",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_Suppression_AlertProcessing_Rule",
            "parameters": {
              "ALZMonitorResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "ALZMonitorResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "ALZMonitorResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "$fxv#11": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERGw_ExpressRouteBitsOut_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ERG ExpressRoute Bits Out Alert\",\n    \"description\": \"Policy to audit/deploy ER Gateway Connection BitsOutPerSecond Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressroutegateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressroutegateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ERGatewayConnectionBitsOutPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressroutegateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-GatewayERBitsOutAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Gateway Connection BitsOutPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ERGatewayConnectionBitsOutPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/expressroutegateways\",\n                            \"metricName\": \"ERGatewayConnectionBitsOutPerSecond\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#12": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERGw_ExpressRouteCpuUtil_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ERG ExpressRoute CPU Utilization Alert\",\n    \"description\": \"Policy to audit/deploy ER Gateway Express Route CPU Utilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressroutegateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressroutegateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ExpressRouteGatewayCpuUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressroutegateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-GatewayERCPUAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Gateway Express Route CPU Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ExpressRouteGatewayCpuUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/expressroutegateways\",\n                            \"metricName\": \"ExpressRouteGatewayCpuUtilization\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#13": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRouteBitsIn_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute Bits In Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct Connection BitsInPerSecond Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"PortBitsInPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERBitsInAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection BitsInPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"PortBitsInPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"PortBitsInPerSecond\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#14": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRouteBitsOut_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute Bits Out Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct Connection BitsOutPerSecond Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"PortBitsOutPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERBitsOutAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection BitsOutPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"PortBitsOutPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"PortBitsOutPerSecond\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#15": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRoutLineProtocol_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute LineProtocol Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct LineProtocol Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0.9\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"LineProtocol\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERLineProtocolAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection LineProtocolPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"LineProtocol\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"LineProtocol\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#16": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRoutRxLightLevell_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute RxLightLevel High Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct RxLightLevel High Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"RxLightLevel\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERRxLightLevelHighAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection RxLightLevelHigh\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"RxLightLevel\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"RxLightLevel\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#17": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRoutRxLightLevellow_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute RxLightLevel Low Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct RxLightLevel Low Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"-10\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"RxLightLevel\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERRxLightLevelLowAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection RxLightLevelLow\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"RxLightLevel\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"RxLightLevel\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#18": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRoutTxLightLevell_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute TxLightLevel High Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct TxLightLevel High Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TxLightLevel\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERTxLightLevelHighAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection TxLightLevelHigh\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"TxLightLevel\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"TxLightLevel\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#19": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERP_ExpressRoutTxLightLevellow_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ER Direct ExpressRoute TxLightLevel Low Alert\",\n    \"description\": \"Policy to audit/deploy ER Direct TxLightLevel Low Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"-10\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRoutePorts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRoutePorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TxLightLevel\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRoutePorts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DirectERTxLightLevelLowAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ER Direct Connection TxLightLevelLow\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"TxLightLevel\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRoutePorts\",\n                            \"metricName\": \"TxLightLevel\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#2": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_RouteTable_Update\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log Route Table Update Alert\",\n    \"description\": \"Policy to Deploy Activity Log Route Table Update Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/routeTables\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"ActivityUDRUpdate\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.Network/routeTables/routes/write\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityUDRUpdate\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityUDRUpdate\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log Route table update\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.Network/routeTables/routes/write\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#20": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_ExpressRouteBitsPerSecond_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG ExpressRoute Bits Per Second Alert\",\n    \"description\": \"Policy to audit/deploy Virtual Network Gateway Express Route Bits Per Second Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"ExpressRoute\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ExpressRouteGatewayBitsPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-GatewayERBitsAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VNet Gateway Express Route Bits Per Second\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ExpressRouteGatewayBitsPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/virtualNetworkGateways\",\n                            \"metricName\": \"ExpressRouteGatewayBitsPerSecond\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#21": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_ExpressRouteCpuUtil_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG ExpressRoute CPU Utilization Alert\",\n    \"description\": \"Policy to audit/deploy Virtual Network Gateway Express Route CPU Utilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"ExpressRoute\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ExpressRouteGatewayCpuUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-GatewayERCPUAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VNet Gateway Express Route CPU Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ExpressRouteGatewayCpuUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/virtualNetworkGateways\",\n                            \"metricName\": \"ExpressRouteGatewayCpuUtilization\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#22": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PDNSZ_CapacityUtil_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PDNSZ Capacity Utilization Alert\",\n    \"description\": \"Policy to audit/deploy Private DNS Zone Capacity Utilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/privateDnsZones\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/privateDnsZones\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"VirtualNetworkLinkCapacityUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/privateDnsZones/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Maximum\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThanOrEqual\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-CapacityUtilizationAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Private DNS Zone Virtual Network Link Capacity Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"VirtualNetworkLinkCapacityUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/privateDnsZones\",\n                            \"metricName\": \"VirtualNetworkLinkCapacityUtilization\",\n                            \"operator\": \"GreaterThanOrEqual\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Maximum\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#23": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PDNSZ_QueryVolume_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PDNSZ Query Volume Alert\",\n    \"description\": \"Policy to audit/deploy Private DNS Zone Query Volume Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"4\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"500\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/privateDnsZones\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/privateDnsZones\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"QueryVolume\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/privateDnsZones/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Total\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThanOrEqual\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-QueryVolumeAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Private DNS Query Volume\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"QueryVolume\",\n                            \"metricNamespace\": \"Microsoft.Network/privateDnsZones\",\n                            \"metricName\": \"QueryVolume\",\n                            \"operator\": \"GreaterThanOrEqual\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Total\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#24": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PDNSZ_RecordSetCapacity_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PDNSZ Record Set Capacity Alert\",\n    \"description\": \"Policy to audit/deploy Private DNS Zone Record Set Capacity Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/privateDnsZones\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/privateDnsZones\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"RecordSetCapacityUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/privateDnsZones/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Maximum\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThanOrEqual\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-RecordSet_Capacity_Utilization')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Private DNS Zone Record Set Capacity Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"RecordSetCapacityUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/privateDnsZones\",\n                            \"metricName\": \"RecordSetCapacityUtilization\",\n                            \"operator\": \"GreaterThanOrEqual\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Maximum\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#25": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_DNSZ_RegistrationCapacityUtil_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PDNSZ Registration Capacity Utilization Alert\",\n    \"description\": \"Policy to audit/deploy Private DNS Zone Registration Capacity Utilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1H\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/privateDnsZones\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/privateDnsZones\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"VirtualNetworkWithRegistrationCapacityUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/privateDnsZones/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Maximum\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThanOrEqual\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-RequestsAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Private DNS Zone Registration Capacity Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"VirtualNetworkWithRegistrationCapacityUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/privateDnsZones\",\n                            \"metricName\": \"VirtualNetworkWithRegistrationCapacityUtilization\",\n                            \"operator\": \"GreaterThanOrEqual\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Maximum\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#26": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelBandwidth_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Tunnel Bandwidth Alert\",\n    \"description\": \"Policy to audit/deploy Virtual Network Gateway Tunnel Bandwidth Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelAverageBandwidth\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelBandwidthAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VNet Gateway Tunnel Avg Bandwidth\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"TunnelAverageBandwidth\",\n                            \"metricNamespace\": \"Microsoft.Network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelAverageBandwidth\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#27": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelEgress_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Tunnel Egress Alert\",\n    \"description\": \"Policy to audit/deploy Virtual Network Gateway Tunnel Egress Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelEgressBytes\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelEgressAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VNet Gateway Tunnel Egress Bytes\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"TunnelEgressBytes\",\n                            \"metricNamespace\": \"Microsoft.Network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelEgressBytes\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#28": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelEgressPacketDropCount_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Egress Packet Drop Count Alert\",\n    \"description\": \"Policy to audit/deploy Vnet Gateway Egress Packet Drop Count Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelEgressPacketDropCount\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 4\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 4\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelEgressPacketDropCountAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Vnet Gateway tunnel TunnelEgressPacketDropCount\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelEgressPacketDropCount\",\n                            \"metricNamespace\": \"microsoft.network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelEgressPacketDropCount\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#29": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelEgressPacketDropMismatch_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Egress Packet Drop Mismatch Alert\",\n    \"description\": \"Policy to audit/deploy Vnet Gateway Egress Packet Drop Mismatch Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelEgressPacketDropTSMismatch\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 4\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 4\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelEgressPacketDropTSMismatchAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Vnet Gateway tunnel TunnelEgressPacketDropTSMismatch\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelEgressPacketDropTSMismatch\",\n                            \"metricNamespace\": \"microsoft.network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelEgressPacketDropTSMismatch\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#3": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_VPNGateway_Delete\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log VPN Gateway Delete Alert\",\n    \"description\": \"Policy to Deploy Activity Log VPN Gateway Delete Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisable\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/vpnGateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.Network/vpnGateways/delete\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityVPNGatewayDelete\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityVPNGatewayDelete\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log VPN Gateway Delete\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.Network/vpnGateways/delete\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#30": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelIngress_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Tunnel Ingress Alert\",\n    \"description\": \"Policy to audit/deploy Virtual Network Gateway Tunnel Ingress Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelIngressBytes\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelIngressAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VNet Gateway Tunnel ingress Bytes\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"TunnelIngressBytes\",\n                            \"metricNamespace\": \"Microsoft.Network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelIngressBytes\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#31": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelIngressPacketDropCount_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Ingress Packet Drop Count Alert\",\n    \"description\": \"Policy to audit/deploy Vnet Gateway Ingress Packet Drop Count Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelIngressPacketDropCount\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 4\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 4\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelIngressPacketDropCountAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Vnet Gateway tunnel TunnelIngressPacketDropCount\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelIngressPacketDropCount\",\n                            \"metricNamespace\": \"microsoft.network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelIngressPacketDropCount\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#32": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VnetGw_TunnelIngressPacketDropMismatch_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNetG Ingress Packet Drop Mismatch Alert\",\n    \"description\": \"Policy to audit/deploy Vnet Gateway Ingress Packet Drop Mismatch Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/virtualNetworkGateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/virtualNetworkGateways/gatewayType\",\n            \"equals\": \"VPN\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/virtualNetworkGateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelIngressPacketDropTSMismatch\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/virtualNetworkGateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 4\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 4\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelIngressPacketDropTSMismatchAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Vnet Gateway tunnel TunnelIngressPacketDropTSMismatch\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelIngressPacketDropTSMismatch\",\n                            \"metricNamespace\": \"microsoft.network/virtualNetworkGateways\",\n                            \"metricName\": \"TunnelIngressPacketDropTSMismatch\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#33": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_BandwidthUtil_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Bandwidth Utilization Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Bandwidth Utilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"tunnelaveragebandwidth\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-GatewayBandwidthAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway Bandwidth Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"tunnelaveragebandwidth\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"tunnelaveragebandwidth\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#34": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_BGPPeerStatus_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG  BGP Peer Status Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway BGP Peer Status Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"bgppeerstatus\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Total\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-BGPPeerStatusAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway BGP peer status\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"bgppeerstatus\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"bgppeerstatus\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Total\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#35": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_Egress_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Egress Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Egress Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      'MonitorDisableTagName' {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"tunnelegressbytes\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelEgressAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway tunnel egress bytes\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"tunnelegressbytes\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"tunnelegressbytes\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#36": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_TunnelEgressPacketDropCount_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Egress Packet Drop Count Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Egress Packet Drop Count Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisable\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelEgressPacketDropCount\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelEgressPacketDropCountAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway tunnel TunnelEgressPacketDropCount\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelEgressPacketDropCount\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"TunnelEgressPacketDropCount\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#37": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_TunnelEgressPacketDropMismatch_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Egress Packet Drop Mismatch Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Egress Packet Drop Mismatch Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisable\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelEgressPacketDropTSMismatch\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelEgressPacketDropTSMismatchAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway tunnel TunnelEgressPacketDropTSMismatch\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelEgressPacketDropTSMismatch\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"TunnelEgressPacketDropTSMismatch\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#38": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_Ingress_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Ingress Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Ingress Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisable\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"tunnelingressbytes\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelIngressAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway tunnel ingress bytes\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"tunnelingressbytes\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"tunnelingressbytes\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#39": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_TunnelIngressPacketDropCount_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Ingress Packet Drop Count Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Ingress Packet Drop Count Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisable\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelIngressPacketDropCount\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelIngressPacketDropCountAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway tunnel TunnelIngressPacketDropCount\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelIngressPacketDropCount\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"TunnelIngressPacketDropCount\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#4": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AFW_FirewallHealth_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AFW FirewallHealth Alert\",\n    \"description\": \"Policy to audit/deploy Azure Firewall FirewallHealth Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/azureFirewalls\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/azureFirewalls\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"FirewallHealth\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/azureFirewalls/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-FirewallHealth')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for AFW FirewallHealth\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"FirewallHealth\",\n                            \"metricNamespace\": \"Microsoft.Network/azureFirewalls\",\n                            \"metricName\": \"FirewallHealth\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#40": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VPNGw_TunnelIngressPacketDropMismatch_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VPNG Ingress Packet Drop Mismatch Alert\",\n    \"description\": \"Policy to audit/deploy VPN Gateway Ingress Packet Drop Mismatch Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.network/vpngateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.network/vpngateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TunnelIngressPacketDropTSMismatch\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.network/vpngateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TunnelIngressPacketDropTSMismatchAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VPN Gateway tunnel TunnelIngressPacketDropTSMismatch\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"TunnelIngressPacketDropTSMismatch\",\n                            \"metricNamespace\": \"microsoft.network/vpngateways\",\n                            \"metricName\": \"TunnelIngressPacketDropTSMismatch\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#41": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_ApplicationGatewayTotalTime_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW ApplicationGatewayTotalTime Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway ApplicationGatewayTotalTime Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"alertSensitivity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert Sensitivity\",\n          \"description\": \"Alert Sensitivity for the alert\"\n        },\n        \"allowedValues\": [\n          \"Low\",\n          \"Medium\",\n          \"High\"\n        ],\n        \"defaultValue\": \"Medium\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/applicationgateways/sku.name\",\n            \"In\": [\n              \"Standard_v2\",\n              \"WAF_v2\"\n            ]\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ApplicationGatewayTotalTime\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"alertSensitivity\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agApplicationGatewayTotalTime')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway ApplicationGatewayTotalTime\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ApplicationGatewayTotalTime\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"ApplicationGatewayTotalTime\",\n                            \"operator\": \"GreaterThan\",\n                            \"alertSensitivity\": \"[[parameters('alertSensitivity')]\",\n                            \"failingPeriods\": {\n                              \"minFailingPeriodsToAlert\": 2,\n                              \"numberOfEvaluationPeriods\": 2\n                            },\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"alertSensitivity\": {\n                          \"value\": \"[[parameters('alertSensitivity')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"alertSensitivity\": {\n                  \"value\": \"[[parameters('alertSensitivity')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#42": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_BackendLastByteResponseTime_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW BackendLastByteResponseTime Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway BackendLastByteResponseTime Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"alertSensitivity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert Sensitivity\",\n          \"description\": \"Alert Sensitivity for the alert\"\n        },\n        \"allowedValues\": [\n          \"Low\",\n          \"Medium\",\n          \"High\"\n        ],\n        \"defaultValue\": \"Medium\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/applicationgateways/sku.name\",\n            \"In\": [\n              \"Standard_v2\",\n              \"WAF_v2\"\n            ]\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"BackendLastByteResponseTime\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"alertSensitivity\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agBackendLastByteResponseTime')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway BackendLastByteResponseTime\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"BackendLastByteResponseTime\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"BackendLastByteResponseTime\",\n                            \"operator\": \"GreaterThan\",\n                            \"alertSensitivity\": \"[[parameters('alertSensitivity')]\",\n                            \"failingPeriods\": {\n                              \"minFailingPeriodsToAlert\": 2,\n                              \"numberOfEvaluationPeriods\": 2\n                            },\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"alertSensitivity\": {\n                          \"value\": \"[[parameters('alertSensitivity')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"alertSensitivity\": {\n                  \"value\": \"[[parameters('alertSensitivity')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#43": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_CapacityUnits_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW Capacity Units Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway CapacityUnits Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"75\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/applicationgateways/sku.name\",\n            \"In\": [\n              \"Standard_v2\",\n              \"WAF_v2\"\n            ]\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"CapacityUnits\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agCapacityUnits')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway Capacity Units\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"CapacityUnits\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"CapacityUnits\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#44": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_ComputeUnits_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW Compute Units Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway ComputeUnits Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"75\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/applicationgateways/sku.name\",\n            \"In\": [\n              \"Standard_v2\",\n              \"WAF_v2\"\n            ]\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ComputeUnits\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agComputeUnits')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway Compute Units\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ComputeUnits\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"ComputeUnits\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#45": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_CPUUtilization_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW CPU Utilization Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway CPU Utilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"Microsoft.Network/applicationgateways/sku.name\",\n            \"notIn\": [\n              \"Standard_v2\",\n              \"WAF_v2\"\n            ]\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"CpuUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agCpuUtilization')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway CPU Utilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"CpuUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"CpuUtilization\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#46": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_FailedRequests_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW FailedRequests Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway FailedRequests Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"FailedRequests\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Total\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agFailedRequests')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway FailedRequests\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"FailedRequests\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"FailedRequests\",\n                            \"operator\": \"GreaterThan\",\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"minFailingPeriodsToAlert\": 2,\n                              \"numberOfEvaluationPeriods\": 2\n                            },\n                            \"timeAggregation\": \"Total\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#47": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_ResponseStatus_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW ResponseStatus Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway ResponseStatus Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"alertSensitivity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert Sensitivity\",\n          \"description\": \"Alert Sensitivity for the alert\"\n        },\n        \"allowedValues\": [\n          \"Low\",\n          \"Medium\",\n          \"High\"\n        ],\n        \"defaultValue\": \"Medium\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ResponseStatus\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/applicationgateways/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Total\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"alertSensitivity\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agResponseStatus')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway ResponseStatus\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ResponseStatus\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"ResponseStatus\",\n                            \"operator\": \"GreaterThan\",\n                            \"alertSensitivity\": \"[[parameters('alertSensitivity')]\",\n                            \"failingPeriods\": {\n                              \"minFailingPeriodsToAlert\": 2,\n                              \"numberOfEvaluationPeriods\": 2\n                            },\n                            \"timeAggregation\": \"Total\",\n                            \"dimensions\": [\n                              {\n                                \"name\": \"HttpStatusGroup\",\n                                \"operator\": \"Include\",\n                                \"values\": [\n                                  \"4xx\",\n                                  \"5xx\"\n                                ]\n                              }\n                            ],\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"alertSensitivity\": {\n                          \"value\": \"[[parameters('alertSensitivity')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"alertSensitivity\": {\n                  \"value\": \"[[parameters('alertSensitivity')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#48": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AG_UnhealthyHostCount_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AGW Unhealthy Host Count Alert\",\n    \"description\": \"Policy to audit/deploy Azure Application Gateway Unhealthy Host Count Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"20\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/applicationgateways\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/applicationgateways\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"UnhealthyHostCount\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/loadBalancers/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-agUnhealthyHostCount')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Gateway Unhealthy Host Count\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"CpuUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/applicationgateways\",\n                            \"metricName\": \"UnhealthyHostCount\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#49": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_WSF_CPUPercentage_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy App Service Plan CPU Percentage Alert\",\n    \"description\": \"Policy to audit/deploy App Service Plan CPU Percentage  Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Web Services\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Web/serverfarms\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Web/serverfarms\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"CpuPercentage\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Web/serverfarms/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-CpuPercentage')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Service Plan CPU Percentage\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"CpuPercentage\",\n                            \"metricNamespace\": \"Microsoft.Web/serverfarms\",\n                            \"metricName\": \"CpuPercentage\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#5": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AFW_SNATPortUtilization_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AFW SNATPortUtilization Alert\",\n    \"description\": \"Policy to audit/deploy Azure Firewall SNATPortUtilization Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"80\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/azureFirewalls\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/azureFirewalls\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"SNATPortUtilization\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/azureFirewalls/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-SNATPortUtilization')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for AFW SNATPortUtilization\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"SNATPortUtilization\",\n                            \"metricNamespace\": \"Microsoft.Network/azureFirewalls\",\n                            \"metricName\": \"SNATPortUtilization\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#50": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_WSF_DiskQueueLength_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy App Service Plan Disk Queue Length Alert\",\n    \"description\": \"Policy to audit/deploy App Service Plan Disk Queue Length Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Web Services\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Web/serverfarms\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Web/serverfarms\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"DiskQueueLength\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Web/serverfarms/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DiskQueueLengthAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Service Plan Disk Queue Length\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 2,\n                              \"minFailingPeriodsToAlert\": 2\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"Microsoft.Web/serverfarms\",\n                            \"metricName\": \"DiskQueueLength\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#51": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_WSF_HttpQueueLength_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy App Service Plan Http Queue Length Alert\",\n    \"description\": \"Policy to audit/deploy App Service Plan Http Queue Length Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Web Services\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Web/serverfarms\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Web/serverfarms\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"HttpQueueLength\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Web/serverfarms/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-HttpQueueLengthAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Service Plan Http Queue Length\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 2,\n                              \"minFailingPeriodsToAlert\": 2\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"Microsoft.Web/serverfarms\",\n                            \"metricName\": \"HttpQueueLength\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#52": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_WSF_MemoryPercentage_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy App Service Plan Memory Percentage Alert\",\n    \"description\": \"Policy to audit/deploy App Service Plan Memory Percentage  Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Web Services\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"85\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Web/serverfarms\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Web/serverfarms\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"MemoryPercentage\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Web/serverfarms/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-MemoryPercentage')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for App Service Plan Memory Percentage\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"MemoryPercentage\",\n                            \"metricNamespace\": \"Microsoft.Web/serverfarms\",\n                            \"metricName\": \"MemoryPercentage\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#53": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_FrontDoorCDN_OriginHealthPercentage_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy FrontDoor CDN Profile Origin Health Percentage Alert\",\n    \"description\": \"Policy to audit/deploy FrontDoor Origin Health Percentage Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Cdn/profiles\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Cdn/profiles\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"OriginHealthPercentage\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Cdn/profiles/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-OriginHealthPercentage')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Frontdoor Origin Health Percentage\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"OriginHealthPercentage\",\n                            \"metricNamespace\": \"Microsoft.Cdn/profiles\",\n                            \"metricName\": \"OriginHealthPercentage\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#54": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_FrontDoorCDN_OriginLatency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy FrontDoor CDN Profile Origin Latency Alert\",\n    \"description\": \"Policy to audit/deploy FrontDoor CDN Profile Origin Latency Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Cdn/profiles\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Cdn/profiles\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"OriginLatency\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Cdn/profiles/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-OriginLatencyAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Frontdoor CDN Origin Latency\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 2,\n                              \"minFailingPeriodsToAlert\": 2\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"Microsoft.Cdn/profiles\",\n                            \"metricName\": \"OriginLatency\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#55": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_FrontDoorCDN_Percentage4XX_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy FrontDoor CDN Profile Percentage4XX Alert\",\n    \"description\": \"Policy to audit/deploy FrontDoor CDN Profile Percentage4XX Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Cdn/profiles\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Cdn/profiles\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"Percentage4XX\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Cdn/profiles/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-Percentage4XXAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Frontdoor CDN Origin Latency\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 2,\n                              \"minFailingPeriodsToAlert\": 2\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"Microsoft.Cdn/profiles\",\n                            \"metricName\": \"Percentage4XX\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#56": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_FrontDoorCDN_Percentage5XX_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy FrontDoor CDN Profile Percentage5XX Alert\",\n    \"description\": \"Policy to audit/deploy FrontDoor CDN Profile Percentage5XX Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Cdn/profiles\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Cdn/profiles\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"Percentage5XX\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Cdn/profiles/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-Percentage5XXAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Frontdoor CDN Origin Latency\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 2,\n                              \"minFailingPeriodsToAlert\": 2\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"Microsoft.Cdn/profiles\",\n                            \"metricName\": \"Percentage5XX\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#57": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_dataDiskReadLatency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM Data Disk Read Latency Alert\",\n    \"description\": \"Policy to audit/deploy VM dataDiskReadLatency Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"30\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Computers to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMHighdataDiskReadLatencyAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"ReadLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk !in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMdataDiskReadLatencyAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMHighdataDiskReadLatencyAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMHighdataDiskReadLatencyAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine dataDiskReadLatency\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"ReadLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk !in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"Disk\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#58": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_dataDiskSpace_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM Data Disk Space Alert\",\n    \"description\": \"Policy to audit/deploy VM data Disk Space Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"LessThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"10\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Computers to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMLowdataDiskSpaceAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes)| where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"FreeSpacePercentage\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk !in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMdataDiskSpaceAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMLowdataDiskSpaceAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMLowdataDiskSpaceAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine dataDiskSpace\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes)| where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"FreeSpacePercentage\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk !in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"Disk\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#59": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_dataDiskWriteLatency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM Data Disk Write Latency Alert\",\n    \"description\": \"Policy to audit/deploy VM dataDiskWriteLatency Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"30\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Computers to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMHighdataDiskWriteLatencyAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"WriteLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk !in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMdataDiskWriteLatencyAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMHighdataDiskWriteLatencyAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMHighdataDiskWriteLatencyAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine dataDiskWriteLatency\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"WriteLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk !in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"Disk\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#6": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERCIR_ArpAvailability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ExpressRoute Circuits Arp Availability Alert\",\n    \"description\": \"Policy to audit/deploy ExpressRoute Circuits Arp Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ArpAvailability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRouteCircuits/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-ArpAvailability')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ExpressRoute Circuit Arp Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ArpAvailability\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRouteCircuits\",\n                            \"metricName\": \"ArpAvailability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#60": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_HeartBeat_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM HeartBeat Alert\",\n    \"description\": \"Policy to audit/deploy VM HeartBeat Alert for all VMs in the subscription\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"10\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Computers to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMHeartBeatAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); Heartbeat | where _ResourceId has \\\"Microsoft.HybridCompute/machines\\\" | where _ResourceId !in~ (excludedResources) | summarize TimeGenerated=max(TimeGenerated) by Computer, _ResourceId | extend Duration = datetime_diff(\\\"minute\\\",now(),TimeGenerated) | summarize AggregatedValue = min(Duration) by Computer, bin(TimeGenerated,5m), _ResourceId', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"HeartBeatAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMHeartBeatAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMHeartBeatAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine Heartbeat\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); Heartbeat | where _ResourceId has \\\"Microsoft.HybridCompute/machines\\\" | where _ResourceId !in~ (excludedResources) | summarize TimeGenerated=max(TimeGenerated) by Computer, _ResourceId | extend Duration = datetime_diff(\\\"minute\\\",now(),TimeGenerated) | summarize AggregatedValue = min(Duration) by Computer, bin(TimeGenerated,5m), _ResourceId', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#61": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_NetworkIn_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM Network Read Alert\",\n    \"description\": \"Policy to audit/deploy VM Network Read Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"10000000\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Computers to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMHighNetworkInAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Network\\\" and Name == \\\"ReadBytesPerSecond\\\" | extend NetworkInterface=tostring(todynamic(Tags)[\\\"vm.azm.ms/networkDeviceId\\\"]) | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, NetworkInterface', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMNetworkInAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMHighNetworkInAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMHighNetworkInAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine NetworkIn\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Network\\\" and Name == \\\"ReadBytesPerSecond\\\" | extend NetworkInterface=tostring(todynamic(Tags)[\\\"vm.azm.ms/networkDeviceId\\\"]) | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, NetworkInterface', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"NetworkInterface\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#62": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_NetworkOut_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM Network Write Alert\",\n    \"description\": \"Policy to audit/deploy VM Network Out Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"10000000\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Computers to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMHighNetworkOutAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Network\\\" and Name == \\\"WriteBytesPerSecond\\\" | extend NetworkInterface=tostring(todynamic(Tags)[\\\"vm.azm.ms/networkDeviceId\\\"]) | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, NetworkInterface', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMNetworkOutAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMHighNetworkOutAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMHighNetworkOutAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine NetworkOut\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Network\\\" and Name == \\\"WriteBytesPerSecond\\\" | extend NetworkInterface=tostring(todynamic(Tags)[\\\"vm.azm.ms/networkDeviceId\\\"]) | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, NetworkInterface', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"NetworkInterface\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#63": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_OSDiskreadLatency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM OS Disk Read Latency Alert\",\n    \"description\": \"Policy to audit/deploy VM OSDiskreadLatency Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"30\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Disks to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMLowOSDiskreadLatencyAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"ReadLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMOSDiskreadLatencyAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMLowOSDiskreadLatencyAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMLowOSDiskreadLatencyAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine OSDiskreadLatency\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"ReadLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"Disk\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#64": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_OSDiskSpace_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM OS Disk Space Alert\",\n    \"description\": \"Policy to audit/deploy VM OSDiskSpace Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"LessThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"10\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Disks to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMLowOSDiskSpaceAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"FreeSpacePercentage\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMOSDiskSpaceAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMLowOSDiskSpaceAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMLowOSDiskSpaceAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine OSDiskSpace\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"FreeSpacePercentage\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"Disk\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#65": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_OSDiskwriteLatency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM OS Disk Write Latency Alert\",\n    \"description\": \"Policy to audit/deploy VM OSDiskwriteLatency Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"50\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"computersToInclude\": {\n        \"type\": \"array\",\n        \"metadata\": {\n          \"displayName\": \"Disks to be included to be monitored\",\n          \"description\": \"Array of Computer to be monitored\"\n        },\n        \"defaultValue\": [\n          \"*\"\n        ]\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMLowOSDiskwriteLatencyAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"WriteLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"computersToInclude\": {\n                    \"type\": \"array\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMOSDiskwriteLatencyAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMLowOSDiskwriteLatencyAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMLowOSDiskwriteLatencyAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine OSDiskwriteLatency\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"LogicalDisk\\\" and Name == \\\"WriteLatencyMs\\\" | extend Disk=tostring(todynamic(Tags)[\\\"vm.azm.ms/mountId\\\"]) | where Disk in (\\\"C:\\\",\\\"/\\\") | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId, Disk', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": \"[[parameters('computersToInclude')]\"\n                                      },\n                                      {\n                                        \"name\": \"Disk\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"computersToInclude\": {\n                                  \"value\": \"[[parameters('computersToInclude')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"computersToInclude\": {\n                  \"value\": \"[[parameters('computersToInclude')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#66": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_CPU_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM CPU Alert\",\n    \"description\": \"Policy to audit/deploy VM CPU Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"GreaterThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"85\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMHighCPUAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"1\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Processor\\\" and Name == \\\"UtilizationPercentage\\\" | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMCPUAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMHighCPUAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMHighCPUAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine CPU\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Processor\\\" and Name == \\\"UtilizationPercentage\\\" | summarize AggregatedValue = avg(Val) by bin(TimeGenerated, 15m), Computer, _ResourceId', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"1\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#67": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VM_Memory_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VM Memory Alert\",\n    \"description\": \"Policy to audit/deploy VM Memory Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Compute\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"UAMIResourceId\": {\n        \"type\": \"string\",\n        \"defaultValue\": \"\",\n        \"metadata\": {\n          \"description\": \"The resource Id of the user assigned managed identity.\",\n          \"displayName\": \"User Assigned managed Identity resource Id.\"\n        }\n      },\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"operator\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Operator\"\n        },\n        \"allowedValues\": [\n          \"Equals\",\n          \"GreaterThan\",\n          \"GreaterThanOrEqual\",\n          \"LessThan\",\n          \"LessThanOrEqual\"\n        ],\n        \"defaultValue\": \"LessThan\"\n      },\n      \"timeAggregation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"TimeAggregation\"\n        },\n        \"allowedValues\": [\n          \"Average\",\n          \"Count\",\n          \"Maximum\",\n          \"Minimum\",\n          \"Total\"\n        ],\n        \"defaultValue\": \"Average\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"PT24H\"\n        ],\n        \"defaultValue\": \"PT15M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolve\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"autoResolveTime\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Resolve\",\n          \"description\": \"Auto Resolve time for the alert in ISO 8601 format\"\n        },\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"10\"\n      },\n      \"failingPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Failing Periods\",\n          \"description\": \"Number of failing periods before alert is fired\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"evaluationPeriods\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Periods\",\n          \"description\": \"The number of aggregated lookback points.\"\n        },\n        \"defaultValue\": \"1\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Compute/virtualMachines\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/displayName\",\n                \"equals\": \"[[concat(subscription().displayName, '-VMLowMemoryAlert')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/scopes[*]\",\n                \"equals\": \"[[subscription().id]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].operator\",\n                \"equals\": \"[[parameters('operator')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].timeAggregation\",\n                \"equals\": \"[[parameters('timeAggregation')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": \"[[parameters('evaluationPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": \"[[parameters('failingPeriods')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/scheduledQueryRules/criteria.allOf[*].query\",\n                \"equals\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Memory\\\" and Name == \\\"AvailableMB\\\" | extend TotalMemory = toreal(todynamic(Tags)[\\\"vm.azm.ms/memorySizeMB\\\"]) | extend AvailableMemoryPercentage = (toreal(Val) / TotalMemory) * 100.0 | summarize AggregatedValue = avg(AvailableMemoryPercentage) by bin(TimeGenerated, 15m), Computer, _ResourceId', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\"\n              },\n              {\n                \"field\": \"identity.userAssignedIdentities\",\n                \"equals\": \"[[parameters('UAMIResourceId')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"UAMIResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolve\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoResolveTime\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  },\n                  \"operator\": {\n                    \"type\": \"String\"\n                  },\n                  \"timeAggregation\": {\n                    \"type\": \"String\"\n                  },\n                  \"failingPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationPeriods\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagName\": {\n                    \"type\": \"String\"\n                  },\n                  \"MonitorDisableTagValues\": {\n                    \"type\": \"Array\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"VMMemoryAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupLocation\": {\n                            \"type\": \"string\"\n                          },\n                          \"UAMIResourceId\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.Insights/scheduledQueryRules\",\n                            \"apiVersion\": \"2022-08-01-preview\",\n                            \"name\": \"[[concat(subscription().displayName, '-VMLowMemoryAlert')]\",\n                            \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                            \"identity\": {\n                              \"type\": \"UserAssigned\",\n                              \"userAssignedIdentities\": {\n                                \"[[parameters('UAMIResourceId')]\": {}\n                              }\n                            },\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"displayName\": \"[[concat(subscription().displayName, '-VMLowMemoryAlert')]\",\n                              \"description\": \"Log Alert for Virtual Machine Memory\",\n                              \"severity\": \"[[parameters('severity')]\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"targetResourceTypes\": [\n                                \"Microsoft.Compute/virtualMachines\"\n                              ],\n                              \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                              \"windowSize\": \"[[parameters('windowSize')]\",\n                              \"criteria\": {\n                                \"allOf\": [\n                                  {\n                                    \"query\": \"[[format('let excludedResources = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | project _ResourceId = id, tags | where parse_json(tostring(tags.{0})) in~ (\\\"{1}\\\")); let excludedVMSSNodes = (arg(\\\"\\\").resources | where type =~ \\\"Microsoft.Compute/virtualMachines\\\" | extend isVMSS = isnotempty(properties.virtualMachineScaleSet) | where isVMSS | project id, name); InsightsMetrics | where _ResourceId has \\\"Microsoft.Compute/virtualMachines\\\" | where _ResourceId !in~ (excludedResources) | where _ResourceId !in~ (excludedVMSSNodes) | where Origin == \\\"vm.azm.ms\\\" | where Namespace == \\\"Memory\\\" and Name == \\\"AvailableMB\\\" | extend TotalMemory = toreal(todynamic(Tags)[\\\"vm.azm.ms/memorySizeMB\\\"]) | extend AvailableMemoryPercentage = (toreal(Val) / TotalMemory) * 100.0 | summarize AggregatedValue = avg(AvailableMemoryPercentage) by bin(TimeGenerated, 15m), Computer, _ResourceId', parameters('MonitorDisableTagName'), join(parameters('MonitorDisableTagValues'), '\\\",\\\"'))]\",\n                                    \"metricMeasureColumn\": \"AggregatedValue\",\n                                    \"threshold\": \"[[parameters('threshold')]\",\n                                    \"operator\": \"[[parameters('operator')]\",\n                                    \"resourceIdColumn\": \"_ResourceId\",\n                                    \"timeAggregation\": \"[[parameters('timeAggregation')]\",\n                                    \"dimensions\": [\n                                      {\n                                        \"name\": \"Computer\",\n                                        \"operator\": \"Include\",\n                                        \"values\": [\n                                          \"*\"\n                                        ]\n                                      }\n                                    ],\n                                    \"failingPeriods\": {\n                                      \"numberOfEvaluationPeriods\": \"[[parameters('evaluationPeriods')]\",\n                                      \"minFailingPeriodsToAlert\": \"[[parameters('failingPeriods')]\"\n                                    }\n                                  }\n                                ]\n                              },\n                              \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                              \"ruleResolveConfiguration\": {\n                                \"autoResolved\": \"[[parameters('autoResolve')]\",\n                                \"timeToResolve\": \"[[parameters('autoResolveTime')]\"\n                              },\n                              \"parameters\": {\n                                \"alertResourceGroupName\": {\n                                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                                },\n                                \"alertResourceGroupLocation\": {\n                                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                                },\n                                \"UAMIResourceId\": {\n                                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                                },\n                                \"severity\": {\n                                  \"value\": \"[[parameters('severity')]\"\n                                },\n                                \"windowSize\": {\n                                  \"value\": \"[[parameters('windowSize')]\"\n                                },\n                                \"evaluationFrequency\": {\n                                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                                },\n                                \"autoMitigate\": {\n                                  \"value\": \"[[parameters('autoMitigate')]\"\n                                },\n                                \"autoResolve\": {\n                                  \"value\": \"[[parameters('autoResolve')]\"\n                                },\n                                \"autoResolveTime\": {\n                                  \"value\": \"[[parameters('autoResolveTime')]\"\n                                },\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                },\n                                \"threshold\": {\n                                  \"value\": \"[[parameters('threshold')]\"\n                                },\n                                \"failingPeriods\": {\n                                  \"value\": \"[[parameters('failingPeriods')]\"\n                                },\n                                \"evaluationPeriods\": {\n                                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                                },\n                                \"MonitorDisableTagName\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                                },\n                                \"MonitorDisableTagValues\": {\n                                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"alertResourceGroupLocation\": {\n                          \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                        },\n                        \"UAMIResourceId\": {\n                          \"value\": \"[[parameters('UAMIResourceId')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"UAMIResourceId\": {\n                  \"value\": \"[[parameters('UAMIResourceId')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"autoResolve\": {\n                  \"value\": \"[[parameters('autoResolve')]\"\n                },\n                \"autoResolveTime\": {\n                  \"value\": \"[[parameters('autoResolveTime')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                },\n                \"operator\": {\n                  \"value\": \"[[parameters('operator')]\"\n                },\n                \"timeAggregation\": {\n                  \"value\": \"[[parameters('timeAggregation')]\"\n                },\n                \"failingPeriods\": {\n                  \"value\": \"[[parameters('failingPeriods')]\"\n                },\n                \"evaluationPeriods\": {\n                  \"value\": \"[[parameters('evaluationPeriods')]\"\n                },\n                \"MonitorDisableTagName\": {\n                  \"value\": \"[[parameters('MonitorDisableTagName')]\"\n                },\n                \"MonitorDisableTagValues\": {\n                  \"value\": \"[[parameters('MonitorDisableTagValues')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#68": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_TM_EndpointHealth_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Traffic Manager Endpoint Health Alert\",\n    \"description\": \"Policy to audit/deploy FTraffic Manager Endpoint Health Health Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0.9\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/trafficmanagerprofiles\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/trafficmanagerprofiles\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ProbeAgentCurrentEndpointStateByProfileResourceId\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/trafficmanagerprofiles/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-EndpointHealthAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Traffic Manager Endpoint Health\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"EndpointHealth\",\n                            \"metricNamespace\": \"Microsoft.Network/trafficmanagerprofiles\",\n                            \"metricName\": \"ProbeAgentCurrentEndpointStateByProfileResourceId\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\",\n                            \"dimensions\": [\n                              {\n                                \"name\": \"EndpointName\",\n                                \"operator\": \"Include\",\n                                \"values\": [\n                                  \"*\"\n                                ]\n                              }\n                            ]\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#69": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_FD_BackendHealth_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Frontdoor Backend Health Percentage Alert\",\n    \"description\": \"Policy to audit/deploy FrontDoor Backend Health Percentage  Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.1\",\n      \"category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/frontdoors\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/frontdoors\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"BackendHealthPercentage\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/frontdoors/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-BackendHealthPercentage')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Frontdoor Backend Health Percentage\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"BackendHealthPercentage\",\n                            \"metricNamespace\": \"Microsoft.Network/frontdoors\",\n                            \"metricName\": \"BackendHealthPercentage\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#7": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERCIR_BgpAvailability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ExpressRoute Circuits Bgp Availability Alert\",\n    \"description\": \"Policy to audit/deploy ExpressRoute Circuits Bgp Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"BgpAvailability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRouteCircuits/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-BgpAvailability')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ExpressRoute Circuit Bgp Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"BgpAvailability\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRouteCircuits\",\n                            \"metricName\": \"BgpAvailability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#70": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_FD_BackendRequestLatency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Frontdoor Backend Request Latency Alert\",\n    \"description\": \"Policy to audit/deploy Frontdoor Backend Request Latency Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/frontdoors\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/frontdoors\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"BackendRequestLatency\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/frontdoors/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-BackendRequestLatencyAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Frontdoor BackendRequestLatency\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 2,\n                              \"minFailingPeriodsToAlert\": 2\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"Microsoft.Network/frontdoors\",\n                            \"metricName\": \"BackendRequestLatency\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#71": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_KeyVault_Availability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Key Vault Availability Alert\",\n    \"description\": \"Policy to audit/deploy KeyVault Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Key Vault\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.keyvault/vaults\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.keyvault/vaults\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"Availability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.keyvault/vaults/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-Availability')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for KeyVault Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"Availability\",\n                            \"metricNamespace\": \"microsoft.keyvault/vaults\",\n                            \"metricName\": \"Availability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#72": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_KeyVault_Capacity_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Key Vault Capacity Alert\",\n    \"description\": \"Policy to audit/deploy KeyVault Capacity Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Key Vault\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"75\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.keyvault/vaults\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.keyvault/vaults\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"SaturationShoebox\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.keyvault/vaults/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-CapacityAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for KeyVault Capacity\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"SaturationShoebox\",\n                            \"metricNamespace\": \"microsoft.keyvault/vaults\",\n                            \"metricName\": \"SaturationShoebox\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#73": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_KeyVault_Latency_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Key Vault Latency Alert\",\n    \"description\": \"Policy to audit/deploy KeyVault Latency Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Key Vault\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"3\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"1000\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.keyvault/vaults\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.keyvault/vaults\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ServiceApiLatency\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.keyvault/vaults/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-LatencyAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for KeyVault Latency\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ServiceApiLatency\",\n                            \"metricNamespace\": \"microsoft.keyvault/vaults\",\n                            \"metricName\": \"ServiceApiLatency\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#74": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_KeyVault_Requests_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Key Vault Requests Alert\",\n    \"description\": \"Policy to audit/deploy KeyVault Requests Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Key Vault\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.keyvault/vaults\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"microsoft.keyvault/vaults\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ServiceApiResult\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/microsoft.keyvault/vaults/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 4\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 4\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-RequestsAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for KeyVault Requests\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"ServiceApiResult\",\n                            \"metricNamespace\": \"microsoft.keyvault/vaults\",\n                            \"metricName\": \"ServiceApiResult\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#75": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_KeyVault_Delete\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log Key Vault Delete Alert\",\n    \"description\": \"Policy to Deploy Activity Log Key Vault Delete Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Key Vault\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"microsoft.keyvault/vaults\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"ActivityKeyVaultDelete\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.KeyVault/vaults/delete\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityKeyVaultDelete\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityKeyVaultDelete\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log Key Vault Delete\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.KeyVault/vaults/delete\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#76": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ALB_DataPathAvailability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ALB Data Path Availability Alert\",\n    \"description\": \"Policy to audit/deploy Azure Load Balancer Data Path Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/loadBalancers\"\n          },\n          {\n            \"field\": \"Microsoft.Network/loadBalancers/sku.name\",\n            \"in\": [\n              \"Standard\",\n              \"Gateway\"\n            ]\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/loadBalancers\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"VipAvailability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/loadBalancers/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-ALBDataPathAvailability')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ALB Data Path Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"VipAvailability\",\n                            \"metricNamespace\": \"Microsoft.Network/loadBalancers\",\n                            \"metricName\": \"VipAvailability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#77": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ALB_GlobalBackendAvailability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ALB Global Backend Availability Alert\",\n    \"description\": \"Policy to audit/deploy Azure Load Balancer Global Backend Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"0\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/loadBalancers\"\n          },\n          {\n            \"field\": \"Microsoft.Network/loadBalancers/sku.tier\",\n            \"equals\": \"Global\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/loadBalancers\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"GlobalBackendAvailability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/loadBalancers/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-ALBGlobalBackendAvailability')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Global Backend Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"GlobalBackendAvailability\",\n                            \"metricNamespace\": \"Microsoft.Network/loadBalancers\",\n                            \"metricName\": \"GlobalBackendAvailability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#78": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ALB_HealthProbeStatus_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ALB Health Probe Status Alert\",\n    \"description\": \"Policy to audit/deploy Azure Load Balancer Health Probe Status Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/loadBalancers\"\n          },\n          {\n            \"field\": \"Microsoft.Network/loadBalancers/sku.name\",\n            \"in\": [\n              \"Standard\",\n              \"Gateway\"\n            ]\n          },\n          {\n            \"field\": \"Microsoft.Network/loadBalancers/sku.tier\",\n            \"equals\": \"Regional\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/loadBalancers\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"DipAvailability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/loadBalancers/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-ALBHealthProbeStatus')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ALB Health Probe Status\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"DipAvailability\",\n                            \"metricNamespace\": \"Microsoft.Network/loadBalancers\",\n                            \"metricName\": \"DipAvailability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#79": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ALB_UsedSNATPorts_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ALB Used SNAT Ports Alert\",\n    \"description\": \"Policy to audit/deploy Azure Load Balancer Used SNAT Ports Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"Category\": \"Networking\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"900\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/loadBalancers\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/loadBalancers\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"UsedSNATPorts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/loadBalancers/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-ALBUsedSNATPorts')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ALB Used SNAT Ports\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"UsedSNATPorts\",\n                            \"metricNamespace\": \"Microsoft.Network/loadBalancers\",\n                            \"metricName\": \"UsedSNATPorts\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#8": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERCIR_QosDropBitsInPerSecond_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ExpressRoute Circuits QosDropBitsInPerSecond Alert\",\n    \"description\": \"Policy to audit/deploy ExpressRoute Circuits QosDropBitsInPerSecond Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"QosDropBitsInPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRouteCircuits/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-QosDropBitsInPerSecond')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ExpressRoute Circuit QosDropBitsInPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"QosDropBitsInPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRouteCircuits\",\n                            \"metricName\": \"QosDropBitsInPerSecond\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#80": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PublicIp_BytesInDDoSAttack_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PIP Bytes in DDoS Attack Alert\",\n    \"description\": \"Policy to audit/deploy PIP Bytes in DDoS Attack Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"4\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"8000000\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/publicIPAddresses\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/publicIPAddresses\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"bytesinddos\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/publicIPAddresses/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Maximum\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-BytesInDDOSAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Public IP Address Bytes IN DDOS\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"bytesinddos\",\n                            \"metricNamespace\": \"Microsoft.Network/publicIPAddresses\",\n                            \"metricName\": \"bytesinddos\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Maximum\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#81": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PublicIp_DDoSAttack_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PIP DDoS Attack Alert\",\n    \"description\": \"Policy to audit/deploy PIP DDoS Attack Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/publicIPAddresses\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/publicIPAddresses\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ifunderddosattack\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/publicIPAddresses/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Maximum\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DDOS_Attack')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Public IP Address Under Attack\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ifunderddosattack\",\n                            \"metricNamespace\": \"Microsoft.Network/publicIPAddresses\",\n                            \"metricName\": \"ifunderddosattack\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Maximum\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#82": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PublicIp_PacketsInDDoSAttack_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PIP Packets in DDoS Attack Alert\",\n    \"description\": \"Policy to audit/deploy PIP Packets in DDoS Attack Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"4\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"40000\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/publicIPAddresses\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/publicIPAddresses\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"PacketsInDDoS\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/publicIPAddresses/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Total\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"GreaterThanOrEqual\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-PacketsInDDosAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Public IP Address Packets IN DDOS\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"PacketsInDDoS\",\n                            \"metricNamespace\": \"Microsoft.Network/publicIPAddresses\",\n                            \"metricName\": \"PacketsInDDoS\",\n                            \"operator\": \"GreaterThanOrEqual\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Total\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#83": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_PublicIp_VIPAvailability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy PIP VIP Availability Alert\",\n    \"description\": \"Policy to audit/deploy PIP VIP Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/publicIPAddresses\"\n          },\n          {\n            \"field\": \"Microsoft.Network/publicIPAddresses/sku.name\",\n            \"equals\": \"Standard\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/publicIPAddresses\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"VipAvailability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/publicIPAddresses/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-VIPAvailabityAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Public IP Address VIP Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"VipAvailability\",\n                            \"metricNamespace\": \"Microsoft.Network/publicIPAddresses\",\n                            \"metricName\": \"VipAvailability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#84": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_VNET_DDoSAttack_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy VNet DDoS Attack Alert\",\n    \"description\": \"Policy to audit/deploy Virtual Network DDoS Attack Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/virtualNetworks\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/virtualNetworks\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"ifunderddosattack\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/virtualNetworks/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Maximum\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-DDOSAttackAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for VNet DDOS Attack\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"ifunderddosattack\",\n                            \"metricNamespace\": \"Microsoft.Network/virtualNetworks\",\n                            \"metricName\": \"ifunderddosattack\",\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Maximum\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#85": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AA_TotalJob_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Automation Account TotalJob Alert\",\n    \"description\": \"Policy to audit/deploy Automation Account TotalJob Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Automation\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT1M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"0\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Automation/automationAccounts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Automation/automationAccounts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"TotalJob\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Automation/automationAccounts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-TotalJob')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Automation Account TotalJob Alert\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"TotalJob\",\n                            \"metricNamespace\": \"Microsoft.Automation/automationAccounts\",\n                            \"metricName\": \"TotalJob\",\n                            \"dimensions\": [\n                              {\n                                \"name\": \"Status\",\n                                \"operator\": \"Exclude\",\n                                \"values\": [\n                                  \"Completed\"\n                                ]\n                              }\n                            ],\n                            \"operator\": \"GreaterThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#86": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_LAWorkspace_Delete\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log LA Workspace Delete Alert\",\n    \"description\": \"Policy to Deploy Activity Log LA Workspace Delete Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.OperationalInsights/workspaces\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"ActivityLAWorkspaceDelete\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.OperationalInsights/workspaces/delete\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityLAWorkspaceDelete\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityLAWorkspaceDelete\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log LA Workspace Delete\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.OperationalInsights/workspaces/delete\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#87": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_LAWorkspace_KeyRegen\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log LA Workspace Regenerate Key Alert\",\n    \"description\": \"Policy to Deploy Activity Log LA Workspace Regenerate Key Alert\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"Project\": \"amba-monitoring\"\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.OperationalInsights/workspaces\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"ActivityLAWorkspaceRegenKey\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.OperationalInsights/workspaces/regeneratesharedkey/action\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivityLAWorkspaceRegenKey\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ActivityLAWorkspaceRegenKey\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log LA Workspace Regenerate Key\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.OperationalInsights/workspaces/regeneratesharedkey/action\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#88": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_StorageAccount_Availability_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy SA Availability Alert\",\n    \"description\": \"Policy to audit/deploy SA Availability Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Storage\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"1\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"threshold\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Threshold\",\n          \"description\": \"Threshold for the alert\"\n        },\n        \"defaultValue\": \"90\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Storage/storageAccounts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Storage/storageAccounts\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"Availability\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Storage/storageAccounts/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\n                \"equals\": \"LessThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\n                \"equals\": \"[[parameters('threshold')]\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  },\n                  \"threshold\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-AvailabilityAlert')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for Storage Account Availability\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"name\": \"Availability\",\n                            \"metricNamespace\": \"Microsoft.Storage/storageAccounts\",\n                            \"metricName\": \"Availability\",\n                            \"operator\": \"LessThan\",\n                            \"threshold\": \"[[parameters('threshold')]\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"StaticThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"threshold\": {\n                          \"value\": \"[[parameters('threshold')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"threshold\": {\n                  \"value\": \"[[parameters('threshold')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#89": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_StorageAccount_Delete\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Activity Log Storage Account Delete Alert\",\n    \"description\": \"Policy to Deploy Activity Log Storage Account Delete Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring on resource. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Storage/storageAccounts\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"name\": \"Activity Log Storage Account Delete\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Administrative\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"operationName\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Microsoft.Storage/storageAccounts/delete\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActivitySADelete\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"Activity Log Storage Account Delete\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"description\": \"Activity Log Storage Account Delete\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"Administrative\"\n                                  },\n                                  {\n                                    \"field\": \"operationName\",\n                                    \"equals\": \"Microsoft.Storage/storageAccounts/delete\"\n                                  },\n                                  {\n                                    \"field\": \"status\",\n                                    \"containsAny\": [\n                                      \"succeeded\"\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#9": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ERCIR_QosDropBitsOutPerSecond_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy ExpressRoute Circuits QosDropBitsOutPerSecond Alert\",\n    \"description\": \"Policy to audit/deploy ExpressRoute Circuits QosDropBitsOutPerSecond Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Network\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"severity\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Severity\",\n          \"description\": \"Severity of the Alert\"\n        },\n        \"allowedValues\": [\n          \"0\",\n          \"1\",\n          \"2\",\n          \"3\",\n          \"4\"\n        ],\n        \"defaultValue\": \"2\"\n      },\n      \"windowSize\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Window Size\",\n          \"description\": \"Window size for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\",\n          \"PT6H\",\n          \"PT12H\",\n          \"P1D\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"evaluationFrequency\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Evaluation Frequency\",\n          \"description\": \"Evaluation frequency for the alert\"\n        },\n        \"allowedValues\": [\n          \"PT1M\",\n          \"PT5M\",\n          \"PT15M\",\n          \"PT30M\",\n          \"PT1H\"\n        ],\n        \"defaultValue\": \"PT5M\"\n      },\n      \"autoMitigate\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Auto Mitigate\",\n          \"description\": \"Auto Mitigate for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"deployIfNotExists\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/metricAlerts\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\n                \"equals\": \"Microsoft.Network/expressRouteCircuits\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\n                \"equals\": \"QosDropBitsOutPerSecond\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Network/expressRouteCircuits/', field('fullName'))]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\n                \"equals\": \"[[parameters('windowSize')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\n                \"equals\": \"[[parameters('severity')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\n                \"equals\": \"[[parameters('autoMitigate')]\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\n                \"equals\": \"Average\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\n                \"equals\": \"GreaterThan\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\n                \"equals\": \"Medium\"\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\n                \"equals\": 2\n              },\n              {\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"resourceName\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceName\",\n                      \"description\": \"Name of the resource\"\n                    }\n                  },\n                  \"resourceId\": {\n                    \"type\": \"String\",\n                    \"metadata\": {\n                      \"displayName\": \"resourceId\",\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\n                    }\n                  },\n                  \"severity\": {\n                    \"type\": \"String\"\n                  },\n                  \"windowSize\": {\n                    \"type\": \"String\"\n                  },\n                  \"evaluationFrequency\": {\n                    \"type\": \"String\"\n                  },\n                  \"autoMitigate\": {\n                    \"type\": \"String\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\n                    \"apiVersion\": \"2018-03-01\",\n                    \"name\": \"[[concat(parameters('resourceName'), '-QosDropBitsOutPerSecond')]\",\n                    \"location\": \"global\",\n                    \"tags\": {\n                      \"_deployed_by_amba\": true\n                    },\n                    \"properties\": {\n                      \"description\": \"Metric Alert for ExpressRoute Circuit QosDropBitsOutPerSecond\",\n                      \"severity\": \"[[parameters('severity')]\",\n                      \"enabled\": \"[[parameters('enabled')]\",\n                      \"scopes\": [\n                        \"[[parameters('resourceId')]\"\n                      ],\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\n                      \"windowSize\": \"[[parameters('windowSize')]\",\n                      \"criteria\": {\n                        \"allOf\": [\n                          {\n                            \"alertSensitivity\": \"Medium\",\n                            \"failingPeriods\": {\n                              \"numberOfEvaluationPeriods\": 4,\n                              \"minFailingPeriodsToAlert\": 4\n                            },\n                            \"name\": \"QosDropBitsOutPerSecond\",\n                            \"metricNamespace\": \"Microsoft.Network/expressRouteCircuits\",\n                            \"metricName\": \"QosDropBitsOutPerSecond\",\n                            \"operator\": \"GreaterThan\",\n                            \"timeAggregation\": \"Average\",\n                            \"criterionType\": \"DynamicThresholdCriterion\"\n                          }\n                        ],\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\n                      },\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\n                      \"parameters\": {\n                        \"severity\": {\n                          \"value\": \"[[parameters('severity')]\"\n                        },\n                        \"windowSize\": {\n                          \"value\": \"[[parameters('windowSize')]\"\n                        },\n                        \"evaluationFrequency\": {\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\n                        },\n                        \"autoMitigate\": {\n                          \"value\": \"[[parameters('autoMitigate')]\"\n                        },\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"resourceName\": {\n                  \"value\": \"[[field('name')]\"\n                },\n                \"resourceId\": {\n                  \"value\": \"[[field('id')]\"\n                },\n                \"severity\": {\n                  \"value\": \"[[parameters('severity')]\"\n                },\n                \"windowSize\": {\n                  \"value\": \"[[parameters('windowSize')]\"\n                },\n                \"evaluationFrequency\": {\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\n                },\n                \"autoMitigate\": {\n                  \"value\": \"[[parameters('autoMitigate')]\"\n                },\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#90": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_RecoveryVault_BackupHealthMonitor_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy RV Backup Health Monitoring Alerts\",\n    \"description\": \"Policy to audit/update Recovery Vault Backup Health Alerting to Azure monitor alerts\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Site Recovery\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"modify\",\n          \"audit\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"modify\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.RecoveryServices/Vaults\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          },\n          {\n            \"field\": \"Microsoft.RecoveryServices/vaults/monitoringSettings.azureMonitorAlertSettings.alertsForAllJobFailures\",\n            \"notEquals\": \"Enabled\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"conflictEffect\": \"audit\",\n          \"operations\": [\n            {\n              \"operation\": \"addOrReplace\",\n              \"field\": \"Microsoft.RecoveryServices/vaults/monitoringSettings.classicAlertSettings.alertsForCriticalOperations\",\n              \"value\": \"Disabled\"\n            },\n            {\n              \"operation\": \"addOrReplace\",\n              \"field\": \"Microsoft.RecoveryServices/vaults/monitoringSettings.azureMonitorAlertSettings.alertsForAllJobFailures\",\n              \"value\": \"Enabled\"\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#91": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_AlertProcessing_Rule\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AMBA Notification Assets\",\n    \"description\": \"Policy to deploy Action Group and Alert Processing Rule for all AMBA alerts\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"ALZMonitorResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"ALZMonitorResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"ALZMonitorResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"ALZMonitorActionGroupEmail\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Action Group Email Addresses\",\n          \"description\": \"Email addresses to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZLogicappResourceId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Logic App Resource Id\",\n          \"description\": \"Logic App Resource Id for Action Group to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZLogicappCallbackUrl\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Logic App Callback URL\",\n          \"description\": \"Callback URL that triggers the Logic App\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZArmRoleId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Arm Role Id\",\n          \"description\": \"Arm Built-in Role Id for action group to send alerts to a subscription level, will only send to individual members of role\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZEventHubResourceId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Event Hub resource id\",\n          \"description\": \"Event Hub resource id for action group to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZWebhookServiceUri\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Webhook Service Uri\",\n          \"description\": \"Indicates the service uri of the webhook to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZFunctionResourceId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Function Resource Id\",\n          \"description\": \"Function Resource Id for Action Group to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZFunctionTriggerUrl\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Function Trigger URL\",\n          \"description\": \"URL that triggers the Function\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOAlertProcessingRule\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Alert Processing Rule Resource ID\",\n          \"description\": \"The Resource ID of an existing Alert Processing Rule already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          },\n          {\n            \"value\": \"[[empty(parameters('BYOAlertProcessingRule'))]\",\n            \"equals\": \"true\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"deployIfNotExists\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.AlertsManagement/actionRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.AlertsManagement/actionRules/description\",\n                \"equals\": \"AMBA Notification Assets - Alert Processing Rule for Subscription\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"ALZMonitorResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"ALZMonitorResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorActionGroupEmail\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZLogicappResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZLogicappCallbackUrl\": {\n                    \"type\": \"String\"\n                  },\n                  \"ALZArmRoleId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZEventHubResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZWebhookServiceUri\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZFunctionResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZFunctionTriggerUrl\": {\n                    \"type\": \"String\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  },\n                  \"BYOAlertProcessingRule\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varBYOAGs\": \"[[split(parameters('BYOActionGroup'), ',')]\",\n                  \"varBYOAlertProcessingRule\": \"[[if(empty(parameters('BYOAlertProcessingRule')), null(), trim(parameters('BYOAlertProcessingRule')))]\",\n                  \"varALZMonitorActionGroupEmail\": \"[[array(split(parameters('ALZMonitorActionGroupEmail'),','))]\",\n                  \"varALZArmRoleId\": \"[[array(split(parameters('ALZArmRoleId'),','))]\",\n                  \"varALZEventHubResourceId\": \"[[array(split(parameters('ALZEventHubResourceId'),','))]\",\n                  \"varALZWebhookServiceUri\": \"[[array(split(parameters('ALZWebhookServiceUri'),','))]\",\n                  \"varLogicAppReceivers\": [\n                    {\n                      \"name\": \"AlzLA-0\",\n                      \"resourceId\": \"[[if(empty(parameters('ALZLogicappResourceId')), null(), trim(parameters('ALZLogicappResourceId')))]\",\n                      \"callbackUrl\": \"[[if(empty(parameters('ALZLogicappCallbackUrl')), null(), trim(parameters('ALZLogicappCallbackUrl')))]\",\n                      \"useCommonSchema\": true\n                    }\n                  ],\n                  \"varAzureFunctionReceivers\": [\n                    {\n                      \"name\": \"AlzFa-0\",\n                      \"functionAppResourceId\": \"[[if(empty(parameters('ALZFunctionResourceId')), null(), split(trim(parameters('ALZFunctionResourceId')),'/functions/')[0])]\",\n                      \"functionName\": \"[[if(empty(parameters('ALZFunctionResourceId')), null(), split(trim(parameters('ALZFunctionResourceId')),'/')[10])]\",\n                      \"httpTriggerUrl\": \"[[if(empty(parameters('ALZFunctionTriggerUrl')), null(), trim(parameters('ALZFunctionTriggerUrl')))]\",\n                      \"useCommonAlertSchema\": true\n                    }\n                  ],\n                  \"copy\": [\n                    {\n                      \"name\": \"varEmailReceivers\",\n                      \"count\": \"[[length(variables('varALZMonitorActionGroupEmail'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzMail-', indexOf(variables('varALZMonitorActionGroupEmail'), variables('varALZMonitorActionGroupEmail')[copyIndex('varEmailReceivers')]))]\",\n                        \"emailAddress\": \"[[trim(variables('varALZMonitorActionGroupEmail')[copyIndex('varEmailReceivers')])]\",\n                        \"useCommonSchema\": true\n                      }\n                    },\n                    {\n                      \"name\": \"varArmRoleReceivers\",\n                      \"count\": \"[[length(variables('varALZArmRoleId'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzARM-', indexOf(variables('varALZArmRoleId'), variables('varALZArmRoleId')[copyIndex('varArmRoleReceivers')]))]\",\n                        \"roleId\": \"[[trim(variables('varALZArmRoleId')[copyIndex('varArmRoleReceivers')])]\",\n                        \"useCommonSchema\": true\n                      }\n                    },\n                    {\n                      \"name\": \"varEventHubReceivers\",\n                      \"count\": \"[[length(variables('varALZEventHubResourceId'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzEH-', indexOf(variables('varALZEventHubResourceId'), variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]))]\",\n                        \"subscriptionId\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), split(trim(variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]),'/')[2])]\",\n                        \"eventHubNameSpace\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), split(trim(variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]),'/')[8])]\",\n                        \"eventHubName\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), split(trim(variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]),'/')[10])]\",\n                        \"useCommonAlertSchema\": true,\n                        \"tenantId\": \"[[subscription().tenantId]\"\n                      }\n                    },\n                    {\n                      \"name\": \"varWebhookReceivers\",\n                      \"count\": \"[[length(variables('varALZWebhookServiceUri'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzWh-', indexOf(variables('varALZWebhookServiceUri'), variables('varALZWebhookServiceUri')[copyIndex('varWebhookReceivers')]))]\",\n                        \"identifierUri\": \"null()\",\n                        \"objectId\": \"null()\",\n                        \"serviceUri\": \"[[trim(variables('varALZWebhookServiceUri')[copyIndex('varWebhookReceivers')])]\",\n                        \"useCommonAlertSchema\": true,\n                        \"tenantId\": \"null()\",\n                        \"useAadAuth\": \"false\"\n                      }\n                    },\n                    {\n                      \"name\": \"varAGIds\",\n                      \"count\": \"[[length(variables('varBYOAGs'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": \"[[trim(variables('varBYOAGs')[copyIndex('varAGIds')])]\"\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n                    \"location\": \"[[parameters('ALZMonitorResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('ALZMonitorResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ActionGroupDeployment\",\n                    \"resourceGroup\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('ALZMonitorResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"ALZMonitorResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZMonitorActionGroupEmail\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZLogicappResourceId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZLogicappCallbackUrl\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZArmRoleId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZEventHubResourceId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZWebhookServiceUri\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZFunctionResourceId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZFunctionTriggerUrl\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOAlertProcessingRule\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[and(empty(parameters('BYOActionGroup')), empty(parameters('BYOAlertProcessingRule')))]\",\n                            \"type\": \"Microsoft.Insights/actionGroups\",\n                            \"apiVersion\": \"2023-01-01\",\n                            \"name\": \"[[concat('ag-AMBA-', subscription().displayName, '-001')]\",\n                            \"location\": \"Global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"groupShortName\": \"ActGrp\",\n                              \"enabled\": true,\n                              \"emailReceivers\": \"[[if(empty(parameters('ALZMonitorActionGroupEmail')), null(), variables('varEmailReceivers'))]\",\n                              \"armRoleReceivers\": \"[[if(empty(parameters('ALZArmRoleId')), null(), variables('varArmRoleReceivers'))]\",\n                              \"logicAppReceivers\": \"[[if(empty(parameters('ALZLogicappResourceId')), null(), variables('varLogicAppReceivers'))]\",\n                              \"eventHubReceivers\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), variables('varEventHubReceivers'))]\",\n                              \"webhookReceivers\": \"[[if(empty(parameters('ALZWebhookServiceUri')), null(), variables('varWebhookReceivers'))]\",\n                              \"azureFunctionReceivers\": \"[[if(empty(parameters('ALZFunctionResourceId')), null(), variables('varAzureFunctionReceivers'))]\"\n                            }\n                          },\n                          {\n                            \"condition\": \"[[empty(parameters('BYOAlertProcessingRule'))]\",\n                            \"type\": \"Microsoft.AlertsManagement/actionRules\",\n                            \"apiVersion\": \"2021-08-08\",\n                            \"name\": \"[[concat('apr-AMBA-',subscription().displayName, '-001')]\",\n                            \"location\": \"Global\",\n                            \"dependsOn\": [\n                              \"[[concat('ag-AMBA-', subscription().displayName, '-001')]\"\n                            ],\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"description\": \"AMBA Notification Assets - Alert Processing Rule for Subscription\",\n                              \"enabled\": true,\n                              \"actions\": [\n                                {\n                                  \"actiongroupIds\": \"[[if(empty(parameters('BYOActionGroup')), array(concat(subscription().Id, '/resourceGroups/', parameters('ALZMonitorResourceGroupName'), '/providers/microsoft.insights/actionGroups/', 'ag-AMBA-', subscription().displayName, '-001')), variables('varAGIds'))]\",\n                                  \"actionType\": \"AddActionGroups\"\n                                }\n                              ]\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"ALZMonitorResourceGroupName\": {\n                          \"value\": \"[[parameters('ALZMonitorResourceGroupName')]\"\n                        },\n                        \"ALZMonitorActionGroupEmail\": {\n                          \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                        },\n                        \"ALZLogicappResourceId\": {\n                          \"value\": \"[[parameters('ALZLogicappResourceId')]\"\n                        },\n                        \"ALZLogicappCallbackUrl\": {\n                          \"value\": \"[[parameters('ALZLogicappCallbackUrl')]\"\n                        },\n                        \"ALZArmRoleId\": {\n                          \"value\": \"[[parameters('ALZArmRoleId')]\"\n                        },\n                        \"ALZEventHubResourceId\": {\n                          \"value\": \"[[parameters('ALZEventHubResourceId')]\"\n                        },\n                        \"ALZWebhookServiceUri\": {\n                          \"value\": \"[[parameters('ALZWebhookServiceUri')]\"\n                        },\n                        \"ALZFunctionResourceId\": {\n                          \"value\": \"[[parameters('ALZFunctionResourceId')]\"\n                        },\n                        \"ALZFunctionTriggerUrl\": {\n                          \"value\": \"[[parameters('ALZFunctionTriggerUrl')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        },\n                        \"BYOAlertProcessingRule\": {\n                          \"value\": \"[[parameters('BYOAlertProcessingRule')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"ALZMonitorResourceGroupName\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupName')]\"\n                },\n                \"ALZMonitorResourceGroupTags\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupTags')]\"\n                },\n                \"ALZMonitorResourceGroupLocation\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupLocation')]\"\n                },\n                \"ALZMonitorActionGroupEmail\": {\n                  \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                },\n                \"ALZLogicappResourceId\": {\n                  \"value\": \"[[parameters('ALZLogicappResourceId')]\"\n                },\n                \"ALZLogicappCallbackUrl\": {\n                  \"value\": \"[[parameters('ALZLogicappCallbackUrl')]\"\n                },\n                \"ALZArmRoleId\": {\n                  \"value\": \"[[parameters('ALZArmRoleId')]\"\n                },\n                \"ALZEventHubResourceId\": {\n                  \"value\": \"[[parameters('ALZEventHubResourceId')]\"\n                },\n                \"ALZWebhookServiceUri\": {\n                  \"value\": \"[[parameters('ALZWebhookServiceUri')]\"\n                },\n                \"ALZFunctionResourceId\": {\n                  \"value\": \"[[parameters('ALZFunctionResourceId')]\"\n                },\n                \"ALZFunctionTriggerUrl\": {\n                  \"value\": \"[[parameters('ALZFunctionTriggerUrl')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                },\n                \"BYOAlertProcessingRule\": {\n                  \"value\": \"[[parameters('BYOAlertProcessingRule')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#92": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_Suppression_AlertProcessing_Rule\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy AMBA Notification Suppression Asset\",\n    \"description\": \"Policy to deploy empty and disabled suppression Alert Processing Rule for all AMBA alerts\",\n    \"metadata\": {\n      \"version\": \"1.1.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"ALZMonitorResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"ALZMonitorResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"ALZMonitorResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"deployIfNotExists\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.AlertsManagement/actionRules\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.AlertsManagement/actionRules/description\",\n                \"equals\": \"AMBA Notification Assets - Suppression Alert Processing Rule for maintenance period for Subscription\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"ALZMonitorResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"ALZMonitorResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"variables\": {},\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n                    \"location\": \"[[parameters('ALZMonitorResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('ALZMonitorResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"SuppressionRuleDeployment\",\n                    \"resourceGroup\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('ALZMonitorResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"ALZMonitorResourceGroupName\": {\n                            \"type\": \"string\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"type\": \"Microsoft.AlertsManagement/actionRules\",\n                            \"apiVersion\": \"2021-08-08\",\n                            \"name\": \"[[concat('apr-AMBA-',subscription().displayName, '-002')]\",\n                            \"location\": \"Global\",\n                            \"dependsOn\": [],\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"scopes\": [\n                                \"[[subscription().Id]\"\n                              ],\n                              \"description\": \"AMBA Notification Assets - Suppression Alert Processing Rule for maintenance period for Subscription\",\n                              \"enabled\": false,\n                              \"actions\": [\n                                {\n                                  \"actionType\": \"RemoveAllActionGroups\"\n                                }\n                              ]\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"ALZMonitorResourceGroupName\": {\n                          \"value\": \"[[parameters('ALZMonitorResourceGroupName')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"ALZMonitorResourceGroupName\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupName')]\"\n                },\n                \"ALZMonitorResourceGroupTags\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupTags')]\"\n                },\n                \"ALZMonitorResourceGroupLocation\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupLocation')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#93": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_ServiceHealth_ActionGroups\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Service Health Action Group\",\n    \"description\": \"Policy to deploy action group for Service Health alerts\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      },\n      \"ALZMonitorResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"ALZMonitorResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"ALZMonitorResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"ALZMonitorActionGroupEmail\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Action Group Email Addresses\",\n          \"description\": \"Email addresses to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZLogicappResourceId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Logic App Resource Id\",\n          \"description\": \"Logic App Resource Id for Action Group to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZLogicappCallbackUrl\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Logic App Callback URL\",\n          \"description\": \"Callback URL that triggers the Logic App\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZArmRoleId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Arm Role Id\",\n          \"description\": \"Arm Built-in Role Id for action group to send alerts to a subscription level, will only send to individual members of role\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZEventHubResourceId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Event Hub resource id\",\n          \"description\": \"Event Hub resource id for action group to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZWebhookServiceUri\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Webhook Service Uri\",\n          \"description\": \"Indicates the service uri of the webhook to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZFunctionResourceId\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Function Resource Id\",\n          \"description\": \"Function Resource Id for Action Group to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"ALZFunctionTriggerUrl\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Function Trigger URL\",\n          \"description\": \"URL that triggers the Function\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOAlertProcessingRule\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Alert Processing Rule Resource ID\",\n          \"description\": \"The Resource ID of an existing Alert Processing Rule already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          },\n          {\n            \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n            \"equals\": \"true\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"deployIfNotExists\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/actionGroups\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                \"equals\": true\n              },\n              {\n                \"field\": \"Microsoft.Insights/actionGroups/groupShortName\",\n                \"equals\": \"SH-ActGrp\"\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"ALZMonitorResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"ALZMonitorResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorActionGroupEmail\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZLogicappResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZLogicappCallbackUrl\": {\n                    \"type\": \"String\"\n                  },\n                  \"ALZArmRoleId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZEventHubResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZWebhookServiceUri\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZFunctionResourceId\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZFunctionTriggerUrl\": {\n                    \"type\": \"String\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  },\n                  \"BYOAlertProcessingRule\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varALZMonitorActionGroupEmail\": \"[[array(split(parameters('ALZMonitorActionGroupEmail'),','))]\",\n                  \"varALZArmRoleId\": \"[[array(split(parameters('ALZArmRoleId'),','))]\",\n                  \"varALZEventHubResourceId\": \"[[array(split(parameters('ALZEventHubResourceId'),','))]\",\n                  \"varALZWebhookServiceUri\": \"[[array(split(parameters('ALZWebhookServiceUri'),','))]\",\n                  \"varLogicAppReceivers\": [\n                    {\n                      \"name\": \"AlzLA-0\",\n                      \"resourceId\": \"[[if(empty(parameters('ALZLogicappResourceId')), null(), trim(parameters('ALZLogicappResourceId')))]\",\n                      \"callbackUrl\": \"[[if(empty(parameters('ALZLogicappCallbackUrl')), null(), trim(parameters('ALZLogicappCallbackUrl')))]\",\n                      \"useCommonSchema\": true\n                    }\n                  ],\n                  \"varAzureFunctionReceivers\": [\n                    {\n                      \"name\": \"AlzFa-0\",\n                      \"functionAppResourceId\": \"[[if(empty(parameters('ALZFunctionResourceId')), null(), split(trim(parameters('ALZFunctionResourceId')),'/functions/')[0])]\",\n                      \"functionName\": \"[[if(empty(parameters('ALZFunctionResourceId')), null(), split(trim(parameters('ALZFunctionResourceId')),'/')[10])]\",\n                      \"httpTriggerUrl\": \"[[if(empty(parameters('ALZFunctionTriggerUrl')), null(), trim(parameters('ALZFunctionTriggerUrl')))]\",\n                      \"useCommonAlertSchema\": true\n                    }\n                  ],\n                  \"copy\": [\n                    {\n                      \"name\": \"varEmailReceivers\",\n                      \"count\": \"[[length(variables('varALZMonitorActionGroupEmail'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzMail-', indexOf(variables('varALZMonitorActionGroupEmail'), variables('varALZMonitorActionGroupEmail')[copyIndex('varEmailReceivers')]))]\",\n                        \"emailAddress\": \"[[trim(variables('varALZMonitorActionGroupEmail')[copyIndex('varEmailReceivers')])]\",\n                        \"useCommonSchema\": true\n                      }\n                    },\n                    {\n                      \"name\": \"varArmRoleReceivers\",\n                      \"count\": \"[[length(variables('varALZArmRoleId'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzARM-', indexOf(variables('varALZArmRoleId'), variables('varALZArmRoleId')[copyIndex('varArmRoleReceivers')]))]\",\n                        \"roleId\": \"[[trim(variables('varALZArmRoleId')[copyIndex('varArmRoleReceivers')])]\",\n                        \"useCommonSchema\": true\n                      }\n                    },\n                    {\n                      \"name\": \"varEventHubReceivers\",\n                      \"count\": \"[[length(variables('varALZEventHubResourceId'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzEH-', indexOf(variables('varALZEventHubResourceId'), variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]))]\",\n                        \"subscriptionId\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), split(trim(variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]),'/')[2])]\",\n                        \"eventHubNameSpace\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), split(trim(variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]),'/')[8])]\",\n                        \"eventHubName\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), split(trim(variables('varALZEventHubResourceId')[copyIndex('varEventHubReceivers')]),'/')[10])]\",\n                        \"useCommonAlertSchema\": true,\n                        \"tenantId\": \"[[subscription().tenantId]\"\n                      }\n                    },\n                    {\n                      \"name\": \"varWebhookReceivers\",\n                      \"count\": \"[[length(variables('varALZWebhookServiceUri'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"name\": \"[[concat('AlzWh-', indexOf(variables('varALZWebhookServiceUri'), variables('varALZWebhookServiceUri')[copyIndex('varWebhookReceivers')]))]\",\n                        \"identifierUri\": \"null()\",\n                        \"objectId\": \"null()\",\n                        \"serviceUri\": \"[[trim(variables('varALZWebhookServiceUri')[copyIndex('varWebhookReceivers')])]\",\n                        \"useCommonAlertSchema\": true,\n                        \"tenantId\": \"null()\",\n                        \"useAadAuth\": \"false\"\n                      }\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n                    \"location\": \"[[parameters('ALZMonitorResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('ALZMonitorResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"SH-ActionGroupDeployment\",\n                    \"resourceGroup\": \"[[parameters('ALZMonitorResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[concat('Microsoft.Resources/resourceGroups/', parameters('ALZMonitorResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"ALZMonitorResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZMonitorActionGroupEmail\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZLogicappResourceId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZLogicappCallbackUrl\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZArmRoleId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZEventHubResourceId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZWebhookServiceUri\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZFunctionResourceId\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZFunctionTriggerUrl\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOAlertProcessingRule\": {\n                            \"type\": \"String\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[empty(parameters('BYOActionGroup'))]\",\n                            \"type\": \"Microsoft.Insights/actionGroups\",\n                            \"apiVersion\": \"2023-01-01\",\n                            \"name\": \"[[concat('ag-AMBA-SH-', subscription().displayName, '-001')]\",\n                            \"location\": \"Global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"groupShortName\": \"SH-ActGrp\",\n                              \"enabled\": true,\n                              \"emailReceivers\": \"[[if(empty(parameters('ALZMonitorActionGroupEmail')), null(), variables('varEmailReceivers'))]\",\n                              \"armRoleReceivers\": \"[[if(empty(parameters('ALZArmRoleId')), null(), variables('varArmRoleReceivers'))]\",\n                              \"logicAppReceivers\": \"[[if(empty(parameters('ALZLogicappResourceId')), null(), variables('varLogicAppReceivers'))]\",\n                              \"eventHubReceivers\": \"[[if(empty(parameters('ALZEventHubResourceId')), null(), variables('varEventHubReceivers'))]\",\n                              \"webhookReceivers\": \"[[if(empty(parameters('ALZWebhookServiceUri')), null(), variables('varWebhookReceivers'))]\",\n                              \"azureFunctionReceivers\": \"[[if(empty(parameters('ALZFunctionResourceId')), null(), variables('varAzureFunctionReceivers'))]\"\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"ALZMonitorResourceGroupName\": {\n                          \"value\": \"[[parameters('ALZMonitorResourceGroupName')]\"\n                        },\n                        \"ALZMonitorActionGroupEmail\": {\n                          \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                        },\n                        \"ALZLogicappResourceId\": {\n                          \"value\": \"[[parameters('ALZLogicappResourceId')]\"\n                        },\n                        \"ALZLogicappCallbackUrl\": {\n                          \"value\": \"[[parameters('ALZLogicappCallbackUrl')]\"\n                        },\n                        \"ALZArmRoleId\": {\n                          \"value\": \"[[parameters('ALZArmRoleId')]\"\n                        },\n                        \"ALZEventHubResourceId\": {\n                          \"value\": \"[[parameters('ALZEventHubResourceId')]\"\n                        },\n                        \"ALZWebhookServiceUri\": {\n                          \"value\": \"[[parameters('ALZWebhookServiceUri')]\"\n                        },\n                        \"ALZFunctionResourceId\": {\n                          \"value\": \"[[parameters('ALZFunctionResourceId')]\"\n                        },\n                        \"ALZFunctionTriggerUrl\": {\n                          \"value\": \"[[parameters('ALZFunctionTriggerUrl')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        },\n                        \"BYOAlertProcessingRule\": {\n                          \"value\": \"[[parameters('BYOAlertProcessingRule')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"ALZMonitorResourceGroupName\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupName')]\"\n                },\n                \"ALZMonitorResourceGroupTags\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupTags')]\"\n                },\n                \"ALZMonitorResourceGroupLocation\": {\n                  \"value\": \"[[parameters('ALZMonitorResourceGroupLocation')]\"\n                },\n                \"ALZMonitorActionGroupEmail\": {\n                  \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                },\n                \"ALZLogicappResourceId\": {\n                  \"value\": \"[[parameters('ALZLogicappResourceId')]\"\n                },\n                \"ALZLogicappCallbackUrl\": {\n                  \"value\": \"[[parameters('ALZLogicappCallbackUrl')]\"\n                },\n                \"ALZArmRoleId\": {\n                  \"value\": \"[[parameters('ALZArmRoleId')]\"\n                },\n                \"ALZEventHubResourceId\": {\n                  \"value\": \"[[parameters('ALZEventHubResourceId')]\"\n                },\n                \"ALZWebhookServiceUri\": {\n                  \"value\": \"[[parameters('ALZWebhookServiceUri')]\"\n                },\n                \"ALZFunctionResourceId\": {\n                  \"value\": \"[[parameters('ALZFunctionResourceId')]\"\n                },\n                \"ALZFunctionTriggerUrl\": {\n                  \"value\": \"[[parameters('ALZFunctionTriggerUrl')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                },\n                \"BYOAlertProcessingRule\": {\n                  \"value\": \"[[parameters('BYOAlertProcessingRule')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#94": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_ResourceHealth_Unhealthy_Alert\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Resource Health Unhealthy Alert\",\n    \"description\": \"Policy to Deploy Resource Health Unhealthy Alert\",\n    \"metadata\": {\n      \"version\": \"1.2.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"anyOf\": [\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": true\n                      },\n                      {\n                        \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                        \"contains\": \"ag-AMBA-SH-\"\n                      }\n                    ]\n                  },\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": false\n                      },\n                      {\n                        \"count\": {\n                          \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*]\",\n                          \"where\": {\n                            \"anyOf\": [\n                              {\n                                \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                                \"contains\": \"[[split(trim(parameters('BYOActionGroup')),',')[0]]\"\n                              }\n                            ]\n                          }\n                        },\n                        \"equals\": 1\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"ResourceHealth\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 1\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varBYOActionGroups\": \"[[split(parameters('BYOActionGroup'), ',')]\",\n                  \"copy\": [\n                    {\n                      \"name\": \"varActionGroupIds\",\n                      \"count\": \"[[length(variables('varBYOActionGroups'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"actionGroupId\": \"[[trim(variables('varBYOActionGroups')[copyIndex('varActionGroupIds')])]\"\n                      }\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ResourceHealtAlert\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[resourceId('Microsoft.Resources/resourceGroups', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"String\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[empty(parameters('BYOActionGroup'))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ResourceHealthUnhealthyAlert\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": [\n                                  {\n                                    \"actionGroupId\": \"[[concat(subscription().Id, '/resourceGroups/', parameters('alertResourceGroupName'), '/providers/microsoft.insights/actionGroups/', 'ag-AMBA-SH-', subscription().displayName, '-001')]\",\n                                    \"webhookProperties\": {}\n                                  }\n                                ]\n                              },\n                              \"description\": \"Resource Health Unhealthy Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ResourceHealth\"\n                                  },\n                                  {\n                                    \"anyOf\": [\n                                      {\n                                        \"field\": \"properties.cause\",\n                                        \"equals\": \"PlatformInitiated\"\n                                      },\n                                      {\n                                        \"field\": \"properties.cause\",\n                                        \"equals\": \"UserInitiated\"\n                                      }\n                                    ]\n                                  },\n                                  {\n                                    \"anyOf\": [\n                                      {\n                                        \"field\": \"properties.currentHealthStatus\",\n                                        \"equals\": \"Degraded\"\n                                      },\n                                      {\n                                        \"field\": \"properties.currentHealthStatus\",\n                                        \"equals\": \"Unavailable\"\n                                      }\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          },\n                          {\n                            \"condition\": \"[[not(empty(parameters('BYOActionGroup')))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ResourceHealthUnhealthyAlert\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": \"[[variables('varActionGroupIds')]\"\n                              },\n                              \"description\": \"Resource Health Unhealthy Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ResourceHealth\"\n                                  },\n                                  {\n                                    \"anyOf\": [\n                                      {\n                                        \"field\": \"properties.cause\",\n                                        \"equals\": \"PlatformInitiated\"\n                                      },\n                                      {\n                                        \"field\": \"properties.cause\",\n                                        \"equals\": \"UserInitiated\"\n                                      }\n                                    ]\n                                  },\n                                  {\n                                    \"anyOf\": [\n                                      {\n                                        \"field\": \"properties.currentHealthStatus\",\n                                        \"equals\": \"Degraded\"\n                                      },\n                                      {\n                                        \"field\": \"properties.currentHealthStatus\",\n                                        \"equals\": \"Unavailable\"\n                                      }\n                                    ]\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#95": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_ServiceHealth_HealthAdvisory\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Service Health Advisory Alert\",\n    \"description\": \"Policy to Deploy Service Health Advisory Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      },\n      \"ALZMonitorActionGroupEmail\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Action Group Email Addresses\",\n          \"description\": \"Email addresses to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"existenceScope\": \"resourceGroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"anyOf\": [\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": true\n                      },\n                      {\n                        \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                        \"contains\": \"ag-AMBA-SH-\"\n                      }\n                    ]\n                  },\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": false\n                      },\n                      {\n                        \"count\": {\n                          \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*]\",\n                          \"where\": {\n                            \"anyOf\": [\n                              {\n                                \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                                \"contains\": \"[[split(trim(parameters('BYOActionGroup')),',')[0]]\"\n                              }\n                            ]\n                          }\n                        },\n                        \"equals\": 1\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"ServiceHealth\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"properties.incidentType\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"ActionRequired\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorActionGroupEmail\": {\n                    \"type\": \"string\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varBYOActionGroups\": \"[[split(parameters('BYOActionGroup'), ',')]\",\n                  \"copy\": [\n                    {\n                      \"name\": \"varActionGroupIds\",\n                      \"count\": \"[[length(variables('varBYOActionGroups'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"actionGroupId\": \"[[trim(variables('varBYOActionGroups')[copyIndex('varActionGroupIds')])]\"\n                      }\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ServiceHealthHealth\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[resourceId('Microsoft.Resources/resourceGroups', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZMonitorActionGroupEmail\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"String\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[empty(parameters('BYOActionGroup'))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthAdvisoryEvent\",\n                            \"location\": \"Global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": [\n                                  {\n                                    \"actionGroupId\": \"[[concat(subscription().Id, '/resourceGroups/', parameters('alertResourceGroupName'), '/providers/microsoft.insights/actionGroups/', 'ag-AMBA-SH-', subscription().displayName, '-001')]\"\n                                  }\n                                ]\n                              },\n                              \"description\": \"Service Health Advisory Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"ActionRequired\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          },\n                          {\n                            \"condition\": \"[[not(empty(parameters('BYOActionGroup')))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthAdvisoryEvent\",\n                            \"location\": \"Global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": \"[[variables('varActionGroupIds')]\"\n                              },\n                              \"description\": \"Service Health Advisory Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"ActionRequired\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"ALZMonitorActionGroupEmail\": {\n                          \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"ALZMonitorActionGroupEmail\": {\n                  \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#96": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_ServiceHealth_Incident\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Service Health Incident Alert\",\n    \"description\": \"Policy to Deploy Service Health Incident Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      },\n      \"ALZMonitorActionGroupEmail\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Action Group Email Addresses\",\n          \"description\": \"Email addresses to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"anyOf\": [\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": true\n                      },\n                      {\n                        \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                        \"contains\": \"ag-AMBA-SH-\"\n                      }\n                    ]\n                  },\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": false\n                      },\n                      {\n                        \"count\": {\n                          \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*]\",\n                          \"where\": {\n                            \"anyOf\": [\n                              {\n                                \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                                \"contains\": \"[[split(trim(parameters('BYOActionGroup')),',')[0]]\"\n                              }\n                            ]\n                          }\n                        },\n                        \"equals\": 1\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"ServiceHealth\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"properties.incidentType\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Incident\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorActionGroupEmail\": {\n                    \"type\": \"string\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varBYOActionGroups\": \"[[split(parameters('BYOActionGroup'), ',')]\",\n                  \"copy\": [\n                    {\n                      \"name\": \"varActionGroupIds\",\n                      \"count\": \"[[length(variables('varBYOActionGroups'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"actionGroupId\": \"[[trim(variables('varBYOActionGroups')[copyIndex('varActionGroupIds')])]\"\n                      }\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ServiceHealthIncident\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[resourceId('Microsoft.Resources/resourceGroups', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZMonitorActionGroupEmail\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"String\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[empty(parameters('BYOActionGroup'))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthIncident\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": [\n                                  {\n                                    \"actionGroupId\": \"[[concat(subscription().Id, '/resourceGroups/', parameters('alertResourceGroupName'), '/providers/microsoft.insights/actionGroups/', 'ag-AMBA-SH-', subscription().displayName, '-001')]\"\n                                  }\n                                ]\n                              },\n                              \"description\": \"Service Health Incident Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"Incident\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          },\n                          {\n                            \"condition\": \"[[not(empty(parameters('BYOActionGroup')))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthIncident\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": \"[[variables('varActionGroupIds')]\"\n                              },\n                              \"description\": \"Service Health Incident Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"Incident\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"ALZMonitorActionGroupEmail\": {\n                          \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"ALZMonitorActionGroupEmail\": {\n                  \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#97": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_ServiceHealth_Maintenance\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Service Health Maintenance Alert\",\n    \"description\": \"Policy to Deploy Service Health Maintenance Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      },\n      \"ALZMonitorActionGroupEmail\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Action Group Email Addresses\",\n          \"description\": \"Email addresses to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"anyOf\": [\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": true\n                      },\n                      {\n                        \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                        \"contains\": \"ag-AMBA-SH-\"\n                      }\n                    ]\n                  },\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": false\n                      },\n                      {\n                        \"count\": {\n                          \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*]\",\n                          \"where\": {\n                            \"anyOf\": [\n                              {\n                                \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                                \"contains\": \"[[split(trim(parameters('BYOActionGroup')),',')[0]]\"\n                              }\n                            ]\n                          }\n                        },\n                        \"equals\": 1\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"ServiceHealth\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"properties.incidentType\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Maintenance\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorActionGroupEmail\": {\n                    \"type\": \"string\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varBYOActionGroups\": \"[[split(parameters('BYOActionGroup'), ',')]\",\n                  \"copy\": [\n                    {\n                      \"name\": \"varActionGroupIds\",\n                      \"count\": \"[[length(variables('varBYOActionGroups'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"actionGroupId\": \"[[trim(variables('varBYOActionGroups')[copyIndex('varActionGroupIds')])]\"\n                      }\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ServiceHealthMaintenance\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[resourceId('Microsoft.Resources/resourceGroups', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZMonitorActionGroupEmail\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"String\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[empty(parameters('BYOActionGroup'))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthPlannedMaintenance\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": [\n                                  {\n                                    \"actionGroupId\": \"[[concat(subscription().Id, '/resourceGroups/', parameters('alertResourceGroupName'), '/providers/microsoft.insights/actionGroups/', 'ag-AMBA-SH-', subscription().displayName, '-001')]\"\n                                  }\n                                ]\n                              },\n                              \"description\": \"Service Health Planned Maintenance Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"Maintenance\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          },\n                          {\n                            \"condition\": \"[[not(empty(parameters('BYOActionGroup')))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthPlannedMaintenance\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": \"[[variables('varActionGroupIds')]\"\n                              },\n                              \"description\": \"Service Health Planned Maintenance Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"Maintenance\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"ALZMonitorActionGroupEmail\": {\n                          \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"ALZMonitorActionGroupEmail\": {\n                  \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#98": "{\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\n  \"apiVersion\": \"2021-06-01\",\n  \"name\": \"Deploy_activitylog_ServiceHealth_SecurityAdvisory\",\n  \"properties\": {\n    \"policyType\": \"Custom\",\n    \"mode\": \"All\",\n    \"displayName\": \"Deploy Service Health Security Advisory Alert\",\n    \"description\": \"Policy to Deploy Service Health Security Advisory Alert\",\n    \"metadata\": {\n      \"version\": \"1.3.0\",\n      \"category\": \"Monitoring\",\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\n      \"alzCloudEnvironments\": [\n        \"AzureCloud\"\n      ],\n      \"_deployed_by_amba\": \"True\"\n    },\n    \"parameters\": {\n      \"enabled\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Alert State\",\n          \"description\": \"Alert state for the alert\"\n        },\n        \"allowedValues\": [\n          \"true\",\n          \"false\"\n        ],\n        \"defaultValue\": \"true\"\n      },\n      \"alertResourceGroupName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Name\",\n          \"description\": \"Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"rg-amba-monitoring-001\"\n      },\n      \"alertResourceGroupTags\": {\n        \"type\": \"Object\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Tags\",\n          \"description\": \"Tags on the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": {\n          \"_deployed_by_amba\": true\n        }\n      },\n      \"alertResourceGroupLocation\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Resource Group Location\",\n          \"description\": \"Location of the Resource group the alert is placed in\"\n        },\n        \"defaultValue\": \"centralus\"\n      },\n      \"effect\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Effect\",\n          \"description\": \"Effect of the policy\"\n        },\n        \"allowedValues\": [\n          \"deployIfNotExists\",\n          \"disabled\"\n        ],\n        \"defaultValue\": \"disabled\"\n      },\n      \"MonitorDisableTagName\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag name\",\n          \"description\": \"Tag name to disable monitoring. Set to true if monitoring should be disabled\"\n        },\n        \"defaultValue\": \"MonitorDisable\"\n      },\n      \"MonitorDisableTagValues\": {\n        \"type\": \"Array\",\n        \"metadata\": {\n          \"displayName\": \"ALZ Monitoring disabled tag values(s)\",\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\n        },\n        \"defaultValue\": [\n          \"true\",\n          \"Test\",\n          \"Dev\",\n          \"Sandbox\"\n        ]\n      },\n      \"ALZMonitorActionGroupEmail\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Action Group Email Addresses\",\n          \"description\": \"Email addresses to send alerts to\"\n        },\n        \"defaultValue\": \"\"\n      },\n      \"BYOActionGroup\": {\n        \"type\": \"String\",\n        \"metadata\": {\n          \"displayName\": \"Customer defined Action Group Resource ID\",\n          \"description\": \"The Resource ID of an existing Action Group already deployed by the customer in his environment\"\n        },\n        \"defaultValue\": \"\"\n      }\n    },\n    \"policyRule\": {\n      \"if\": {\n        \"allOf\": [\n          {\n            \"field\": \"type\",\n            \"equals\": \"Microsoft.Resources/subscriptions\"\n          },\n          {\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\n          }\n        ]\n      },\n      \"then\": {\n        \"effect\": \"[[parameters('effect')]\",\n        \"details\": {\n          \"roleDefinitionIds\": [\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\n          ],\n          \"type\": \"Microsoft.Insights/activityLogAlerts\",\n          \"existenceScope\": \"resourcegroup\",\n          \"resourceGroupName\": \"[[parameters('alertResourceGroupName')]\",\n          \"deploymentScope\": \"subscription\",\n          \"existenceCondition\": {\n            \"allOf\": [\n              {\n                \"field\": \"Microsoft.Insights/ActivityLogAlerts/enabled\",\n                \"equals\": \"[[parameters('enabled')]\"\n              },\n              {\n                \"anyOf\": [\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": true\n                      },\n                      {\n                        \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                        \"contains\": \"ag-AMBA-SH-\"\n                      }\n                    ]\n                  },\n                  {\n                    \"allOf\": [\n                      {\n                        \"value\": \"[[empty(parameters('BYOActionGroup'))]\",\n                        \"equals\": false\n                      },\n                      {\n                        \"count\": {\n                          \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*]\",\n                          \"where\": {\n                            \"anyOf\": [\n                              {\n                                \"field\": \"Microsoft.Insights/ActivityLogAlerts/actions.actionGroups[*].actionGroupId\",\n                                \"contains\": \"[[split(trim(parameters('BYOActionGroup')),',')[0]]\"\n                              }\n                            ]\n                          }\n                        },\n                        \"equals\": 1\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"count\": {\n                  \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*]\",\n                  \"where\": {\n                    \"anyOf\": [\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"category\"\n                          },\n                          {\n                            \"field\": \"Microsoft.Insights/ActivityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"ServiceHealth\"\n                          }\n                        ]\n                      },\n                      {\n                        \"allOf\": [\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].field\",\n                            \"equals\": \"properties.incidentType\"\n                          },\n                          {\n                            \"field\": \"microsoft.insights/activityLogAlerts/condition.allOf[*].equals\",\n                            \"equals\": \"Security\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                },\n                \"equals\": 2\n              }\n            ]\n          },\n          \"deployment\": {\n            \"location\": \"northeurope\",\n            \"properties\": {\n              \"mode\": \"incremental\",\n              \"template\": {\n                \"$schema\": \"https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#\",\n                \"contentVersion\": \"1.0.0.0\",\n                \"parameters\": {\n                  \"alertResourceGroupName\": {\n                    \"type\": \"string\"\n                  },\n                  \"alertResourceGroupTags\": {\n                    \"type\": \"object\"\n                  },\n                  \"alertResourceGroupLocation\": {\n                    \"type\": \"string\"\n                  },\n                  \"enabled\": {\n                    \"type\": \"string\"\n                  },\n                  \"ALZMonitorActionGroupEmail\": {\n                    \"type\": \"string\"\n                  },\n                  \"BYOActionGroup\": {\n                    \"type\": \"String\"\n                  }\n                },\n                \"variables\": {\n                  \"varBYOActionGroups\": \"[[split(parameters('BYOActionGroup'), ',')]\",\n                  \"copy\": [\n                    {\n                      \"name\": \"varActionGroupIds\",\n                      \"count\": \"[[length(variables('varBYOActionGroups'))]\",\n                      \"mode\": \"serial\",\n                      \"input\": {\n                        \"actionGroupId\": \"[[trim(variables('varBYOActionGroups')[copyIndex('varActionGroupIds')])]\"\n                      }\n                    }\n                  ]\n                },\n                \"resources\": [\n                  {\n                    \"type\": \"Microsoft.Resources/resourceGroups\",\n                    \"apiVersion\": \"2021-04-01\",\n                    \"name\": \"[[parameters('alertResourceGroupName')]\",\n                    \"location\": \"[[parameters('alertResourceGroupLocation')]\",\n                    \"tags\": \"[[parameters('alertResourceGroupTags')]\"\n                  },\n                  {\n                    \"type\": \"Microsoft.Resources/deployments\",\n                    \"apiVersion\": \"2019-10-01\",\n                    \"name\": \"ServiceSecurityIncident\",\n                    \"resourceGroup\": \"[[parameters('alertResourceGroupName')]\",\n                    \"dependsOn\": [\n                      \"[[resourceId('Microsoft.Resources/resourceGroups', parameters('alertResourceGroupName'))]\"\n                    ],\n                    \"properties\": {\n                      \"mode\": \"Incremental\",\n                      \"template\": {\n                        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n                        \"contentVersion\": \"1.0.0.0\",\n                        \"parameters\": {\n                          \"enabled\": {\n                            \"type\": \"string\"\n                          },\n                          \"alertResourceGroupName\": {\n                            \"type\": \"string\"\n                          },\n                          \"ALZMonitorActionGroupEmail\": {\n                            \"type\": \"string\"\n                          },\n                          \"BYOActionGroup\": {\n                            \"type\": \"String\"\n                          }\n                        },\n                        \"variables\": {},\n                        \"resources\": [\n                          {\n                            \"condition\": \"[[empty(parameters('BYOActionGroup'))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthSecurityIncident\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": [\n                                  {\n                                    \"actionGroupId\": \"[[concat(subscription().Id, '/resourceGroups/', parameters('alertResourceGroupName'), '/providers/microsoft.insights/actionGroups/', 'ag-AMBA-SH-', subscription().displayName, '-001')]\"\n                                  }\n                                ]\n                              },\n                              \"description\": \"Service Health Security Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"Security\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          },\n                          {\n                            \"condition\": \"[[not(empty(parameters('BYOActionGroup')))]\",\n                            \"type\": \"microsoft.insights/activityLogAlerts\",\n                            \"apiVersion\": \"2020-10-01\",\n                            \"name\": \"ServiceHealthSecurityIncident\",\n                            \"location\": \"global\",\n                            \"tags\": {\n                              \"_deployed_by_amba\": true\n                            },\n                            \"properties\": {\n                              \"actions\": {\n                                \"actionGroups\": \"[[variables('varActionGroupIds')]\"\n                              },\n                              \"description\": \"Service Health Security Alert\",\n                              \"enabled\": \"[[parameters('enabled')]\",\n                              \"scopes\": [\n                                \"[[subscription().id]\"\n                              ],\n                              \"condition\": {\n                                \"allOf\": [\n                                  {\n                                    \"field\": \"category\",\n                                    \"equals\": \"ServiceHealth\"\n                                  },\n                                  {\n                                    \"field\": \"properties.incidentType\",\n                                    \"equals\": \"Security\"\n                                  }\n                                ]\n                              },\n                              \"parameters\": {\n                                \"enabled\": {\n                                  \"value\": \"[[parameters('enabled')]\"\n                                }\n                              }\n                            }\n                          }\n                        ]\n                      },\n                      \"parameters\": {\n                        \"enabled\": {\n                          \"value\": \"[[parameters('enabled')]\"\n                        },\n                        \"alertResourceGroupName\": {\n                          \"value\": \"[[parameters('alertResourceGroupName')]\"\n                        },\n                        \"ALZMonitorActionGroupEmail\": {\n                          \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                        },\n                        \"BYOActionGroup\": {\n                          \"value\": \"[[parameters('BYOActionGroup')]\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              },\n              \"parameters\": {\n                \"enabled\": {\n                  \"value\": \"[[parameters('enabled')]\"\n                },\n                \"alertResourceGroupName\": {\n                  \"value\": \"[[parameters('alertResourceGroupName')]\"\n                },\n                \"alertResourceGroupTags\": {\n                  \"value\": \"[[parameters('alertResourceGroupTags')]\"\n                },\n                \"alertResourceGroupLocation\": {\n                  \"value\": \"[[parameters('alertResourceGroupLocation')]\"\n                },\n                \"ALZMonitorActionGroupEmail\": {\n                  \"value\": \"[[parameters('ALZMonitorActionGroupEmail')]\"\n                },\n                \"BYOActionGroup\": {\n                  \"value\": \"[[parameters('BYOActionGroup')]\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
    "$fxv#99": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Alerting-Connectivity",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts for Connectivity",
        "description": "Initiative to deploy AMBA alerts relevant to the ALZ Connectivity management group",
        "metadata": {
          "version": "1.1.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorResourceGroupName": {
            "type": "String",
            "defaultValue": "ALZ-Monitoring-RG",
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Name",
              "description": "Name of the resource group where the ALZ Monitor resources will be deployed"
            }
          },
          "ALZMonitorResourceGroupTags": {
            "type": "Object",
            "defaultValue": {
              "_deployed_by_alz_monitor": true
            },
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Tags",
              "description": "Tags to be applied to the resource group where the ALZ Monitor resources will be deployed"
            }
          },
          "ALZMonitorResourceGroupLocation": {
            "type": "String",
            "defaultValue": "centralus",
            "metadata": {
              "displayName": "ALZ Monitor Resource Group Location",
              "description": "Location of the resource group where the ALZ Monitor resources will be deployed"
            }
          },
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisableTagName"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "ERCIRQoSDropBitsinPerSecAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits in Per Sec Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERCIRQoSDropBitsinPerSecWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits in Per Sec Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERCIRQoSDropBitsinPerSecEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits in Per Sec Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERCIRQoSDropBitsinPerSecPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits in Per Sec Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERCIRQoSDropBitsinPerSecAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits in Per Sec Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERCIRQoSDropBitsoutPerSecAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits out Per Sec Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERCIRQoSDropBitsoutPerSecWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits out Per Sec Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERCIRQoSDropBitsoutPerSecEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits out Per Sec Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERCIRQoSDropBitsoutPerSecPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits out Per Sec Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERCIRQoSDropBitsoutPerSecAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERC IRQoS Drop Bits out Per Sec Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGwBGPPeerStatusAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN Gw BGP Peer Status Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGwBGPPeerStatusWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN Gw BGP Peer Status Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGwBGPPeerStatusEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN Gw BGP Peer Status Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGwBGPPeerStatusPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN Gw BGP Peer Status Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGwBGPPeerStatusAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN Gw BGP Peer Status Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGwBGPPeerStatusThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VPN Gw BGP Peer Status Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VnetGwERCpuUtilAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw ER Cpu Util Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwERCpuUtilWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw ER Cpu Util Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwERCpuUtilEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw ER Cpu Util Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwERCpuUtilPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw ER Cpu Util Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwERCpuUtilAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw ER Cpu Util Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwERCpuUtilThreshold": {
            "type": "string",
            "defaultValue": "80",
            "metadata": {
              "displayName": "Vnet Gw ER Cpu Util Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VnetGwTunnelBWAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel BW Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelBWWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel BW Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelBWEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel BW Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelBWPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel BW Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelBWAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel BW Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwTunnelBWThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "Vnet Gw Tunnel BW Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VnetGwTunnelEgressAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelEgressWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelEgressEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelEgressPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelEgressAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwTunnelEgressThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VnetGwTunnelIngressAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelIngressWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelIngressEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelIngressPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelIngressAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwTunnelIngressThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VPNGWBandWidthUtilAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Band Width Util Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWBandWidthUtilWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Band Width Util Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWBandWidthUtilEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Band Width Util Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWBandWidthUtilPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Band Width Util Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWBandWidthUtilAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Band Width Util Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGWBandWidthUtilThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VPN GW Band Width Util Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VPNGWEgressAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Egress Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWEgressWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Egress Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWEgressEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Egress Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWEgressPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Egress Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWEgressAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Egress Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGWEgressThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VPN GW Egress Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropCountAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Count Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropCountWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Count Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropCountFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Count Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropCountPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Count Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropCountAlertState": {
            "type": "string",
            "defaultValue": "true"
          },
          "VPNGWTunnelEgressPacketDropMismatchAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Mismatch Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropMismatchWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Mismatch Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropMismatchFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Mismatch Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropMismatchPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Mismatch Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWTunnelEgressPacketDropMismatchAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Tunnel Egress Packet Drop Mismatch Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGWIngressAlertSeverity": {
            "type": "string",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Ingress Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWIngressWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Ingress Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWIngressEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Ingress Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWIngressPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Ingress Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWIngressAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Ingress Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGWIngressThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VPN GW Ingress Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VPNGWIngressAutoMitigate": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Ingress Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropCountAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Count Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropCountWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Count Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropCountFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Count Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropCountPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Count Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropCountAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Count Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropMismatchAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Mismatch Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropMismatchWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Mismatch Window Size",
              "description": "Window size for the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropMismatchFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Mismatch Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropMismatchPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Mismatch Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VPNGWTunnelIngressPacketDropMismatchAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VPN GW Tunnel Ingress Packet Drop Mismatch Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PDNSZCapacityUtilAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PDNSZ Capacity Util Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PDNSZCapacityUtilWindowSize": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PDNSZ Capacity Util Window Size",
              "description": "Window size for the alert"
            }
          },
          "PDNSZCapacityUtilEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PDNSZ Capacity Util Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PDNSZCapacityUtilPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PDNSZ Capacity Util Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PDNSZCapacityUtilAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PDNSZ Capacity Util Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PDNSZCapacityUtilThreshold": {
            "type": "string",
            "defaultValue": "80",
            "metadata": {
              "displayName": "PDNSZ Capacity Util Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PDNSZQueryVolumeAlertSeverity": {
            "type": "String",
            "defaultValue": "4",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PDNSZ Query Volume Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PDNSZQueryVolumeWindowSize": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PDNSZ Query Volume Window Size",
              "description": "Window size for the alert"
            }
          },
          "PDNSZQueryVolumeEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PDNSZ Query Volume Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PDNSZQueryVolumePolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PDNSZ Query Volume Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PDNSZQueryVolumeAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PDNSZ Query Volume Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PDNSZQueryVolumeThreshold": {
            "type": "string",
            "defaultValue": "500",
            "metadata": {
              "displayName": "PDNSZ Query Volume Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PDNSZRecordSetCapacityAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PDNSZ Record Set Capacity Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PDNSZRecordSetCapacityWindowSize": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PDNSZ Record Set Capacity Window Size",
              "description": "Window size for the alert"
            }
          },
          "PDNSZRecordSetCapacityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PDNSZ Record Set Capacity Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PDNSZRecordSetCapacityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PDNSZ Record Set Capacity Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PDNSZRecordSetCapacityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PDNSZ Record Set Capacity Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PDNSZRecordSetCapacityThreshold": {
            "type": "string",
            "defaultValue": "80",
            "metadata": {
              "displayName": "PDNSZ Record Set Capacity Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PDNSZRegistrationCapacityUtilAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PDNSZ Registration Capacity Util Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PDNSZRegistrationCapacityUtilWindowSize": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PDNSZ Registration Capacity Util Window Size",
              "description": "Window size for the alert"
            }
          },
          "PDNSZRegistrationCapacityUtilEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1H",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PDNSZ Registration Capacity Util Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PDNSZRegistrationCapacityUtilPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PDNSZ Registration Capacity Util Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PDNSZRegistrationCapacityUtilAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PDNSZ Registration Capacity Util Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PDNSZRegistrationCapacityUtilThreshold": {
            "type": "string",
            "defaultValue": "80",
            "metadata": {
              "displayName": "PDNSZ Registration Capacity Util Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPDDoSAttackAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PIPDDoSAttackWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPDDoSAttackEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPDDoSAttackPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP DDoS Attack Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PIPDDoSAttackAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP DDoS Attack Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPDDoSAttackThreshold": {
            "type": "string",
            "defaultValue": "0",
            "metadata": {
              "displayName": "PIP DDoS Attack Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPPacketsInDDoSAlertSeverity": {
            "type": "String",
            "defaultValue": "4",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PIPPacketsInDDoSWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPPacketsInDDoSEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPPacketsInDDoSPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP Packets In DDoS Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PIPPacketsInDDoSAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP Packets In DDoS Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPPacketsInDDoSThreshold": {
            "type": "string",
            "defaultValue": "40000",
            "metadata": {
              "displayName": "PIP Packets In DDoS Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPVIPAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PIPVIPAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPVIPAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPVIPAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP VIP Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PIPVIPAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP VIP Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPVIPAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "PIP VIP Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "PIPBytesInDDoSAlertSeverity": {
            "type": "String",
            "defaultValue": "4",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "PIPBytesInDDoSWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Window Size",
              "description": "Window size for the alert"
            }
          },
          "PIPBytesInDDoSEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "PIPBytesInDDoSPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "PIP Bytes In DDoS Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "PIPBytesInDDoSAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "PIP Bytes In DDoS Alert State",
              "description": "Alert state for the alert"
            }
          },
          "PIPBytesInDDoSThreshold": {
            "type": "string",
            "defaultValue": "8000000",
            "metadata": {
              "displayName": "PIP Bytes In DDoS Threshold",
              "description": "Threshold for the alert"
            }
          },
          "ERGwExpressRouteBitsInAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits In Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERGwExpressRouteBitsInWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits In Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERGwExpressRouteBitsInEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits In Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERGwExpressRouteBitsInPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits In Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERGwExpressRouteBitsInAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ER Gw Express Route Bits In Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERGwExpressRouteBitsInThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "ER Gw Express Route Bits In Threshold",
              "description": "Threshold for the alert"
            }
          },
          "ERGwExpressRouteBitsOutAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits Out Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERGwExpressRouteBitsOutWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits Out Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERGwExpressRouteBitsOutEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits Out Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERGwExpressRouteBitsOutPolicyEffect": {
            "type": "string",
            "defaultValue": "disabled",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Bits Out Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERGwExpressRouteBitsOutAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ER Gw Express Route Bits Out Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERGwExpressRouteBitsOutThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "ER Gw Express Route Bits Out Threshold",
              "description": "Threshold for the alert"
            }
          },
          "ERGwExpressRouteCpuUtilAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Cpu Util Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERGwExpressRouteCpuUtilWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Cpu Util Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERGwExpressRouteCpuUtilEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Cpu Util Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERGwExpressRouteCpuUtilPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ER Gw Express Route Cpu Util Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERGwExpressRouteCpuUtilAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ER Gw Express Route Cpu Util Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERGwExpressRouteCpuUtilThreshold": {
            "type": "string",
            "defaultValue": "80",
            "metadata": {
              "displayName": "ER Gw Express Route Cpu Util Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VNETDDOSAttackAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VNETDDOSAttackWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Window Size",
              "description": "Window size for the alert"
            }
          },
          "VNETDDOSAttackEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VNETDDOSAttackPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "VNET DDoS Attack Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VNETDDOSAttackAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "VNET DDoS Attack Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VNETDDOSAttackThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "VNET DDoS Attack Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropCountAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Count Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropCountWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Count Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropCountEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Count Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropCountPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Count Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropCountAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Count Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropMismatchAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Mismatch Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropMismatchWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Mismatch Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropMismatchEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Mismatch Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropMismatchPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Mismatch Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelEgressPacketDropMismatchAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Egress Packet Drop Mismatch Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwExpressRouteBitsPerSecondAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Express Route Bits Per Second Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwExpressRouteBitsPerSecondWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Express Route Bits Per Second Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwExpressRouteBitsPerSecondEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Express Route Bits Per Second Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwExpressRouteBitsPerSecondPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Express Route Bits Per Second Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwExpressRouteBitsPerSecondAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Express Route Bits Per Second Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwExpressRouteBitsPerSecondThreshold": {
            "type": "string",
            "defaultValue": "1",
            "metadata": {
              "displayName": "Vnet Gw Express Route Bits Per Second Threshold",
              "description": "Threshold for the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropMismatchAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Mismatch Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropMismatchWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Mismatch Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropMismatchEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Mismatch Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropMismatchPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Mismatch Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropMismatchAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Mismatch Alert State",
              "description": "Alert state for the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropCountAlertSeverity": {
            "type": "String",
            "defaultValue": "3",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Count Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropCountWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Count Window Size",
              "description": "Window size for the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropCountEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Count Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropCountPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Count Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "VnetGwTunnelIngressPacketDropCountAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Vnet Gw Tunnel Ingress Packet Drop Count Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERCIRBgpAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERCIR Bgp Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERCIRBgpAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERCIR Bgp Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERCIRBgpAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERCIR Bgp Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERCIRBgpAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERCIR Bgp Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERCIRBgpAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERCIR Bgp Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERCIRBgpAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "90",
            "metadata": {
              "displayName": "ERCIR Bgp Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "ERCIRArpAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERCIR Arp Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERCIRArpAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERCIR Arp Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERCIRArpAvailabilityFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERCIR Arp Availability Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERCIRArpAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERCIR ARP Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERCIRArpAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERCIR Arp Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERCIRArpAvailabilityThreshold": {
            "type": "string",
            "defaultValue": "90",
            "metadata": {
              "displayName": "ERCIR Arp Availability Threshold",
              "description": "Threshold for the alert"
            }
          },
          "AFWSNATPortUtilizationAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "AFW SNAT Port Utilization Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "AFWSNATPortUtilizationWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "AFW SNAT Port Utilization Window Size",
              "description": "Window size for the alert"
            }
          },
          "AFWSNATPortUtilizationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "AFW SNAT Port Utilization Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "AFWSNATPortUtilizationPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "AFW SNAT Port Utilization Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "AFWSNATPortUtilizationAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "AFW SNAT Port Utilization Alert State",
              "description": "Alert state for the alert"
            }
          },
          "AFWSNATPortUtilizationThreshold": {
            "type": "string",
            "defaultValue": "80",
            "metadata": {
              "displayName": "AFW SNAT Port Utilization Threshold",
              "description": "Threshold for the alert"
            }
          },
          "FirewallHealthAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "Firewall Health Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "FirewallHealthWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "Firewall Health Window Size",
              "description": "Window size for the alert"
            }
          },
          "FirewallHealthEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "Firewall Health Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "FirewallHealthPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Firewall Health Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "FirewallHealthAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Firewall Health Alert State",
              "description": "Alert state for the alert"
            }
          },
          "FirewallHealthThreshold": {
            "type": "string",
            "defaultValue": "90",
            "metadata": {
              "displayName": "Firewall Health Threshold",
              "description": "Threshold for the alert"
            }
          },
          "activityFWDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity FW Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "activityFWDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity FW Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityNSGDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity NSG Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "activityNSGDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity NSG Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityUDRUpdatePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity UDR Update Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "activityUDRUpdateAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity UDR Update Alert State",
              "description": "Alert state for the alert"
            }
          },
          "activityVPNGWDeletePolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "Activity VPN GW Delete Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "activityVPNGWDeleteAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "Activity VPN GW Delete Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBDatapathAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBDatapathAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBDatapathAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBDatapathAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Data path Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBDatapathAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Data path Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBGlobalBackendAvailabilityAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBGlobalBackendAvailabilityWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBGlobalBackendAvailabilityEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBGlobalBackendAvailabilityPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Global Backend Availability Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBGlobalBackendAvailabilityAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Global Backend Availability Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBHealthProbeStatusAlertSeverity": {
            "type": "String",
            "defaultValue": "2",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBHealthProbeStatusWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBHealthProbeStatusEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBHealthProbeStatusPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Health Probe Status Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBHealthProbeStatusAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Health Probe Status Alert State",
              "description": "Alert state for the alert"
            }
          },
          "LBUsedSNATPortsAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "LBUsedSNATPortsWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Window Size",
              "description": "Window size for the alert"
            }
          },
          "LBUsedSNATPortsEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "LBUsedSNATPortsPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "LB Used SNAT Ports Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "LBUsedSNATPortsAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "LB Used SNAT Ports Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPBitsInPerSecondAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Bits In Per Second Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPBitsInPerSecondWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Bits In Per Second Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPBitsInPerSecondEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Bits In Per Second Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPBitsInPerSecondPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Bits In Per Second Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPBitsInPerSecondAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Bits In Per Second Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPBitsOutPerSecondAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Bits Out Per Second Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPBitsOutPerSecondWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Bits Out Per Second Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPBitsOutPerSecondEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Bits Out Per Second Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPBitsOutPerSecondPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Bits Out Per Second Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPBitsOutPerSecondAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Bits Out Per Second Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPLineProtocolAlertSeverity": {
            "type": "String",
            "defaultValue": "0",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Line Protocol Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPLineProtocolWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Line Protocol Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPLineProtocolEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Line Protocol Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPLineProtocolPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Line Protocol Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPLineProtocolAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Line Protocol Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPRxLightLevelHighAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level High Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPRxLightLevelHighWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level High Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPRxLightLevelHighEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level High Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPRxLightLevelHighPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level High Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPRxLightLevelHighAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Rx Light Level High Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPRxLightLevelLowAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level Low Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPRxLightLevelLowWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level Low Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPRxLightLevelLowEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level Low Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPRxLightLevelLowPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Rx Light Level Low Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPRxLightLevelLowAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Rx Light Level Low Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPTxLightLevelHighAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level High Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPTxLightLevelHighWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level High Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPTxLightLevelHighEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level High Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPTxLightLevelHighPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level High Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPTxLightLevelHighAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Tx Light Level High Alert State",
              "description": "Alert state for the alert"
            }
          },
          "ERPTxLightLevelLowAlertSeverity": {
            "type": "String",
            "defaultValue": "1",
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level Low Alert Severity",
              "description": "Severity of the alert"
            }
          },
          "ERPTxLightLevelLowWindowSize": {
            "type": "string",
            "defaultValue": "PT5M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level Low Window Size",
              "description": "Window size for the alert"
            }
          },
          "ERPTxLightLevelLowEvaluationFrequency": {
            "type": "string",
            "defaultValue": "PT1M",
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level Low Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            }
          },
          "ERPTxLightLevelLowPolicyEffect": {
            "type": "string",
            "defaultValue": "deployIfNotExists",
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "metadata": {
              "displayName": "ERP Tx Light Level Low Policy Effect",
              "description": "Policy effect for the alert, deployIfNotExists will deploy the alert if it does not exist, disabled will not deploy the alert"
            }
          },
          "ERPTxLightLevelLowAlertState": {
            "type": "string",
            "defaultValue": "true",
            "metadata": {
              "displayName": "ERP Tx Light Level Low Alert State",
              "description": "Alert state for the alert"
            }
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_ERCIRQoSDropBitsinPerSec",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERCIR_QosDropBitsInPerSecond_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERCIRQoSDropBitsinPerSecAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERCIRQoSDropBitsinPerSecWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERCIRQoSDropBitsinPerSecEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERCIRQoSDropBitsinPerSecPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERCIRQoSDropBitsinPerSecAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERCIRQoSDropBitsoutPerSec",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERCIR_QosDropBitsOutPerSecond_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERCIRQoSDropBitsoutPerSecAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERCIRQoSDropBitsoutPerSecWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERCIRQoSDropBitsoutPerSecEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERCIRQoSDropBitsoutPerSecPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERCIRQoSDropBitsoutPerSecAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGwBGPPeerStatus",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_BGPPeerStatus_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGwBGPPeerStatusAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGwBGPPeerStatusWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGwBGPPeerStatusEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGwBGPPeerStatusPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGwBGPPeerStatusAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VPNGwBGPPeerStatusThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwERCpuUtil",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_ExpressRouteCpuUtil_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwERCpuUtilAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwERCpuUtilWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwERCpuUtilEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwERCpuUtilPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwERCpuUtilAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VnetGwERCpuUtilThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelBW",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelBandwidth_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelBWAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelBWWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelBWEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelBWPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelBWAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VnetGwTunnelBWThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelEgress",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelEgress_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelEgressAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelEgressWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelEgressEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelEgressPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelEgressAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VnetGwTunnelEgressThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelIngress",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelIngress_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelIngressAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelIngressWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelIngressEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelIngressPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelIngressAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VnetGwTunnelIngressThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWBandWidthUtil",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_BandwidthUtil_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWBandWidthUtilAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWBandWidthUtilWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWBandWidthUtilEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWBandWidthUtilPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWBandWidthUtilAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VPNGWBandWidthUtilThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWEgress",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_Egress_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWEgressAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWEgressWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWEgressEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWEgressPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWEgressAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VPNGWEgressThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWTunnelEgressPacketDropCount",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_TunnelEgressPacketDropCount_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropCountAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropCountWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropCountFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropCountPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropCountAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWTunnelEgressPacketDropMismatch",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_TunnelEgressPacketDropMismatch_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropMismatchAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropMismatchWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropMismatchFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropMismatchPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWTunnelEgressPacketDropMismatchAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWIngress",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_Ingress_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWIngressAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWIngressWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWIngressEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWIngressPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWIngressAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VPNGWIngressThreshold')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('VPNGWIngressAutoMitigate')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWTunnelIngressPacketDropCount",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_TunnelIngressPacketDropCount_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropCountAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropCountWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropCountFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropCountPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropCountAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VPNGWTunnelIngressPacketDropMismatch",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VPNGw_TunnelIngressPacketDropMismatch_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropMismatchAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropMismatchWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropMismatchFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropMismatchPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VPNGWTunnelIngressPacketDropMismatchAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PDNSZCapacityUtil",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PDNSZ_CapacityUtil_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PDNSZCapacityUtilAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PDNSZCapacityUtilWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PDNSZCapacityUtilEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PDNSZCapacityUtilPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PDNSZCapacityUtilAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PDNSZCapacityUtilThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PDNSZQueryVolume",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PDNSZ_QueryVolume_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PDNSZQueryVolumeAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PDNSZQueryVolumeWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PDNSZQueryVolumeEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PDNSZQueryVolumePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PDNSZQueryVolumeAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PDNSZQueryVolumeThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PDNSZRecordSetCapacity",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PDNSZ_RecordSetCapacity_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PDNSZRecordSetCapacityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PDNSZRecordSetCapacityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PDNSZRecordSetCapacityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PDNSZRecordSetCapacityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PDNSZRecordSetCapacityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PDNSZRecordSetCapacityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PDNSZRegistrationCapacityUtil",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_DNSZ_RegistrationCapacityUtil_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PDNSZRegistrationCapacityUtilAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PDNSZRegistrationCapacityUtilWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PDNSZRegistrationCapacityUtilEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PDNSZRegistrationCapacityUtilPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PDNSZRegistrationCapacityUtilAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PDNSZRegistrationCapacityUtilThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERGwExpressRouteBitsIn",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERGw_ExpressRouteBitsIn_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERGwExpressRouteBitsInAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERGwExpressRouteBitsInWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERGwExpressRouteBitsInEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERGwExpressRouteBitsInPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERGwExpressRouteBitsInAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('ERGwExpressRouteBitsInThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERGwExpressRouteBitsOut",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERGw_ExpressRouteBitsOut_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERGwExpressRouteBitsOutAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERGwExpressRouteBitsOutWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERGwExpressRouteBitsOutEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERGwExpressRouteBitsOutPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERGwExpressRouteBitsOutAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('ERGwExpressRouteBitsOutThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERGwExpressRouteCpuUtil",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERGw_ExpressRouteCpuUtil_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERGwExpressRouteCpuUtilAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERGwExpressRouteCpuUtilWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERGwExpressRouteCpuUtilEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERGwExpressRouteCpuUtilPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERGwExpressRouteCpuUtilAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('ERGwExpressRouteCpuUtilThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelEgressPacketDropCount",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelEgressPacketDropCount_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropCountAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropCountWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropCountEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropCountPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropCountAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelEgressPacketDropMismatch",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelEgressPacketDropMismatch_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropMismatchAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropMismatchWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropMismatchEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropMismatchPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelEgressPacketDropMismatchAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwExpressRouteBitsPerSecond",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_ExpressRouteBitsPerSecond_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwExpressRouteBitsPerSecondAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwExpressRouteBitsPerSecondWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwExpressRouteBitsPerSecondEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwExpressRouteBitsPerSecondPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwExpressRouteBitsPerSecondAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VnetGwExpressRouteBitsPerSecondThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelIngressPacketDropMismatchWindowSize",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelIngressPacketDropMismatch_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropMismatchAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropMismatchWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropMismatchEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropMismatchPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropMismatchAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VnetGwTunnelIngressPacketDropCountWindowSize",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VnetGw_TunnelIngressPacketDropCount_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropCountAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropCountWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropCountEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropCountPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VnetGwTunnelIngressPacketDropCountAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERCIRBgpAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERCIR_BgpAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERCIRBgpAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERCIRBgpAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERCIRBgpAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERCIRBgpAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERCIRBgpAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('ERCIRBgpAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERCIRArpAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERCIR_ArpAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERCIRArpAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERCIRArpAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERCIRArpAvailabilityFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERCIRArpAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERCIRArpAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('ERCIRArpAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_AFWSNATPortUtilization",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AFW_SNATPortUtilization_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('AFWSNATPortUtilizationAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('AFWSNATPortUtilizationWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('AFWSNATPortUtilizationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('AFWSNATPortUtilizationPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('AFWSNATPortUtilizationAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('AFWSNATPortUtilizationThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPBytesInDDoSEvaluationFrequency",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_BytesInDDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPBytesInDDoSAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPBytesInDDoSWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPBytesInDDoSEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPBytesInDDoSPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPBytesInDDoSAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPBytesInDDoSThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPDDoSAttack",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_DDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPDDoSAttackAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPDDoSAttackWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPDDoSAttackEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPDDoSAttackPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPDDoSAttackAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPDDoSAttackThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPPacketsInDDoS",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_PacketsInDDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPPacketsInDDoSAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPPacketsInDDoSWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPPacketsInDDoSEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPPacketsInDDoSPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPPacketsInDDoSAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPPacketsInDDoSThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_PIPVIPAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_PublicIp_VIPAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('PIPVIPAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('PIPVIPAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('PIPVIPAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('PIPVIPAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('PIPVIPAvailabilityAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('PIPVIPAvailabilityThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_VNETDDOSAttack",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_VNET_DDoSAttack_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('VNETDDOSAttackAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('VNETDDOSAttackWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('VNETDDOSAttackEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('VNETDDOSAttackPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('VNETDDOSAttackAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('VNETDDOSAttackThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_FirewallHealth",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_AFW_FirewallHealth_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('FirewallHealthAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('FirewallHealthWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('FirewallHealthEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('FirewallHealthPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('FirewallHealthAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('FirewallHealthThreshold')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityFWDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_Firewall_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityFWDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityFWDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityNSGDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_NSG_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityNSGDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityNSGDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityUDRUpdate",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_RouteTable_Update",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityUDRUpdatePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityUDRUpdateAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_activityVPNGWDelete",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_activitylog_VPNGateway_Delete",
            "parameters": {
              "effect": {
                "value": "[[[parameters('activityVPNGWDeletePolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('activityVPNGWDeleteAlertState')]"
              },
              "alertResourceGroupName": {
                "value": "[[[parameters('ALZMonitorResourceGroupName')]"
              },
              "alertResourceGroupTags": {
                "value": "[[[parameters('ALZMonitorResourceGroupTags')]"
              },
              "alertResourceGroupLocation": {
                "value": "[[[parameters('ALZMonitorResourceGroupLocation')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBDataPathAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_DataPathAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBDataPathAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBDataPathAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBDataPathAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBDataPathAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBDataPathAvailabilityAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBGlobalBackendAvailability",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_GlobalBackendAvailability_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBGlobalBackendAvailabilityAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBHealthProbeStatus",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_HealthProbeStatus_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBHealthProbeStatusAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBHealthProbeStatusWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBHealthProbeStatusEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBHealthProbeStatusPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBHealthProbeStatusAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_LBUsedSNATPorts",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ALB_UsedSNATPorts_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('LBUsedSNATPortsAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('LBUsedSNATPortsWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('LBUsedSNATPortsEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('LBUsedSNATPortsPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('LBUsedSNATPortsAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPBitsInPerSecond",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRouteBitsIn_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPBitsInPerSecondAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPBitsInPerSecondWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPBitsInPerSecondEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPBitsInPerSecondPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPBitsInPerSecondAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPBitsOutPerSecond",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRouteBitsOut_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPBitsOutPerSecondAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPBitsOutPerSecondWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPBitsOutPerSecondEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPBitsOutPerSecondPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPBitsOutPerSecondAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPLineProtocol",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRoutLineProtocol_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPLineProtocolAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPLineProtocolWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPLineProtocolEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPLineProtocolPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPLineProtocolAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPRxLightLevelHigh",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRoutRxLightLevell_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPRxLightLevelHighAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPRxLightLevelHighWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPRxLightLevelHighEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPRxLightLevelHighPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPRxLightLevelHighAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPRxLightLevelLow",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRoutRxLightLevellow_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPRxLightLevelLowAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPRxLightLevelLowWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPRxLightLevelLowEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPRxLightLevelLowPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPRxLightLevelLowAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPTxLightLevelHigh",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRoutTxLightLevell_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPTxLightLevelHighAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPTxLightLevelHighWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPTxLightLevelHighEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPTxLightLevelHighPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPTxLightLevelHighAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_ERPTxLightLevelLow",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_ERP_ExpressRoutTxLightLevellow_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('ERPTxLightLevelLowAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('ERPTxLightLevelLowWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('ERPTxLightLevelLowEvaluationFrequency')]"
              },
              "effect": {
                "value": "[[[parameters('ERPTxLightLevelLowPolicyEffect')]"
              },
              "enabled": {
                "value": "[[[parameters('ERPTxLightLevelLowAlertState')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "cloudEnv": "[environment().name]",
    "defaultDeploymentLocationByCloudType": {
      "AzureCloud": "northeurope",
      "AzureChinaCloud": "chinaeast2",
      "AzureUSGovernment": "usgovvirginia"
    },
    "templateVars": {
      "scope": "/providers/Microsoft.Management/managementGroups/contoso",
      "defaultDeploymentLocation": "\"location\": \"northeurope\"",
      "localizedDeploymentLocation": "[format('\"location\": \"{0}\"', variables('defaultDeploymentLocationByCloudType')[variables('cloudEnv')])]"
    },
    "targetDeploymentLocationByCloudType": {
      "AzureCloud": "[coalesce(parameters('location'), 'northeurope')]",
      "AzureChinaCloud": "[coalesce(parameters('location'), 'chinaeast2')]",
      "AzureUSGovernment": "[coalesce(parameters('location'), 'usgovvirginia')]"
    },
    "deploymentLocation": "[format('\"location\": \"{0}\"', variables('targetDeploymentLocationByCloudType')[variables('cloudEnv')])]",
    "loadPolicyDefinitions": {
      "All": [
        "[variables('$fxv#0')]",
        "[variables('$fxv#1')]",
        "[variables('$fxv#2')]",
        "[variables('$fxv#3')]",
        "[variables('$fxv#4')]",
        "[variables('$fxv#5')]",
        "[variables('$fxv#6')]",
        "[variables('$fxv#7')]",
        "[variables('$fxv#8')]",
        "[variables('$fxv#9')]",
        "[variables('$fxv#10')]",
        "[variables('$fxv#11')]",
        "[variables('$fxv#12')]",
        "[variables('$fxv#13')]",
        "[variables('$fxv#14')]",
        "[variables('$fxv#15')]",
        "[variables('$fxv#16')]",
        "[variables('$fxv#17')]",
        "[variables('$fxv#18')]",
        "[variables('$fxv#19')]",
        "[variables('$fxv#20')]",
        "[variables('$fxv#21')]",
        "[variables('$fxv#22')]",
        "[variables('$fxv#23')]",
        "[variables('$fxv#24')]",
        "[variables('$fxv#25')]",
        "[variables('$fxv#26')]",
        "[variables('$fxv#27')]",
        "[variables('$fxv#28')]",
        "[variables('$fxv#29')]",
        "[variables('$fxv#30')]",
        "[variables('$fxv#31')]",
        "[variables('$fxv#32')]",
        "[variables('$fxv#33')]",
        "[variables('$fxv#34')]",
        "[variables('$fxv#35')]",
        "[variables('$fxv#36')]",
        "[variables('$fxv#37')]",
        "[variables('$fxv#38')]",
        "[variables('$fxv#39')]",
        "[variables('$fxv#40')]",
        "[variables('$fxv#41')]",
        "[variables('$fxv#42')]",
        "[variables('$fxv#43')]",
        "[variables('$fxv#44')]",
        "[variables('$fxv#45')]",
        "[variables('$fxv#46')]",
        "[variables('$fxv#47')]",
        "[variables('$fxv#48')]",
        "[variables('$fxv#49')]",
        "[variables('$fxv#50')]",
        "[variables('$fxv#51')]",
        "[variables('$fxv#52')]",
        "[variables('$fxv#53')]",
        "[variables('$fxv#54')]",
        "[variables('$fxv#55')]",
        "[variables('$fxv#56')]",
        "[variables('$fxv#57')]",
        "[variables('$fxv#58')]",
        "[variables('$fxv#59')]",
        "[variables('$fxv#60')]",
        "[variables('$fxv#61')]",
        "[variables('$fxv#62')]",
        "[variables('$fxv#63')]",
        "[variables('$fxv#64')]",
        "[variables('$fxv#65')]",
        "[variables('$fxv#66')]",
        "[variables('$fxv#67')]",
        "[variables('$fxv#68')]",
        "[variables('$fxv#69')]",
        "[variables('$fxv#70')]",
        "[variables('$fxv#71')]",
        "[variables('$fxv#72')]",
        "[variables('$fxv#73')]",
        "[variables('$fxv#74')]",
        "[variables('$fxv#75')]",
        "[variables('$fxv#76')]",
        "[variables('$fxv#77')]",
        "[variables('$fxv#78')]",
        "[variables('$fxv#79')]",
        "[variables('$fxv#80')]",
        "[variables('$fxv#81')]",
        "[variables('$fxv#82')]",
        "[variables('$fxv#83')]",
        "[variables('$fxv#84')]",
        "[variables('$fxv#85')]",
        "[variables('$fxv#86')]",
        "[variables('$fxv#87')]",
        "[variables('$fxv#88')]",
        "[variables('$fxv#89')]",
        "[variables('$fxv#90')]",
        "[variables('$fxv#91')]",
        "[variables('$fxv#92')]",
        "[variables('$fxv#93')]",
        "[variables('$fxv#94')]",
        "[variables('$fxv#95')]",
        "[variables('$fxv#96')]",
        "[variables('$fxv#97')]",
        "[variables('$fxv#98')]"
      ],
      "AzureCloud": [],
      "AzureChinaCloud": [],
      "AzureUSGovernment": []
    },
    "loadPolicySetDefinitions": {
      "All": [
        "[string(variables('$fxv#99'))]",
        "[string(variables('$fxv#100'))]",
        "[string(variables('$fxv#101'))]",
        "[string(variables('$fxv#102'))]",
        "[string(variables('$fxv#103'))]",
        "[string(variables('$fxv#104'))]"
      ],
      "AzureCloud": [],
      "AzureChinaCloud": [],
      "AzureUSGovernment": []
    },
    "policyDefinitionsByCloudType": {
      "All": "[variables('policyDefinitionsAll')]",
      "AzureCloud": "[variables('policyDefinitionsAzureCloud')]",
      "AzureChinaCloud": "[variables('policyDefinitionsAzureChinaCloud')]",
      "AzureUSGovernment": "[variables('policyDefinitionsAzureUSGovernment')]"
    },
    "policySetDefinitionsByCloudType": {
      "All": "[variables('policySetDefinitionsAll')]",
      "AzureCloud": "[variables('policySetDefinitionsAzureCloud')]",
      "AzureChinaCloud": "[variables('policySetDefinitionsAzureChinaCloud')]",
      "AzureUSGovernment": "[variables('policySetDefinitionsAzureUSGovernment')]"
    },
    "policyDefinitions": "[concat(variables('policyDefinitionsByCloudType').All, variables('policyDefinitionsByCloudType')[variables('cloudEnv')])]",
    "policySetDefinitions": "[concat(variables('policySetDefinitionsByCloudType').All, variables('policySetDefinitionsByCloudType')[variables('cloudEnv')])]"
  },
  "resources": [
    {
      "copy": {
        "name": "PolicyDefinitions",
        "count": "[length(variables('policyDefinitions'))]"
      },
      "type": "Microsoft.Authorization/policyDefinitions",
      "apiVersion": "2020-09-01",
      "name": "[variables('policyDefinitions')[copyIndex()].name]",
      "properties": {
        "description": "[variables('policyDefinitions')[copyIndex()].properties.description]",
        "displayName": "[variables('policyDefinitions')[copyIndex()].properties.displayName]",
        "metadata": "[variables('policyDefinitions')[copyIndex()].properties.metadata]",
        "mode": "[variables('policyDefinitions')[copyIndex()].properties.mode]",
        "parameters": "[variables('policyDefinitions')[copyIndex()].properties.parameters]",
        "policyType": "[variables('policyDefinitions')[copyIndex()].properties.policyType]",
        "policyRule": "[variables('policyDefinitions')[copyIndex()].properties.policyRule]"
      }
    },
    {
      "copy": {
        "name": "PolicySetDefinitions",
        "count": "[length(variables('policySetDefinitions'))]"
      },
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2020-09-01",
      "name": "[variables('policySetDefinitions')[copyIndex()].name]",
      "properties": {
        "description": "[variables('policySetDefinitions')[copyIndex()].properties.description]",
        "displayName": "[variables('policySetDefinitions')[copyIndex()].properties.displayName]",
        "metadata": "[variables('policySetDefinitions')[copyIndex()].properties.metadata]",
        "parameters": "[variables('policySetDefinitions')[copyIndex()].properties.parameters]",
        "policyType": "[variables('policySetDefinitions')[copyIndex()].properties.policyType]",
        "policyDefinitions": "[variables('policySetDefinitions')[copyIndex()].properties.policyDefinitions]",
        "policyDefinitionGroups": "[variables('policySetDefinitions')[copyIndex()].properties.policyDefinitionGroups]"
      },
      "dependsOn": [
        "PolicyDefinitions"
      ]
    }
  ],
  "outputs": {
    "policyDefinitionNames": {
      "type": "array",
      "copy": {
        "count": "[length(variables('policyDefinitions'))]",
        "input": "[variables('policyDefinitions')[copyIndex()].name]"
      }
    },
    "policySetDefinitionNames": {
      "type": "array",
      "copy": {
        "count": "[length(variables('policySetDefinitions'))]",
        "input": "[variables('policySetDefinitions')[copyIndex()].name]"
      }
    }
  }
}